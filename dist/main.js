e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";e.exports=function(e){var t=null;return{trackUncaught:()=>{null===t&&(t=window.onerror,window.onerror=((t,n,i,o,a)=>{e.trackEvent("uncaught error",{uncaughtError:{msg:t,url:n,line:i,col:o}})}))},ignoreUncaught:()=>{null!==t&&(window.onerror=t,t=null)}}}},function(e,t,n){"use strict";e.exports={log(){}}},function(e,t,n){"use strict";const{LEVELS:i}=n(13);e.exports={TRACE_ALL:!1,METHODS:{[i.SILLY]:"debug"in console?"debug":"log",[i.VERBOSE]:"debug"in console?"debug":"log",[i.DEBUG]:"log",[i.INFO]:"info"in console?"info":"log",[i.WARNING]:"warn"in console?"warn":"error",[i.ERROR]:"error"},log(e,...t){console[this.METHODS[e]](...t)}}},function(e,t,n){var i=n(9),o=n(4),a=n(33),s=n(98).Buffer,r=n(16),c={http:i,https:o},l=function(e,t){var n={};if(!e)throw new Error("The Mixpanel Client needs a Mixpanel token: `init(token)`");n.config={test:!1,debug:!1,verbose:!1,host:"api.mixpanel.com",protocol:"http"},n.token=e,n.send_request=function(e,t,i){i=i||function(){};var o={data:new s(JSON.stringify(t)).toString("base64"),ip:0,verbose:n.config.verbose?1:0},r=c[n.config.protocol];if(!r)throw new Error("Mixpanel Initialization Error: Unsupported protocol "+n.config.protocol+". Supported protocols are: "+Object.keys(c));if("/import"===e){var l=n.config.key;if(!l)throw new Error("The Mixpanel Client needs a Mixpanel api key when importing old events: `init(token, { key: ... })`");o.api_key=l}var p={host:n.config.host,port:n.config.port,headers:{}};n.config.test&&(o.test=1);var u=a.stringify(o);p.path=[e,"?",u].join(""),r.get(p,function(e){var t="";e.on("data",function(e){t+=e}),e.on("end",function(){var e;if(n.config.verbose)try{var o=JSON.parse(t);1!=o.status&&(e=new Error("Mixpanel Server Error: "+o.error))}catch(t){e=new Error("Could not parse response from Mixpanel")}else e="1"!==t?new Error("Mixpanel Server Error: "+t):void 0;i(e)})}).on("error",function(e){n.config.debug&&console.log("Got Error: "+e.message),i(e)})},n.track=function(e,t,i){"function"!=typeof t&&t||(i=t,t={});var o="number"==typeof t.time?"/import":"/track";t.token=n.token,t.mp_lib="node";var a={event:e,properties:t};n.config.debug&&(console.log("Sending the following event to Mixpanel:"),console.log(a)),n.send_request(o,a,i)};var i=function(e){if(void 0===e)throw new Error("Import methods require you to specify the time of the event");return"[object Date]"===Object.prototype.toString.call(e)&&(e=Math.floor(e.getTime()/1e3)),e};n.import=function(e,t,o,a){"function"!=typeof o&&o||(a=o,o={}),o.time=i(t),n.track(e,o,a)},n.import_batch=function(e,t,o){var a=50,s=e.length,r=s,c=0,l=0,p=[];"function"!=typeof t&&t||(o=t,t={}),t.max_batch_size&&(r=t.max_batch_size,t.max_batch_size<a&&(a=t.max_batch_size));var u=function(){for(var t,r=[],d=l;d<s&&d<l+a;d++)(t=e[d].properties).time=i(t.time),t.token||(t.token=n.token),r.push(e[d]);r.length>0&&(n.send_request("/import",r,function(e){c+=r.length,e&&p.push(e),c<s?u():o&&o(p)}),l+=a)};n.config.debug&&console.log("Sending "+e.length+" events to Mixpanel in "+Math.ceil(s/a)+" requests");for(var d=0;d<r;d+=a)u()},n.alias=function(e,t,i){var o={distinct_id:e,alias:t};n.track("$create_alias",o,i)},n.people={set_once:function(e,t,n,i,o){var a={};"object"==typeof t?("object"==typeof n?(o=i,i=n):o=n,a=t):(a[t]=n,"function"!=typeof i&&i||(o=i)),(i=i||{}).set_once=!0,this._set(e,a,o,i)},set:function(e,t,n,i,o){var a={};"object"==typeof t?("object"==typeof n?(o=i,i=n):o=n,a=t):(a[t]=n,"function"!=typeof i&&i||(o=i)),this._set(e,a,o,i)},_set:function(e,t,i,a){var s=(a=a||{})&&a.set_once?"$set_once":"$set",r={$token:n.token,$distinct_id:e};r[s]=t,"ip"in t&&(r.$ip=t.ip,delete t.ip),t.$ignore_time&&(r.$ignore_time=t.$ignore_time,delete t.$ignore_time),r=o(r,a),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(r)),n.send_request("/engage",r,i)},increment:function(e,t,i,a,s){var r={};"object"==typeof t?("object"==typeof i?(s=a,a=i):s=i,Object.keys(t).forEach(function(e){var i=t[e];isNaN(parseFloat(i))?n.config.debug&&(console.error("Invalid increment value passed to mixpanel.people.increment - must be a number"),console.error("Passed "+e+":"+i)):r[e]=i})):"number"!=typeof i&&i?"function"==typeof i?(s=i,r[t]=1):(s=a,a="object"==typeof i?i:{},r[t]=1):(i=i||1,r[t]=i,"function"==typeof a&&(s=a));var c={$add:r,$token:n.token,$distinct_id:e};c=o(c,a),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(c)),n.send_request("/engage",c,s)},append:function(e,t,i,a,s){var r={};"object"==typeof t?("object"==typeof i?(s=a,a=i):s=i,Object.keys(t).forEach(function(e){r[e]=t[e]})):(r[t]=i,"function"==typeof a&&(s=a));var c={$append:r,$token:n.token,$distinct_id:e};c=o(c,a),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(c)),n.send_request("/engage",c,s)},track_charge:function(e,t,i,a,s){if("function"!=typeof i&&i?"function"!=typeof a&&a||(s=a||function(){},(i.$ignore_time||i.hasOwnProperty("$ip"))&&(a={},Object.keys(i).forEach(function(e){a[e]=i[e],delete i[e]}))):(s=i||function(){},i={}),"number"!=typeof t&&(t=parseFloat(t),isNaN(t)))console.error("Invalid value passed to mixpanel.people.track_charge - must be a number");else{if(i.$amount=t,i.hasOwnProperty("$time")){var r=i.$time;"[object Date]"===Object.prototype.toString.call(r)&&(i.$time=r.toISOString())}var c={$append:{$transactions:i},$token:n.token,$distinct_id:e};c=o(c,a),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(c)),n.send_request("/engage",c,s)}},clear_charges:function(e,t,i){var a={$set:{$transactions:[]},$token:n.token,$distinct_id:e};"function"==typeof t&&(i=t),a=o(a,t),n.config.debug&&console.log("Clearing this user's charges:",e),n.send_request("/engage",a,i)},delete_user:function(e,t,i){var a={$delete:"",$token:n.token,$distinct_id:e};"function"==typeof t&&(i=t),a=o(a,t),n.config.debug&&console.log("Deleting the user from engage:",e),n.send_request("/engage",a,i)},union:function(e,t,i,a){var s={};"object"!=typeof t||r.isArray(t)?n.config.debug&&console.error("Invalid value passed to mixpanel.people.union - data must be an object with array values"):(Object.keys(t).forEach(function(e){var i=t[e];if(r.isArray(i)){var o=i.filter(function(e){return"string"==typeof e||"number"==typeof e});o.length>0&&(s[e]=o)}else{if("string"!=typeof i&&"number"!=typeof i)return void(n.config.debug&&(console.error("Invalid argument passed to mixpanel.people.union - values must be a scalar value or array"),console.error("Passed "+e+":",i)));s[e]=[i]}}),0!==Object.keys(s).length&&(t={$union:s,$token:n.token,$distinct_id:e},"function"==typeof i&&(a=i),t=o(t,i),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(t)),n.send_request("/engage",t,a)))},unset:function(e,t,i,a){var s=[];if(r.isArray(t))s=t;else{if("string"!=typeof t)return void(n.config.debug&&(console.error("Invalid argument passed to mixpanel.people.unset - must be a string or array"),console.error("Passed: "+t)));s=[t]}var c={$unset:s,$token:n.token,$distinct_id:e};"function"==typeof i&&(a=i),c=o(c,i),n.config.debug&&(console.log("Sending the following data to Mixpanel (Engage):"),console.log(c)),n.send_request("/engage",c,a)}};var o=function(e,t){return t&&(t.$ignore_alias&&(e.$ignore_alias=t.$ignore_alias),t.$ignore_time&&(e.$ignore_time=t.$ignore_time),t.hasOwnProperty("$ip")&&(e.$ip=t.$ip),t.hasOwnProperty("$time")&&(e.$time=i(t.$time))),e};return n.set_config=function(e){for(var t in e)if(e.hasOwnProperty(t))if("host"==t){n.config.host=e[t].split(":")[0];var i=e[t].split(":")[1];i&&(n.config.port=Number(i))}else n.config[t]=e[t]},t&&n.set_config(t),n};e.exports={Client:function(e){return console.warn("The function `Client(token)` is deprecated.  It is now called `init(token)`."),l(e)},init:l}},function(e,t){e.exports=require("buffer")},function(e,t,n){"use strict";const i=n(8),o=n(2),a=n(3),s=n(29),r="undefined"!=typeof atom&&atom.config.getUserConfigPath()?a.join(a.dirname(atom.config.getUserConfigPath()),"kite-config.json"):a.join(o.homedir(),".kite","kite-config.json");var c=null;try{s.verbose(`initializing localconfig from ${r}...`);var l=i.readFileSync(r,{encoding:"utf8"});c=JSON.parse(l)}catch(e){c={}}e.exports={get:function(e,t){return e in c?c[e]:t},set:function(e,t){var n;c[e]=t,n=JSON.stringify(c,null,2),i.writeFile(r,n,"utf8",e=>{e&&s.error(`failed to persist localconfig to ${r}`,e)})}}},function(e){e.exports={_args:[[{raw:"kite-installer@^3.2.0",scope:null,escapedName:"kite-installer",name:"kite-installer",rawSpec:"^3.2.0",spec:">=3.2.0 <4.0.0",type:"range"},"/Users/kite/atom-plugin"]],_from:"kite-installer@>=3.2.0 <4.0.0",_hasShrinkwrap:!1,_id:"kite-installer@3.8.0",_inCache:!0,_location:"/kite-installer",_nodeVersion:"11.12.0",_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/kite-installer_3.8.0_1554337451659_0.9984139595740766"},_npmUser:{name:"dane-at-kite",email:"dane@kite.com"},_npmVersion:"6.7.0",_phantomChildren:{"form-data":"2.3.3",md5:"2.2.1"},_requested:{raw:"kite-installer@^3.2.0",scope:null,escapedName:"kite-installer",name:"kite-installer",rawSpec:"^3.2.0",spec:">=3.2.0 <4.0.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/kite-installer/-/kite-installer-3.8.0.tgz",_shasum:"6a8c354b04a6a95d4577fdfee8ca4b3f94f754fb",_shrinkwrap:null,_spec:"kite-installer@^3.2.0",_where:"/Users/kite/atom-plugin",author:{name:"Daniel Hung"},dependencies:{"kite-api":"2.14.0","kite-connector":"2.8.0",mixpanel:"^0.5.0",rollbar:"^2.4.4"},description:"Javascript library to install and manage Kite",devDependencies:{"babel-eslint":"^7.1.1",codecov:"^1.0.0",eslint:"^3.6.0","eslint-config":"^0.3.0","eslint-config-fbjs":"^1.1.1","eslint-plugin-babel":"^4.0.0","eslint-plugin-flowtype":"^2.29.1","eslint-plugin-jasmine":"^2.2.0","eslint-plugin-prefer-object-spread":"^1.1.0","eslint-plugin-react":"^6.8.0","expect.js":"^0.3.1",fbjs:"^0.8.6",jsdom:"^9.8.3",mocha:"^5.2.0","mocha-jsdom":"^1.1.0",nyc:"^13.0.1",sinon:"^2.3.5"},directories:{},dist:{integrity:"sha512-92rNi6BKMmBMRMzdd0ET1gBn7a7g6EYejTAuer+yq2f1Z4jnEAZH1JHeZgn/ukULUol5sCNdbUDVbAk7mbLxVQ==",shasum:"6a8c354b04a6a95d4577fdfee8ca4b3f94f754fb",tarball:"https://registry.npmjs.org/kite-installer/-/kite-installer-3.8.0.tgz",fileCount:70,unpackedSize:3058926,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJcpU6sCRA9TVsSAnZWagAAj8wP/13cf2Cds+7PXwGzFvFq\nKWR4Pa86NwzJCzGAcndILqgegJUol8cuajvC0i9nFuDAoEBLpjrj4qqVK7t8\ndqlIKSjm/+1MR4/HjFayZYLL/EvySoQ5ADHIs8lNvwXF/rRdFVAMsoqr6NBl\npNAvX1izsO4nKFKZsvtr1Uhkg51o5QQuD5Rx9zoztgnfvBxHzqlO5RojHiox\n5LGkN0fOMto7TgjYKW7BSPWF0sODYEm/eEPdedDpCnS0eYbMMzTf7dv8ASBv\nRtlWcBetpXLMl6n8rM3bp/lAd2r8cI6ApicgVZI9OldZyoiIiCwY2L3J/nhK\n9+Njw6boT1baROqitGqfLhuNXBtMndDywQMRqbQUKPV7LRFYxzL6GBQne7B8\nrpePQuHoglTNmaV6nej36BaWaWyXpnrRcAYGhwQJwidJE3h1cR/IfHvW7Ols\n57WXbsJ+tJ3UfjUgSNIvjOPfqq4MY5kdmSJG6cN7f8t7HfCW16dBp7L0Tr2t\nZFG3zjgcHIZUomGuBLCeNRVLosbP5VT0F8QqBF8EjS7EPlb8P+hfJ58+P0dB\n4ghcPOi3fw1TDQ+A+REaKHU62hB4QRmkJ5PybE2R/CmUs132+wG1ynedTfyk\njuUPyUOIc55Gk/YNkULiTncx4A0sHMMf/XGjpiD23aQWpTQTpFWPL+Oh0Ynk\ndef/\r\n=VDza\r\n-----END PGP SIGNATURE-----\r\n"},gitHead:"d89adbf0a62b3ffab604f7cf9f1639963c2b294c",keywords:[],license:"SEE LICENSE IN LICENSE",main:"./lib/index.js",maintainers:[{name:"abe33",email:"cedric.nehemie@gmail.com"},{name:"adamsmith",email:"adam@kite.com"},{name:"dane-at-kite",email:"dane@kite.com"},{name:"dbratz1177",email:"danebratz@gmail.com"},{name:"dhung09",email:"dhung09@gmail.com"},{name:"intrepidlemon",email:"admin@intrepidlemon.com"},{name:"taraku",email:"tarakju@gmail.com"}],name:"kite-installer",optionalDependencies:{},readme:"ERROR: No README data found!",scripts:{coverage:"npm run lcov_report && codecov",lcov_report:"nyc report --reporter=lcov",lint:"eslint .","lint:fix":"eslint --fix .",test:"nyc mocha --timeout 20000 --recursive test/*.test.js test/**/*.test.js","test-nocov":"mocha --timeout 20000 --recursive test/*.test.js test/**/*.test.js"},version:"3.8.0"}},function(e,t,n){"use strict";const i=n(22),o=n(47),{STATES:a}=n(13),s={STATES:a,get support(){return o.adapter},get releaseURL(){return this.support.releaseURL},get downloadPath(){return this.support.downloadPath},get installPath(){return this.support.installPath},client:{request:(...e)=>i.request(...e).catch(e=>{if(e.resp)return e.resp;throw e})}};[["handleState","checkHealth"],["pathInWhitelist","isPathWhitelisted"]].forEach(([e,t])=>{s[e]=((...e)=>i[t](...e))}),["arch","isAdmin","isOSSupported","isOSVersionSupported","hasManyKiteInstallation","hasManyKiteEnterpriseInstallation","hasBothKiteInstalled"].forEach(e=>{s[e]=((...t)=>o.adapter[e](...t))}),["isKiteSupported","isKiteInstalled","isKiteEnterpriseInstalled","canInstallKite","downloadKiteRelease","downloadKite","installKite","isKiteRunning","canRunKite","runKite","runKiteAndWait","isKiteEnterpriseRunning","canRunKiteEnterprise","runKiteEnterprise","runKiteEnterpriseAndWait","isKiteReachable","waitForKite","isUserAuthenticated","canAuthenticateUser","authenticateUser","authenticateSessionID","isPathWhitelisted","canWhitelistPath","whitelistPath","blacklistPath","saveUserID"].forEach(e=>{s[e]=((...t)=>i[e](...t))}),e.exports=s},function(e,t,n){const i=n(103),o=n(105),a=n(106),s=n(107),r=n(108),c=n(59),l=n(109),p=n(110),u=n(61),d=n(130),m=n(131),h=n(132),f=n(133),g=n(134),v=n(22);e.exports={Authenticate:i,BranchStep:o,CheckEmail:a,CreateAccount:s,Download:r,Flow:c,GetEmail:l,InputEmail:p,Install:u,KiteVsJedi:d,Login:m,ParallelSteps:h,VoidStep:g,atom:()=>{const e=n(135),t=n(136),u=n(137),x=n(138),b=n(139),y=n(140),w=n(141),k=n(142),E=n(143);return{InstallElement:e,InputEmailElement:t,InstallWaitElement:u,InstallEndElement:x,InstallErrorElement:b,KiteVsJediElement:y,LoginElement:w,InstallPlugin:E,defaultFlow:()=>[new o([{match:e=>v.isAdmin(),step:new l({name:"get-email"})},{match:e=>!v.isAdmin(),step:new g({name:"not-admin",view:new k("kite_installer_not_admin_step")})}],{name:"admin-check"}),new p({name:"input-email",view:new t("kite_installer_input_email_step")}),new a({name:"check-email",failureStep:"input-email"}),new o([{match:e=>e.account.exists,step:new m({name:"login",view:new w("kite_installer_login_step"),failureStep:"account-switch",backStep:"input-email"})},{match:e=>!e.account.exists,step:new s({name:"create-account"})}],{name:"account-switch"}),new h([new c([new r({name:"download"}),new i({name:"authenticate"}),new E({name:"install-plugin"})],{name:"download-flow"}),new f({name:"wait-step",view:new u("kite_installer_wait_step")})],{name:"download-and-wait"}),new o([{match:e=>!e.error,step:new g({name:"end",view:new x("kite_installer_install_end_step")})},{match:e=>e.error,step:new g({name:"error",view:new b("kite_installer_install_error_step")})}],{name:"termination"})],autocompletePythonFlow:()=>[new d({name:"kite-vs-jedi",view:new y("kite_installer_choose_kite_step")}),new o([{match:e=>!0,step:new l({name:"get-email"})},{match:e=>!1,step:new g({name:"not-admin",view:new k("kite_installer_not_admin_step")})}],{name:"admin-check"}),new p({name:"input-email",view:new t("kite_installer_input_email_step")}),new a({name:"check-email",failureStep:"input-email"}),new o([{match:e=>e.skipped,step:new f({name:"skip-email"})},{match:e=>!e.skipped&&e.account.exists,step:new m({name:"login",view:new w("kite_installer_login_step"),failureStep:"account-switch",backStep:"input-email"})},{match:e=>!e.skipped&&!e.account.exists,step:new s({name:"create-account"})}],{name:"account-switch"}),new h([new c([new r({name:"download"}),new i({name:"authenticate"}),new E({name:"install-plugin"})],{name:"download-flow"}),new f({name:"wait-step",view:new u("kite_installer_wait_step")})],{name:"download-and-wait"}),new o([{match:e=>!e.error,step:new g({name:"end",view:new x("kite_installer_install_end_step")})},{match:e=>e.error,step:new g({name:"error",view:new b("kite_installer_install_error_step")})}],{name:"termination"})]}}}},function(e,t,n){"use strict";const i=n(6),o=n(22),{retryPromise:a}=n(5),s=n(17);e.exports=class extends i{constructor(e={}){super(e),this.cooldown=e.cooldown||1500,this.tries=e.tries||10}start(e,t){let n;return t.updateState({authenticate:{done:!1}}),(n=e.account&&e.account.sessionId?a(()=>o.authenticateSessionID(e.account.sessionId),this.tries,this.cooldown):Promise.resolve()).then(()=>{s.Tracker.trackEvent("kite_installer_user_authenticated"),t.updateState({authenticate:{done:!0}})})}}},function(e,t,n){"use strict";e.exports=class{constructor(e=[]){this.disposables=e}add(e){e&&!this.disposables.includes(e)&&this.disposables.push(e)}remove(e){e&&this.disposables.includes(e)&&(this.disposables=this.disposables.filter(t=>t!=e))}dispose(){this.disposables.forEach(e=>e.dispose())}}},function(e,t,n){"use strict";const i=n(6);e.exports=class extends i{constructor(e,t){super(t),this.branches=e}start(e){return new Promise((t,n)=>{const i=this.branches.reduce((t,n)=>t||(n.match(e)?{step:n.step,data:e}:null),null);i?t(i):n()})}}},function(e,t,n){"use strict";const i=n(6),o=n(27);e.exports=class extends i{start({account:e}){return e.skipped?Promise.resolve({skipped:!0}):o.checkEmail(e).catch(e=>{if(e.resp)return e.resp;throw e}).then(()=>({error:null,account:{email:e.email,invalid:!1,exists:!1,hasPassword:!1,reason:null}})).catch(t=>{if(!t.data||!t.data.response)throw t;{const n=JSON.parse(t.data.responseData);switch(t.data.responseStatus){case 403:case 404:case 409:if(n.email_invalid){const t=new Error(n.fail_reason);throw t.data={account:{email:e.email,invalid:n.email_invalid,exists:n.account_exists,hasPassword:n.has_password,reason:n.fail_reason}},t}return{error:null,account:{email:e.email,invalid:n.email_invalid,exists:n.account_exists,hasPassword:n.has_password,reason:n.fail_reason}}}}})}}},function(e,t,n){"use strict";const i=n(6),o=n(27),a=n(5);e.exports=class extends i{start({account:{email:e}},t){return o.createAccount({email:e}).then(e=>{const t=a.parseSetCookies(e.headers["set-cookie"]);return{account:{sessionId:a.findCookie(t,"kite-session").Value}}})}}},function(e,t,n){"use strict";const i=n(22),{retryPromise:o}=n(5),a=n(17),s=n(6);e.exports=class extends s{constructor(e){super(e),this.installInterval=1500,this.runInterval=2500}start(e,t){return i.downloadKiteRelease({reinstall:!0,onDownloadProgress:(e,n,i)=>{t.updateState({download:{length:e,total:n,ratio:i}})}}).then(()=>(a.Tracker.trackEvent("kite_installer_kite_app_downloaded"),t.updateState({download:{done:!0},install:{done:!1}}),o(()=>i.installKite(),5,this.installInterval))).then(()=>o(()=>i.isKiteInstalled(),10,this.installInterval)).then(()=>(a.Tracker.trackEvent("kite_installer_kite_app_installed"),t.updateState({install:{done:!0},running:{done:!1}}),i.runKiteAndWait(30,this.runInterval).then(()=>{a.Tracker.trackEvent("kite_installer_kite_app_started"),t.updateState({running:{done:!0}})})))}}},function(e,t,n){"use strict";const i=n(8),o=n(2),a=n(3),s=n(29),{Tracker:r}=n(17),c=n(6);e.exports=class extends c{start(){return new Promise((e,t)=>{const n=String(i.readFileSync(a.join(o.homedir(),".gitconfig"))).split("\n").filter(e=>/^\s*email\s=/.test(e))[0];e({account:{email:n?n.split("=")[1].trim():void 0}})}).catch(e=>(r.trackEvent("error parsing gitconfig",{error:e.message}),s.error("error parsing gitconfig:",e),{account:{email:void 0}}))}}},function(e,t,n){"use strict";const i=n(6);e.exports=class extends i{start(e,t){return new Promise((e,n)=>{this.subscriptions.add(t.on("did-submit-email",t=>{e({account:t})})),this.subscriptions.add(t.on("did-skip-email",t=>{e({account:t})}))})}}},function(e,t,n){var i=n(16),o=n(2),a=n(112),s=n(113),r=n(7),c=n(120),l=n(38),p=n(122),u=n(25),d=n(63),m=n(123),h=n(128),f=n(129);function g(e,t){if(r.isType(e,"string")){var n=e;(e={}).accessToken=n}void 0!==e.minimumLevel&&(e.reportLevel=e.minimumLevel,delete e.minimumLevel),this.options=r.handleOptions(g.defaultOptions,e),delete this.options.maxItems,this.options.environment=this.options.environment||"unspecified",l.setVerbose(this.options.verbose),this.lambdaContext=null,this.lambdaTimeoutHandle=null;var i=new p,o=new c(this.options,i,u,d);this.client=t||new s(this.options,o,l,"server"),this.client.notifier.addTransform(m.baseData).addTransform(m.handleItemWithError).addTransform(m.addBody).addTransform(h.addMessageWithError).addTransform(h.addTelemetryData).addTransform(m.addRequestData).addTransform(m.addLambdaData).addTransform(h.addConfigToPayload).addTransform(m.scrubPayload).addTransform(h.userTransform(l)).addTransform(h.itemToPayload),this.client.queue.addPredicate(f.checkLevel).addPredicate(f.userCheckIgnore(l)).addPredicate(f.urlIsNotBlacklisted(l)).addPredicate(f.urlIsWhitelisted(l)).addPredicate(f.messageIsIgnored(l)),this.setupUnhandledCapture()}var v=null;function x(e){var t="Rollbar is not initialized";l.error(t),e&&e(new Error(t))}function b(e){for(var t=0,n=e.length;t<n;++t)if(r.isFunction(e[t]))return e[t]}function y(e,t){var n=function(e,n){t(e,n)};n._rollbarHandler=!0;for(var i=process.listeners(e),o=i.length,a=0;a<o;++a)i[a]._rollbarHandler&&process.removeListener(e,i[a]);process.on(e,n)}function w(e,t){Error.call(this),Error.captureStackTrace(this,this.constructor),this.message=e,this.nested=t,this.name=this.constructor.name}g.init=function(e,t){return v?v.global(e).configure(e):v=new g(e,t)},g.prototype.global=function(e){return delete(e=r.handleOptions(e)).maxItems,this.client.global(e),this},g.global=function(e){if(v)return v.global(e);x()},g.prototype.configure=function(e,t){var n=this.options,i={};return t&&(i={payload:t}),this.options=r.handleOptions(n,e,i),delete this.options.maxItems,l.setVerbose(this.options.verbose),this.client.configure(e,t),this.setupUnhandledCapture(),this},g.configure=function(e,t){if(v)return v.configure(e,t);x()},g.prototype.lastError=function(){return this.client.lastError},g.lastError=function(){if(v)return v.lastError();x()},g.prototype.log=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.log(e),{uuid:t}},g.log=function(){if(v)return v.log.apply(v,arguments);x(b(arguments))},g.prototype.debug=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.debug(e),{uuid:t}},g.debug=function(){if(v)return v.debug.apply(v,arguments);x(b(arguments))},g.prototype.info=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.info(e),{uuid:t}},g.info=function(){if(v)return v.info.apply(v,arguments);x(b(arguments))},g.prototype.warn=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.warn(e),{uuid:t}},g.warn=function(){if(v)return v.warn.apply(v,arguments);x(b(arguments))},g.prototype.warning=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.warning(e),{uuid:t}},g.warning=function(){if(v)return v.warning.apply(v,arguments);x(b(arguments))},g.prototype.error=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.error(e),{uuid:t}},g.error=function(){if(v)return v.error.apply(v,arguments);x(b(arguments))},g.prototype._uncaughtError=function(){var e=this._createItem(arguments);e._isUncaught=!0;var t=e.uuid;return this.client.error(e),{uuid:t}},g.prototype.critical=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.critical(e),{uuid:t}},g.critical=function(){if(v)return v.critical.apply(v,arguments);x(b(arguments))},g.prototype.buildJsonPayload=function(e){return this.client.buildJsonPayload(e)},g.buildJsonPayload=function(){if(v)return v.buildJsonPayload.apply(v,arguments);x()},g.prototype.sendJsonPayload=function(e){return this.client.sendJsonPayload(e)},g.sendJsonPayload=function(){if(v)return v.sendJsonPayload.apply(v,arguments);x()},g.prototype.wait=function(e){this.client.wait(e)},g.wait=function(e){if(v)return v.wait(e);x(b(arguments))},g.prototype.errorHandler=function(){return function(e,t,n,i){var o=function(o){return o&&l.error("Error reporting to rollbar, ignoring: "+o),i(e,t,n)};return e?e instanceof Error?this.error(e,t,o):this.error("Error: "+e,t,o):i(e,t,n)}.bind(this)},g.errorHandler=function(){if(v)return v.errorHandler();x()},g.prototype.lambdaHandler=function(e,t){return e.length<=2?this.asyncLambdaHandler(e,t):this.syncLambdaHandler(e,t)},g.prototype.asyncLambdaHandler=function(e,t){var n=this,i=n.options.captureLambdaTimeouts;return function(o,a){return new Promise(function(s,r){if(n.lambdaContext=a,i){var c=(t||function(e,t){var i={originalEvent:e,originalRequestId:t.awsRequestId};n.error("Function timed out",i)}).bind(null,o,a);n.lambdaTimeoutHandle=setTimeout(c,a.getRemainingTimeInMillis()-1e3)}e(o,a).then(function(e){clearTimeout(n.lambdaTimeoutHandle),s(e)}).catch(function(e){n.error(e),n.wait(function(){clearTimeout(n.lambdaTimeoutHandle),r(e)})})})}},g.prototype.syncLambdaHandler=function(e,t){var n=this,i=n.options.captureLambdaTimeouts;return function(o,a,s){if(n.lambdaContext=a,i){var r=(t||function(e,t,i){var o={originalEvent:e,originalRequestId:t.awsRequestId};n.error("Function timed out",o)}).bind(null,o,a,s);n.lambdaTimeoutHandle=setTimeout(r,a.getRemainingTimeInMillis()-1e3)}try{e(o,a,function(e,t){e&&n.error(e),n.wait(function(){clearTimeout(n.lambdaTimeoutHandle),s(e,t)})})}catch(e){n.error(e),n.wait(function(){throw clearTimeout(n.lambdaTimeoutHandle),e})}}},g.lambdaHandler=function(e){if(v)return v.lambdaHandler(e);x()},g.prototype.wrapCallback=function(e){return function(e,t){return function(){var n=arguments[0];return n&&e.error(n),t.apply(this,arguments)}}(this,e)},g.wrapCallback=function(e){if(v)return v.wrapCallback(e);x()},g.prototype.captureEvent=function(){var e=r.createTelemetryEvent(arguments);return this.client.captureEvent(e.type,e.metadata,e.level)},g.captureEvent=function(){if(v)return v.captureEvent.apply(v,arguments);x()},g.prototype.reportMessage=function(e,t,n,i){return l.log("reportMessage is deprecated"),r.isFunction(this[t])?this[t](e,n,i):this.error(e,n,i)},g.reportMessage=function(e,t,n,i){if(v)return v.reportMessage(e,t,n,i);x(i)},g.prototype.reportMessageWithPayloadData=function(e,t,n,i){return l.log("reportMessageWithPayloadData is deprecated"),this.error(e,n,t,i)},g.reportMessageWithPayloadData=function(e,t,n,i){if(v)return v.reportMessageWithPayloadData(e,t,n,i);x(i)},g.prototype.handleError=function(e,t,n){return l.log("handleError is deprecated"),this.error(e,t,n)},g.handleError=function(e,t,n){if(v)return v.handleError(e,t,n);x(n)},g.prototype.handleErrorWithPayloadData=function(e,t,n,i){return l.log("handleErrorWithPayloadData is deprecated"),this.error(e,n,t,i)},g.handleErrorWithPayloadData=function(e,t,n,i){if(v)return v.handleErrorWithPayloadData(e,t,n,i);x(i)},g.handleUncaughtExceptions=function(e,t){if(v)return(t=t||{}).accessToken=e,v.configure(t);x()},g.handleUnhandledRejections=function(e,t){if(v)return(t=t||{}).accessToken=e,v.configure(t);x()},g.handleUncaughtExceptionsAndRejections=function(e,t){if(v)return(t=t||{}).accessToken=e,v.configure(t);x()},g.prototype._createItem=function(e){return r.createItem(e,l,this,["headers","protocol","url","method","body","route"],this.lambdaContext)},g.prototype.setupUnhandledCapture=function(){(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&this.handleUncaughtExceptions(),(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&this.handleUnhandledRejections()},g.prototype.handleUncaughtExceptions=function(){var e=!!this.options.exitOnUncaughtException;delete this.options.exitOnUncaughtException,y("uncaughtException",function(t){(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&(this._uncaughtError(t,function(e){e&&(l.error("Encountered error while handling an uncaught exception."),l.error(e))}),e&&setImmediate(function(){this.wait(function(){process.exit(1)})}.bind(this)))}.bind(this))},g.prototype.handleUnhandledRejections=function(){y("unhandledRejection",function(e){(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&this._uncaughtError(e,function(e){e&&(l.error("Encountered error while handling an uncaught exception."),l.error(e))})}.bind(this))},i.inherits(w,Error),g.Error=w,g.defaultOptions={host:o.hostname(),environment:"production",framework:"node-js",showReportedMessageTraces:!1,notifier:{name:"node_rollbar",version:a.version},scrubHeaders:a.defaults.server.scrubHeaders,scrubFields:a.defaults.server.scrubFields,addRequestData:null,reportLevel:a.defaults.reportLevel,verbose:!1,enabled:!0,sendConfig:!1,includeItemsInTelemetry:!1,captureEmail:!1,captureUsername:!1,captureIp:!0,captureLambdaTimeouts:!0},e.exports=g},function(e){e.exports={_args:[[{raw:"rollbar@^2.3.8",scope:null,escapedName:"rollbar",name:"rollbar",rawSpec:"^2.3.8",spec:">=2.3.8 <3.0.0",type:"range"},"/Users/kite/atom-plugin"]],_from:"rollbar@>=2.3.8 <3.0.0",_hasShrinkwrap:!1,_id:"rollbar@2.7.0",_inCache:!0,_location:"/rollbar",_nodeVersion:"8.14.1",_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/rollbar_2.7.0_1557963757958_0.5354922977806886"},_npmUser:{name:"waltjones",email:"walt@joeneng.com"},_npmVersion:"6.4.1",_phantomChildren:{},_requested:{raw:"rollbar@^2.3.8",scope:null,escapedName:"rollbar",name:"rollbar",rawSpec:"^2.3.8",spec:">=2.3.8 <3.0.0",type:"range"},_requiredBy:["/","/kite-installer"],_resolved:"https://registry.npmjs.org/rollbar/-/rollbar-2.7.0.tgz",_shasum:"6c2ad649b4f294681c70b5ec23eded77b2a76554",_shrinkwrap:null,_spec:"rollbar@^2.3.8",_where:"/Users/kite/atom-plugin",browser:"dist/rollbar.umd.min.js",bugs:{url:"https://github.com/rollbar/rollbar.js/issues"},cdn:{host:"cdnjs.cloudflare.com"},defaults:{endpoint:"api.rollbar.com/api/1/item/",browser:{scrubFields:["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","secret_key","secretKey","secretToken","cc-number","card number","cardnumber","cardnum","ccnum","ccnumber","cc num","creditcardnumber","credit card number","newcreditcardnumber","new credit card","creditcardno","credit card no","card#","card #","cc-csc","cvc2","cvv2","ccv2","security code","card verification","name on credit card","name on card","nameoncard","cardholder","card holder","name des karteninhabers","card type","cardtype","cc type","cctype","payment type","expiration date","expirationdate","expdate","cc-exp"]},server:{scrubHeaders:["authorization","www-authorization","http_authorization","omniauth.auth","cookie","oauth-access-token","x-access-token","x_csrf_token","http_x_csrf_token","x-csrf-token"],scrubFields:["pw","pass","passwd","password","password_confirmation","passwordConfirmation","confirm_password","confirmPassword","secret","secret_token","secretToken","secret_key","secretKey","api_key","access_token","accessToken","authenticity_token","oauth_token","token","user_session_secret","request.session.csrf","request.session._csrf","request.params._csrf","request.cookie","request.cookies"]},logLevel:"debug",reportLevel:"debug",uncaughtErrorLevel:"error",maxItems:0,itemsPerMin:60},dependencies:{async:"~1.2.1","console-polyfill":"0.3.0",debug:"2.6.9",decache:"^3.0.5","error-stack-parser":"1.3.3","json-stringify-safe":"~5.0.0","lru-cache":"~2.2.1","request-ip":"~2.0.1",uuid:"3.0.x"},description:"Error tracking and logging from JS to Rollbar",devDependencies:{"babel-core":"^6.26.3","babel-eslint":"^10.0.1","babel-loader":"^8.0.4",bluebird:"^3.3.5","browserstack-api":"0.0.5",chai:"^4.2.0",chalk:"^1.1.1",eslint:"^5.16.0","eslint-loader":"^2.1.2",express:"^4.16.4",glob:"^5.0.14",grunt:"^1.0.3","grunt-blanket-mocha":"^1.0.0","grunt-bumpup":"^0.6.3","grunt-cli":"^1.3.2","grunt-contrib-concat":"~0.3.0","grunt-contrib-connect":"^2.0.0","grunt-contrib-copy":"~0.5.0","grunt-contrib-jshint":"^2.0.0","grunt-contrib-uglify":"^4.0.0","grunt-contrib-watch":"^1.1.0","grunt-express":"^1.4.1","grunt-karma":"^3.0.1","grunt-karma-coveralls":"^2.5.4","grunt-mocha":"^1.1.0","grunt-mocha-cov":"^0.4.0","grunt-parallel":"^0.5.1","grunt-saucelabs":"^9.0.0","grunt-tagrelease":"~0.3.0","grunt-text-replace":"^0.4.0","grunt-vows":"^0.4.2","grunt-webpack":"^3.1.3","istanbul-instrumenter-loader":"^2.0.0",jade:"~0.27.7","jasmine-core":"^2.3.4","jquery-mockjax":"^2.0.1",karma:"^4.0.1","karma-browserstack-launcher":"^0.1.5","karma-chai":"^0.1.0","karma-chrome-launcher":"^2.2.0","karma-expect":"^1.1.0","karma-firefox-launcher":"^0.1.6","karma-html2js-preprocessor":"^1.1.0","karma-jquery":"^0.1.0","karma-mocha":"^0.2.0","karma-mocha-reporter":"^1.1.1","karma-phantomjs-launcher":"^1.0.4","karma-requirejs":"^0.2.2","karma-safari-launcher":"^0.1.1","karma-sinon":"^1.0.4","karma-sourcemap-loader":"^0.3.5","karma-webpack":"^3.0.5",mocha:"^5.2.0",mootools:"^1.5.1",nock:"^9.0.7","node-libs-browser":"^0.5.2",phantomjs:"^2.1.0",request:"^2.88.0",requirejs:"^2.1.20","script-loader":"0.6.1",sinon:"^7.3.0",stackframe:"^0.2.2","strict-loader":"^0.1.2","time-grunt":"^1.0.0","uglifyjs-webpack-plugin":"^2.1.2",vows:"~0.7.0",webpack:"^4.30.0","webpack-dev-server":"^3.1.10"},directories:{},dist:{integrity:"sha512-xMEZRcebflLiE6PqAm4h980FXH5J20R1tJ1s/cWDB9s0Uaw4rSSRX5oodtb3JkXblG7abTJRmku9Iz2WADOw3w==",shasum:"6c2ad649b4f294681c70b5ec23eded77b2a76554",tarball:"https://registry.npmjs.org/rollbar/-/rollbar-2.7.0.tgz",fileCount:106,unpackedSize:3325458,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJc3KPuCRA9TVsSAnZWagAAolUP/A379FkX7IOe+TM9pjVV\nmMiZ/Au/7Y7ZEE3hhr0yx4fqjp12F6XFcsp9X4mBWsNinNTXECwWnKH1rbb4\nals9GAquyOejG9/WnOReYfSiihfgnpaHrUB/qpeny7GFiPwX6EYivbgv5G0N\nEEwIqB3zFA35bJJo32XP9dcz2JSjXync0h0p4hKK5zEz8vWMH7mNRqa8UTmQ\n/OmL37XOAJthbgABlEhZ31BIcd8Pp0KFQNy3Pzqjk2bOsPBLO138L5mOwuLE\nvqc5C3KEEzQPrbkPl8uE1Zi53+3LohTxjxgb5xpValCSjjEmHPuxGnmrVJ+i\n29aYoS9uVnLPjp23ESIluVAGYsxfRyT3EvH8BNaZ2LwYFkk/NGnNDrm4BIHG\nwMSLcyv0xU/XrQMNA+jRQroW9d6bcmxO/g55/i5KU/kj4hvYTaJsF3nw2z2C\nQm6VmSKI8fSLFo2gV/5bnnoOYOs/3BVSOL5IivkxkscX5ns12gNYEkhosmi9\neXYyW9mMK9skJQrH6Oj9/u7aaWrw70PWdfnBfmscQKQ443qyHxTFQKBWFBtK\npsbOhfHT1bENyNDg/Vo1deZ3wVrCccecugGO3O/FvtJiOjOTG1zS4cly/sGr\n1FfvEm1CVfE4ZeBPc8vE2m+B6HilqjZUr45wGbRoMlH8tm5la2csT3Ov9L6B\n/BAb\r\n=EpQg\r\n-----END PGP SIGNATURE-----\r\n"},gitHead:"fa0843d8f316e256a386b819a394118d52dbf36c",homepage:"https://github.com/rollbar/rollbar.js#readme",license:"MIT",main:"src/server/rollbar.js",maintainers:[{name:"brianr",email:"brianrue@gmail.com"},{name:"chrisbarmonde",email:"cbarmonde@rollbar.com"},{name:"coryvirok",email:"cory@ratchet.io"},{name:"dampier",email:"dampierface@gmail.com"},{name:"jfarrimo",email:"jay@rollbar.com"},{name:"jondeandres",email:"jon@rollbar.com"},{name:"rokob",email:"fabian.ledvina@gmail.com"}],name:"rollbar",optionalDependencies:{decache:"^3.0.5"},plugins:{jquery:{version:"0.0.8"}},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+ssh://git@github.com/rollbar/rollbar.js.git"},scripts:{build:"grunt",lint:"eslint",test:"grunt test","test-browser":"grunt test-browser","test-server":"grunt test-server",test_ci:"grunt test"},types:"./index.d.ts",version:"2.7.0"}},function(e,t,n){var i=n(114),o=n(117),a=n(118),s=n(119),r=n(7);function c(e,t,n,i){this.options=r.merge(e),this.logger=n,c.rateLimiter.configureGlobal(this.options),c.rateLimiter.setPlatformOptions(i,this.options),this.api=t,this.queue=new o(c.rateLimiter,t,n,this.options),this.notifier=new a(this.queue,this.options),this.telemeter=new s(this.options),this.lastError=null,this.lastErrorHash="none"}c.rateLimiter=new i({maxItems:0,itemsPerMinute:60}),c.prototype.global=function(e){return c.rateLimiter.configureGlobal(e),this},c.prototype.configure=function(e,t){var n=this.options,i={};return t&&(i={payload:t}),this.options=r.merge(n,e,i),this.notifier&&this.notifier.configure(this.options),this.telemeter&&this.telemeter.configure(this.options),this.global(this.options),this},c.prototype.log=function(e){var t=this._defaultLogLevel();return this._log(t,e)},c.prototype.debug=function(e){this._log("debug",e)},c.prototype.info=function(e){this._log("info",e)},c.prototype.warn=function(e){this._log("warning",e)},c.prototype.warning=function(e){this._log("warning",e)},c.prototype.error=function(e){this._log("error",e)},c.prototype.critical=function(e){this._log("critical",e)},c.prototype.wait=function(e){this.queue.wait(e)},c.prototype.captureEvent=function(e,t,n){return this.telemeter.captureEvent(e,t,n)},c.prototype.captureDomContentLoaded=function(e){return this.telemeter.captureDomContentLoaded(e)},c.prototype.captureLoad=function(e){return this.telemeter.captureLoad(e)},c.prototype.buildJsonPayload=function(e){return this.api.buildJsonPayload(e)},c.prototype.sendJsonPayload=function(e){this.api.postJsonPayload(e)},c.prototype._log=function(e,t){var n;if(t.callback&&(n=t.callback,delete t.callback),this._sameAsLastError(t)){if(n){var i=new Error("ignored identical item");i.item=t,n(i)}}else try{t.level=t.level||e,this.telemeter._captureRollbarItem(t),t.telemetryEvents=this.telemeter.copyEvents(),this.notifier.log(t,n)}catch(e){this.logger.error(e)}},c.prototype._defaultLogLevel=function(){return this.options.logLevel||"debug"},c.prototype._sameAsLastError=function(e){if(!e._isUncaught)return!1;var t=function(e){var t=e.message||"",n=(e.err||{}).stack||String(e.err);return t+"::"+n}(e);return this.lastErrorHash===t||(this.lastError=e.err,this.lastErrorHash=t,!1)},e.exports=c},function(e,t,n){var i=n(7);function o(e){this.startTime=i.now(),this.counter=0,this.perMinCounter=0,this.platform=null,this.platformOptions={},this.configureGlobal(e)}function a(e,t,n){return!e.ignoreRateLimit&&t>=1&&n>t}function s(e,t,n,i,o,a,s){var r=null;return n&&(n=new Error(n)),n||i||(r=function(e,t,n,i,o){var a,s=t.environment||t.payload&&t.payload.environment;a=o?"item per minute limit reached, ignoring errors until timeout":"maxItems has been hit, ignoring errors until reset.";var r={body:{message:{body:a,extra:{maxItems:n,itemsPerMinute:i}}},language:"javascript",environment:s,notifier:{version:t.notifier&&t.notifier.version||t.version}};"browser"===e?(r.platform="browser",r.framework="browser-js",r.notifier.name="rollbar-browser-js"):"server"===e?(r.framework=t.framework||"node-js",r.notifier.name=t.notifier.name):"react-native"===e&&(r.framework=t.framework||"react-native",r.notifier.name=t.notifier.name);return r}(e,t,o,a,s)),{error:n,shouldSend:i,payload:r}}o.globalSettings={startTime:i.now(),maxItems:void 0,itemsPerMinute:void 0},o.prototype.configureGlobal=function(e){void 0!==e.startTime&&(o.globalSettings.startTime=e.startTime),void 0!==e.maxItems&&(o.globalSettings.maxItems=e.maxItems),void 0!==e.itemsPerMinute&&(o.globalSettings.itemsPerMinute=e.itemsPerMinute)},o.prototype.shouldSend=function(e,t){var n=(t=t||i.now())-this.startTime;(n<0||n>=6e4)&&(this.startTime=t,this.perMinCounter=0);var r=o.globalSettings.maxItems,c=o.globalSettings.itemsPerMinute;if(a(e,r,this.counter))return s(this.platform,this.platformOptions,r+" max items reached",!1);if(a(e,c,this.perMinCounter))return s(this.platform,this.platformOptions,c+" items per minute reached",!1);this.counter++,this.perMinCounter++;var l=!a(e,r,this.counter),p=l;return l=l&&!a(e,c,this.perMinCounter),s(this.platform,this.platformOptions,null,l,r,c,p)},o.prototype.setPlatformOptions=function(e,t){this.platform=e,this.platformOptions=t},e.exports=o},function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=function(e){if(!e||"[object Object]"!==o.call(e))return!1;var t,n=i.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!a)return!1;for(t in e);return void 0===t||i.call(e,t)};e.exports=function e(){var t,n,i,o,s,r={},c=null,l=arguments.length;for(t=0;t<l;t++)if(null!=(c=arguments[t]))for(s in c)n=r[s],r!==(i=c[s])&&(i&&a(i)?(o=n&&a(n)?n:{},r[s]=e(o,i)):void 0!==i&&(r[s]=i));return r}},function(e,t){e.exports=function(e){var t,n,i,o,a=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function s(e){return e<10?"0"+e:e}function r(){return this.valueOf()}function c(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+s(this.getUTCMonth()+1)+"-"+s(this.getUTCDate())+"T"+s(this.getUTCHours())+":"+s(this.getUTCMinutes())+":"+s(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=r,Number.prototype.toJSON=r,String.prototype.toJSON=r),"function"!=typeof e.stringify&&(i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e.stringify=function(e,i,a){var s;if(t="",n="","number"==typeof a)for(s=0;s<a;s+=1)n+=" ";else"string"==typeof a&&(n=a);if(o=i,i&&"function"!=typeof i&&("object"!=typeof i||"number"!=typeof i.length))throw new Error("JSON.stringify");return function e(i,a){var s,r,l,p,u,d=t,m=a[i];switch(m&&"object"==typeof m&&"function"==typeof m.toJSON&&(m=m.toJSON(i)),"function"==typeof o&&(m=o.call(a,i,m)),typeof m){case"string":return c(m);case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":return String(m);case"object":if(!m)return"null";if(t+=n,u=[],"[object Array]"===Object.prototype.toString.apply(m)){for(p=m.length,s=0;s<p;s+=1)u[s]=e(s,m)||"null";return l=0===u.length?"[]":t?"[\n"+t+u.join(",\n"+t)+"\n"+d+"]":"["+u.join(",")+"]",t=d,l}if(o&&"object"==typeof o)for(p=o.length,s=0;s<p;s+=1)"string"==typeof o[s]&&(l=e(r=o[s],m))&&u.push(c(r)+(t?": ":":")+l);else for(r in m)Object.prototype.hasOwnProperty.call(m,r)&&(l=e(r,m))&&u.push(c(r)+(t?": ":":")+l);return l=0===u.length?"{}":t?"{\n"+t+u.join(",\n"+t)+"\n"+d+"}":"{"+u.join(",")+"}",t=d,l}}("",{"":e})}),"function"!=typeof e.parse&&(e.parse=(h={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},f={go:function(){l="ok"},firstokey:function(){d=m,l="colon"},okey:function(){d=m,l="colon"},ovalue:function(){l="ocomma"},firstavalue:function(){l="acomma"},avalue:function(){l="acomma"}},g={go:function(){l="ok"},ovalue:function(){l="ocomma"},firstavalue:function(){l="acomma"},avalue:function(){l="acomma"}},v={"{":{go:function(){p.push({state:"ok"}),u={},l="firstokey"},ovalue:function(){p.push({container:u,state:"ocomma",key:d}),u={},l="firstokey"},firstavalue:function(){p.push({container:u,state:"acomma"}),u={},l="firstokey"},avalue:function(){p.push({container:u,state:"acomma"}),u={},l="firstokey"}},"}":{firstokey:function(){var e=p.pop();m=u,u=e.container,d=e.key,l=e.state},ocomma:function(){var e=p.pop();u[d]=m,m=u,u=e.container,d=e.key,l=e.state}},"[":{go:function(){p.push({state:"ok"}),u=[],l="firstavalue"},ovalue:function(){p.push({container:u,state:"ocomma",key:d}),u=[],l="firstavalue"},firstavalue:function(){p.push({container:u,state:"acomma"}),u=[],l="firstavalue"},avalue:function(){p.push({container:u,state:"acomma"}),u=[],l="firstavalue"}},"]":{firstavalue:function(){var e=p.pop();m=u,u=e.container,d=e.key,l=e.state},acomma:function(){var e=p.pop();u.push(m),m=u,u=e.container,d=e.key,l=e.state}},":":{colon:function(){if(Object.hasOwnProperty.call(u,d))throw new SyntaxError("Duplicate key '"+d+'"');l="ovalue"}},",":{ocomma:function(){u[d]=m,l="okey"},acomma:function(){u.push(m),l="avalue"}},true:{go:function(){m=!0,l="ok"},ovalue:function(){m=!0,l="ocomma"},firstavalue:function(){m=!0,l="acomma"},avalue:function(){m=!0,l="acomma"}},false:{go:function(){m=!1,l="ok"},ovalue:function(){m=!1,l="ocomma"},firstavalue:function(){m=!1,l="acomma"},avalue:function(){m=!1,l="acomma"}},null:{go:function(){m=null,l="ok"},ovalue:function(){m=null,l="ocomma"},firstavalue:function(){m=null,l="acomma"},avalue:function(){m=null,l="acomma"}}},function(e,t){var n,i,o=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;l="go",p=[];try{for(;n=o.exec(e);)n[1]?v[n[1]][l]():n[2]?(m=+n[2],g[l]()):(i=n[3],m=i.replace(/\\(?:u(.{4})|([^u]))/g,function(e,t,n){return t?String.fromCharCode(parseInt(t,16)):h[n]}),f[l]()),e=e.slice(n[0].length)}catch(e){l=e}if("ok"!==l||/[^\u0020\t\n\r]/.test(e))throw l instanceof SyntaxError?l:new SyntaxError("JSON");return"function"==typeof t?function e(n,i){var o,a,s=n[i];if(s&&"object"==typeof s)for(o in m)Object.prototype.hasOwnProperty.call(s,o)&&(void 0!==(a=e(s,o))?s[o]=a:delete s[o]);return t.call(n,i,s)}({"":m},""):m}));var l,p,u,d,m,h,f,g,v}},function(e,t,n){var i=n(7);function o(e,t,n,i){this.rateLimiter=e,this.api=t,this.logger=n,this.options=i,this.predicates=[],this.pendingItems=[],this.pendingRequests=[],this.retryQueue=[],this.retryHandle=null,this.waitCallback=null,this.waitIntervalID=null}o.prototype.configure=function(e){this.api&&this.api.configure(e);var t=this.options;return this.options=i.merge(t,e),this},o.prototype.addPredicate=function(e){return i.isFunction(e)&&this.predicates.push(e),this},o.prototype.addPendingItem=function(e){this.pendingItems.push(e)},o.prototype.removePendingItem=function(e){var t=this.pendingItems.indexOf(e);-1!==t&&this.pendingItems.splice(t,1)},o.prototype.addItem=function(e,t,n,o){t&&i.isFunction(t)||(t=function(){});var a=this._applyPredicates(e);if(a.stop)return this.removePendingItem(o),void t(a.err);this._maybeLog(e,n),this.removePendingItem(o),this.pendingRequests.push(e);try{this._makeApiRequest(e,function(n,i){this._dequeuePendingRequest(e),t(n,i)}.bind(this))}catch(n){this._dequeuePendingRequest(e),t(n)}},o.prototype.wait=function(e){i.isFunction(e)&&(this.waitCallback=e,this._maybeCallWait()||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitIntervalID=setInterval(function(){this._maybeCallWait()}.bind(this),500)))},o.prototype._applyPredicates=function(e){for(var t=null,n=0,i=this.predicates.length;n<i;n++)if(!(t=this.predicates[n](e,this.options))||void 0!==t.err)return{stop:!0,err:t.err};return{stop:!1,err:null}},o.prototype._makeApiRequest=function(e,t){var n=this.rateLimiter.shouldSend(e);n.shouldSend?this.api.postItem(e,function(n,i){n?this._maybeRetry(n,e,t):t(n,i)}.bind(this)):n.error?t(n.error):this.api.postItem(n.payload,t)};var a=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN"];o.prototype._maybeRetry=function(e,t,n){var i=!1;if(this.options.retryInterval)for(var o=0,s=a.length;o<s;o++)if(e.code===a[o]){i=!0;break}i?this._retryApiRequest(t,n):n(e)},o.prototype._retryApiRequest=function(e,t){this.retryQueue.push({item:e,callback:t}),this.retryHandle||(this.retryHandle=setInterval(function(){for(;this.retryQueue.length;){var e=this.retryQueue.shift();this._makeApiRequest(e.item,e.callback)}}.bind(this),this.options.retryInterval))},o.prototype._dequeuePendingRequest=function(e){var t=this.pendingRequests.indexOf(e);-1!==t&&(this.pendingRequests.splice(t,1),this._maybeCallWait())},o.prototype._maybeLog=function(e,t){if(this.logger&&this.options.verbose){var n=t;if(n=(n=n||i.get(e,"body.trace.exception.message"))||i.get(e,"body.trace_chain.0.exception.message"))return void this.logger.error(n);(n=i.get(e,"body.message.body"))&&this.logger.log(n)}},o.prototype._maybeCallWait=function(){return!(!i.isFunction(this.waitCallback)||0!==this.pendingItems.length||0!==this.pendingRequests.length)&&(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitCallback(),!0)},e.exports=o},function(e,t,n){var i=n(7);function o(e,t){this.queue=e,this.options=t,this.transforms=[]}o.prototype.configure=function(e){this.queue&&this.queue.configure(e);var t=this.options;return this.options=i.merge(t,e),this},o.prototype.addTransform=function(e){return i.isFunction(e)&&this.transforms.push(e),this},o.prototype.log=function(e,t){if(t&&i.isFunction(t)||(t=function(){}),!this.options.enabled)return t(new Error("Rollbar is not enabled"));this.queue.addPendingItem(e);var n=e.err;this._applyTransforms(e,function(i,o){if(i)return this.queue.removePendingItem(e),t(i,null);this.queue.addItem(o,t,n,e)}.bind(this))},o.prototype._applyTransforms=function(e,t){var n=-1,i=this.transforms.length,o=this.transforms,a=this.options,s=function(e,r){e?t(e,null):++n!==i?o[n](r,a,s):t(null,r)};s(null,e)},e.exports=o},function(e,t,n){var i=n(7),o=100;function a(e){this.queue=[],this.options=i.merge(e);var t=this.options.maxTelemetryEvents||o;this.maxQueueSize=Math.max(0,Math.min(t,o))}function s(e,t){if(t)return t;return{error:"error",manual:"info"}[e]||"info"}a.prototype.configure=function(e){var t=this.options;this.options=i.merge(t,e);var n=this.options.maxTelemetryEvents||o,a=Math.max(0,Math.min(n,o)),s=0;this.maxQueueSize>a&&(s=this.maxQueueSize-a),this.maxQueueSize=a,this.queue.splice(0,s)},a.prototype.copyEvents=function(){var e=Array.prototype.slice.call(this.queue,0);if(i.isFunction(this.options.filterTelemetry))try{for(var t=e.length;t--;)this.options.filterTelemetry(e[t])&&e.splice(t,1)}catch(e){this.options.filterTelemetry=null}return e},a.prototype.capture=function(e,t,n,o,a){var r={level:s(e,n),type:e,timestamp_ms:a||i.now(),body:t,source:"client"};o&&(r.uuid=o);try{if(i.isFunction(this.options.filterTelemetry)&&this.options.filterTelemetry(r))return!1}catch(e){this.options.filterTelemetry=null}return this.push(r),r},a.prototype.captureEvent=function(e,t,n,i){return this.capture(e,t,n,i)},a.prototype.captureError=function(e,t,n,i){var o={message:e.message||String(e)};return e.stack&&(o.stack=e.stack),this.capture("error",o,t,n,i)},a.prototype.captureLog=function(e,t,n,i){return this.capture("log",{message:e},t,n,i)},a.prototype.captureNetwork=function(e,t,n,i){t=t||"xhr",e.subtype=e.subtype||t,i&&(e.request=i);var o=this.levelFromStatus(e.status_code);return this.capture("network",e,o,n)},a.prototype.levelFromStatus=function(e){return e>=200&&e<400?"info":0===e||e>=400?"error":"info"},a.prototype.captureDom=function(e,t,n,i,o){var a={subtype:e,element:t};return void 0!==n&&(a.value=n),void 0!==i&&(a.checked=i),this.capture("dom",a,"info",o)},a.prototype.captureNavigation=function(e,t,n){return this.capture("navigation",{from:e,to:t},"info",n)},a.prototype.captureDomContentLoaded=function(e){return this.capture("navigation",{subtype:"DOMContentLoaded"},"info",void 0,e&&e.getTime())},a.prototype.captureLoad=function(e){return this.capture("navigation",{subtype:"load"},"info",void 0,e&&e.getTime())},a.prototype.captureConnectivityChange=function(e,t){return this.captureNetwork({change:e},"connectivity",t)},a.prototype._captureRollbarItem=function(e){if(this.options.includeItemsInTelemetry)return e.err?this.captureError(e.err,e.level,e.uuid,e.timestamp):e.message?this.captureLog(e.message,e.level,e.uuid,e.timestamp):e.custom?this.capture("log",e.custom,e.level,e.uuid,e.timestamp):void 0},a.prototype.push=function(e){this.queue.push(e),this.queue.length>this.maxQueueSize&&this.queue.shift()},e.exports=a},function(e,t,n){var i=n(7),o=n(121),a=n(62),s={hostname:"api.rollbar.com",path:"/api/1/item/",search:null,version:"1",protocol:"https:",port:443};function r(e,t,n,i){this.options=e,this.transport=t,this.url=n,this.jsonBackup=i,this.accessToken=e.accessToken,this.transportOptions=c(e,n)}function c(e,t){return o.getTransportFromOptions(e,s,t)}r.prototype.postItem=function(e,t){var n=o.transportOptions(this.transportOptions,"POST"),i=o.buildPayload(this.accessToken,e,this.jsonBackup);this.transport.post(this.accessToken,n,i,t)},r.prototype.buildJsonPayload=function(e,t){var n=o.buildPayload(this.accessToken,e,this.jsonBackup),i=a.truncate(n);return i.error?(t&&t(i.error),null):i.value},r.prototype.postJsonPayload=function(e,t){var n=o.transportOptions(this.transportOptions,"POST");this.transport.postJsonPayload(this.accessToken,n,e,t)},r.prototype.configure=function(e){var t=this.oldOptions;return this.options=i.merge(t,e),this.transportOptions=c(this.options,this.url),void 0!==this.options.accessToken&&(this.accessToken=this.options.accessToken),this},e.exports=r},function(e,t,n){var i=n(7);e.exports={buildPayload:function(e,t,n){if(!i.isType(t.context,"string")){var o=i.stringify(t.context,n);o.error?t.context="Error: could not serialize 'context'":t.context=o.value||"",t.context.length>255&&(t.context=t.context.substr(0,255))}return{access_token:e,data:t}},getTransportFromOptions:function(e,t,n){var i=t.hostname,o=t.protocol,a=t.port,s=t.path,r=t.search,c=e.proxy;if(e.endpoint){var l=n.parse(e.endpoint);i=l.hostname,o=l.protocol,a=l.port,s=l.pathname,r=l.search}return{hostname:i,protocol:o,port:a,path:s,search:r,proxy:c}},transportOptions:function(e,t){var n=e.protocol||"https:",i=e.port||("http:"===n?80:"https:"===n?443:void 0),o=e.hostname,a=e.path;return e.search&&(a+=e.search),e.proxy&&(a=n+"//"+o+a,o=e.proxy.host||e.proxy.hostname,i=e.proxy.port,n=e.proxy.protocol||n),{protocol:n,hostname:o,path:a,port:i,method:t}},appendPathToPath:function(e,t){var n=/\/$/.test(e),i=/^\//.test(t);return n&&i?t=t.substring(1):n||i||(t="/"+t),e+t}}},function(e,t,n){var i=n(7),o=n(62),a=n(38),s=n(9),r=n(4),c=n(63);function l(){this.rateLimitExpires=0}function p(e,t,n){var i=t&&t.headers||{};if(i["Content-Type"]="application/json",n)try{i["Content-Length"]=Buffer.byteLength(n,"utf8")}catch(e){a.error("Could not get the content length of the data")}return i["X-Rollbar-Access-Token"]=e,i}function u(e){return{"http:":s,"https:":r}[e.protocol]}function d(){return Math.floor(Date.now()/1e3)}l.prototype.get=function(e,t,n,o,s){var r;if(o&&i.isFunction(o)||(o=function(){}),t=t||{},i.addParamsAndAccessTokenToPath(e,t,n),t.headers=p(e,t),!(r=s?s(t):u(t)))return a.error("Unknown transport based on given protocol: "+t.protocol),o(new Error("Unknown transport"));var c=r.request(t,function(e){this.handleResponse(e,o)}.bind(this));c.on("error",function(e){o(e)}),c.end()},l.prototype.post=function(e,t,n,s,r){var l;if(s&&i.isFunction(s)||(s=function(){}),d()<this.rateLimitExpires)return s(new Error("Exceeded rate limit"));if(t=t||{},!n)return s(new Error("Cannot send empty request"));var m=o.truncate(n,c);if(m.error)return a.error("Problem stringifying payload. Giving up"),s(m.error);var h=m.value;if(t.headers=p(e,t,h),!(l=r?r(t):u(t)))return a.error("Unknown transport based on given protocol: "+t.protocol),s(new Error("Unknown transport"));var f=l.request(t,function(e){this.handleResponse(e,function(e){return function(t,n){if(t)return e(t);n.result&&n.result.uuid?a.log(["Successful api response."," Link: https://rollbar.com/occurrence/uuid/?uuid="+n.result.uuid].join("")):a.log("Successful api response"),e(null,n.result)}}(s))}.bind(this));f.on("error",function(e){s(e)}),h&&f.write(h),f.end()},l.prototype.updateRateLimit=function(e){var t=parseInt(e.headers["x-rate-limit-remaining"]||0),n=Math.min(60,e.headers["x-rate-limit-remaining-seconds"]||0),i=d();429===e.statusCode&&0===t?this.rateLimitExpires=i+n:this.rateLimitExpires=i},l.prototype.handleResponse=function(e,t){this.updateRateLimit(e);var n=[];e.setEncoding("utf8"),e.on("data",function(e){n.push(e)}),e.on("end",function(){!function(e,t){var n=i.jsonParse(e);if(n.error)return a.error("Could not parse api response, err: "+n.error),t(n.error);if((e=n.value).err)return a.error("Received error: "+e.message),t(new Error("Api error: "+(e.message||"Unknown error")));t(null,e)}(n=n.join(""),t)})},e.exports=l},function(e,t,n){var i=n(64),o=n(124),a=n(126),s=n(25),r=n(7);function c(e,t,n){e.data=e.data||{},e.data.body=e.data.body||{};var i=e.message||"";e.data.body.message={body:i},n(null,e)}function l(e,t,n){e.stackInfo&&(e.data=e.data||{},e.data.body=e.data.body||{},e.data.body.trace_chain=e.stackInfo),n(null,e)}function p(e){var t=e.ip;return t||(t=a.getClientIp(e)),t}e.exports={baseData:function(e,t,n){var i=t.payload&&t.payload.environment||t.environment,o={timestamp:Math.round(e.timestamp/1e3),environment:e.environment||i,level:e.level||"error",language:"javascript",framework:e.framework||t.framework,uuid:e.uuid,notifier:JSON.parse(JSON.stringify(t.notifier))};t.codeVersion?o.code_version=t.codeVersion:t.code_version&&(o.code_version=t.code_version),Object.getOwnPropertyNames(e.custom||{}).forEach(function(t){o.hasOwnProperty(t)||(o[t]=e.custom[t])}),o.server={host:t.host,argv:process.argv.concat(),pid:process.pid},t.branch&&(o.server.branch=t.branch),t.root&&(o.server.root=t.root),e.data=o,n(null,e)},handleItemWithError:function(e,t,n){if(!e.err)return n(null,e);var a=e.err,s=[],r=[];do{s.push(a),a=a.nested}while(void 0!==a);e.stackInfo=r,i.eachSeries(s,function(e){return function(t,n){o.parseException(t,function(t,i){return t?n(t):(e.push({frames:i.frames,exception:{class:i.class,message:i.message}}),n(null))})}}(r),function(t){t&&(e.message=e.err.message||e.err.description||e.message||String(e.err),delete e.err,delete e.stackInfo),n(null,e)})},addBody:function(e,t,n){e.stackInfo?l(e,0,n):c(e,0,n)},addMessageData:c,addErrorData:l,addRequestData:function(e,t,n){e.data=e.data||{};var i=e.request;if(i){if(t.addRequestData&&r.isFunction(t.addRequestData))return t.addRequestData(e.data,i),void n(null,e);var o=function(e){var t,n=e.headers||{},i=n.host||"<no host>",o=e.protocol||(e.socket&&e.socket.encrypted?"https":"http");(t=r.isType(e.url,"string")?s.parse(e.url,!0):e.url||{}).protocol=t.protocol||o,t.host=t.host||i;var a={url:s.format(t),user_ip:p(e),headers:n,method:e.method};t.search&&t.search.length>0&&(a.GET=t.query);var c=e.body||e.payload;if(c){var l={};if(r.isIterable(c)){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(l[u]=c[u]);a[e.method]=l}else a.body=c}return a}(i);if(r.filterIp(o,t.captureIp),e.data.request=o,i.route)e.data.context=i.route.path;else try{e.data.context=i.app._router.matchRequest(i).path}catch(e){}var a=t.captureEmail,c=t.captureUsername;if(i.rollbar_person){var l=i.rollbar_person;!a&&l.email&&(l.email=null),!c&&l.username&&(l.username=null),e.data.person=l}else if(i.user)e.data.person={id:i.user.id},i.user.username&&c&&(e.data.person.username=i.user.username),i.user.email&&a&&(e.data.person.email=i.user.email);else if(i.user_id||i.userId){var u=i.user_id||i.userId;r.isFunction(u)&&(u=u()),e.data.person={id:u}}n(null,e)}else n(null,e)},addLambdaData:function(e,t,n){var i=e.lambdaContext;if(i){var o={remainingTimeInMillis:i.getRemainingTimeInMillis(),callbackWaitsForEmptyEventLoop:i.callbackWaitsForEmptyEventLoop,functionName:i.functionName,functionVersion:i.functionVersion,arn:i.invokedFunctionArn,requestId:i.awsRequestId};e.data=e.data||{},e.data.custom=e.data.custom||{},e.data.custom.lambda=o,n(null,e)}else n(null,e)},scrubPayload:function(e,t,n){var i=t.scrubHeaders||[],o=t.scrubFields||[];o=i.concat(o),e.data=r.scrub(e.data,o),n(null,e)}}},function(e,t,n){"use strict";var i=n(38),o=n(64),a=n(8),s=n(125),r=n(16),c=3,l=/^\s*at (?:([^(]+(?: \[\w\s+\])?) )?\(?(.+?)(?::(\d+):(\d+)(?:, <js>:(\d+):(\d+))?)?\)?$/,p=/^\s*at .+ \(.+ (at[^)]+\))\)$/,u=/^\s*(>?) [0-9]+\|(\s*.+)$/m,d=s({max:100}),m={};function h(e,t){var n,i,o,a;if((n=(i=e).match(p))&&(i=n[1]),!(n=i.match(l)))return t(null,null);a={method:(o=n.slice(1))[0]||"<unknown>",filename:o[1],lineno:Math.floor(o[2]),colno:Math.floor(o[3])},o[4]&&(a.compiled_lineno=Math.floor(o[4])),o[5]&&(a.compiled_colno=Math.floor(o[5])),t(null,a)}function f(e,t){var n,i,o;n="/"===e[0]||"."===e[0],i=!!d.get(e),o=!!m[e],t(n&&!i&&!o)}function g(e,t){void 0!==a.exists?a.exists(e,t):a.stat(e,function(e){t(!e)})}function v(e,t){var n=[];e.forEach(function(e){-1===n.indexOf(e.filename)&&n.push(e.filename)}),o.filter(n,f,function(n){var s;function r(e,t){!function(e,t){try{a.readFile(e,function(e,n){var i;return e?t(e):(i=n.toString("utf8").split("\n"),t(null,i))})}catch(e){i.log(e)}}(e,function(n,i){return n?t(n):(s[e]=i,d.set(e,i),t(null))})}function l(e,t){var n=s[e.filename]||d.get(e.filename);n&&function(e,t){e.code=t[e.lineno-1],e.context={pre:t.slice(Math.max(0,e.lineno-(c+1)),e.lineno-1),post:t.slice(e.lineno,e.lineno+c)}}(e,n),t(null)}s={},o.filter(n,g,function(n){o.each(n,r,function(n){if(n)return t(n);o.eachSeries(e,l,function(n){if(n)return t(n);t(null,e)})})})})}t.cache=d,t.pendingReads=m,t.parseException=function(e,n){var o=function(e){var t,n;if(null==e)return null;if("object"!=typeof e)return null;if(r.isArray(e))return e;for(n in t=[],e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(e[n]);return t}(e.errors);return t.parseStack(e.stack,function(t,a){var s,r,l,p,d;return t?(i.error("could not parse exception, err: "+t),n(t)):(s=String(e.message||"<no message>"),l={class:r=String(e.name||"<unknown>"),message:s,frames:a},o&&o.length&&(p=o[0],l={class:r,message:String(p.message||"<no message>"),frames:a}),s.match(u)&&(d=function(e){var t,n,i,o,a,s,r,l,p,d,m;for(n=(t=e.split("\n"))[0].indexOf(":"),i=t[0].slice(0,n),o=parseInt(t[0].slice(n+1),10),s=t[(a=t.length)-1],t=t.slice(1,a-1),p=[],d=[],r=0;r<a-2;++r)(m=t[r].match(u))&&(">"===m[1]?l=m[2]:l?m[2]&&d.push(m[2]):m[2]&&p.push(m[2]));return{frame:{method:"<jade>",filename:i,lineno:o,code:l,context:{pre:p=p.slice(0,Math.min(p.length,c)),post:d=d.slice(0,Math.min(d.length,c))}},message:s}}(s),l.message=d.message,l.frames.push(d.frame)),n(null,l))})},t.parseStack=function(e,t){for(var n,i=e;"object"==typeof i;)i=i&&i.stack;n=(i||"").split("\n").slice(1),o.map(n,h,function(e,n){if(e)return t(e);n.reverse(),o.filter(n,function(e,t){t(!!e)},function(e){v(e,t)})})}},function(e,t,n){!function(){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function n(){return 1}function i(e){if(!(this instanceof i))return new i(e);var a;"number"==typeof e&&(e={max:a=e}),e||(e={}),a=e.max;var s=e.length||n;"function"!=typeof s&&(s=n),(!a||"number"!=typeof a||a<=0)&&(a=1/0);var r=e.stale||!1,c=e.maxAge||null,l=e.dispose,p=Object.create(null),u=Object.create(null),d=0,m=0,h=0,f=0;function g(){for(;m<d&&h>a;)x(u[m])}function v(e){for(delete u[e.lu];m<d&&!u[m];)m++}function x(e){e&&(l&&l(e.key,e.value),h-=e.length,f--,delete p[e.key],v(e))}Object.defineProperty(this,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),h>(a=e)&&g()},get:function(){return a},enumerable:!0}),Object.defineProperty(this,"lengthCalculator",{set:function(e){if("function"!=typeof e)for(var t in s=n,h=f,p)p[t].length=1;else for(var t in s=e,h=0,p)p[t].length=s(p[t].value),h+=p[t].length;h>a&&g()},get:function(){return s},enumerable:!0}),Object.defineProperty(this,"length",{get:function(){return h},enumerable:!0}),Object.defineProperty(this,"itemCount",{get:function(){return f},enumerable:!0}),this.forEach=function(e,t){t=t||this;for(var n=0,i=d-1;i>=0&&n<f;i--)if(u[i]){n++;var o=u[i];e.call(t,o.value,o.key,this)}},this.keys=function(){for(var e=new Array(f),t=0,n=d-1;n>=0&&t<f;n--)if(u[n]){var i=u[n];e[t++]=i.key}return e},this.values=function(){for(var e=new Array(f),t=0,n=d-1;n>=0&&t<f;n--)if(u[n]){var i=u[n];e[t++]=i.value}return e},this.reset=function(){if(l)for(var e in p)l(e,p[e].value);p={},u={},m=0,d=0,h=0,f=0},this.dump=function(){return p},this.dumpLru=function(){return u},this.set=function(e,n){if(t(p,e))return l&&l(e,p[e].value),c&&(p[e].now=Date.now()),p[e].value=n,this.get(e),!0;var i=s(n),r=c?Date.now():0,m=new o(e,n,d++,i,r);return m.length>a?(l&&l(e,n),!1):(h+=m.length,u[m.lu]=p[e]=m,f++,h>a&&g(),!0)},this.has=function(e){if(!t(p,e))return!1;var n=p[e];return!(c&&Date.now()-n.now>c)},this.get=function(e){if(t(p,e)){var n=p[e];return c&&Date.now()-n.now>c?(this.del(e),r?n.value:void 0):(v(n),n.lu=d++,u[n.lu]=n,n.value)}},this.del=function(e){x(p[e])}}function o(e,t,n,i,o){this.key=e,this.value=t,this.lu=n,this.length=i,this.now=o}e.exports?e.exports=i:this.LRUCache=i}()},function(e,t,n){const i=n(127);function o(e){if(!i.existy(e))return null;if(i.not.string(e))throw new TypeError(`Expected a string, got "${typeof e}"`);return e.split(",").map(e=>{const t=e.trim();if(t.includes(":")){const e=t.split(":");if(2===e.length)return e[0]}return t}).find(i.ip)}function a(e){if(e.headers){if(i.ip(e.headers["x-client-ip"]))return e.headers["x-client-ip"];const t=o(e.headers["x-forwarded-for"]);if(i.ip(t))return t;if(i.ip(e.headers["cf-connecting-ip"]))return e.headers["cf-connecting-ip"];if(i.ip(e.headers["true-client-ip"]))return e.headers["true-client-ip"];if(i.ip(e.headers["x-real-ip"]))return e.headers["x-real-ip"];if(i.ip(e.headers["x-cluster-client-ip"]))return e.headers["x-cluster-client-ip"];if(i.ip(e.headers["x-forwarded"]))return e.headers["x-forwarded"];if(i.ip(e.headers["forwarded-for"]))return e.headers["forwarded-for"];if(i.ip(e.headers.forwarded))return e.headers.forwarded}if(i.existy(e.connection)){if(i.ip(e.connection.remoteAddress))return e.connection.remoteAddress;if(i.existy(e.connection.socket)&&i.ip(e.connection.socket.remoteAddress))return e.connection.socket.remoteAddress}return i.existy(e.socket)&&i.ip(e.socket.remoteAddress)?e.socket.remoteAddress:i.existy(e.info)&&i.ip(e.info.remoteAddress)?e.info.remoteAddress:null}e.exports={getClientIpFromXForwardedFor:o,getClientIp:a,mw:function(e){const t=i.not.existy(e)?{}:e;if(i.not.object(t))throw new TypeError("Options must be an object!");const n=t.attributeName||"clientIp";return(e,t,i)=>{e[n]=a(e),i()}}}},function(e,t,n){var i,o;
/*!
 * is.js 0.8.0
 * Author: Aras Atasaygin
 */o=this,void 0===(i=function(){return o.is=function(){var e={VERSION:"0.8.0",not:{},all:{},any:{}},t=Object.prototype.toString,n=Array.prototype.slice,i=Object.prototype.hasOwnProperty;function o(e){return function(){return!e.apply(null,n.call(arguments))}}function a(e){return function(){for(var t=l(arguments),n=t.length,i=0;i<n;i++)if(!e.call(null,t[i]))return!1;return!0}}function s(e){return function(){for(var t=l(arguments),n=t.length,i=0;i<n;i++)if(e.call(null,t[i]))return!0;return!1}}var r={"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t}};function c(e,t){var n=t+"",i=+(n.match(/\d+/)||NaN),o=n.match(/^[<>]=?|/)[0];return r[o]?r[o](e,i):e==i||i!=i}function l(t){var i=n.call(t),o=i.length;return 1===o&&e.array(i[0])&&(i=i[0]),i}e.arguments=function(e){return"[object Arguments]"===t.call(e)||null!=e&&"object"==typeof e&&"callee"in e},e.array=Array.isArray||function(e){return"[object Array]"===t.call(e)},e.boolean=function(e){return!0===e||!1===e||"[object Boolean]"===t.call(e)},e.char=function(t){return e.string(t)&&1===t.length},e.date=function(e){return"[object Date]"===t.call(e)},e.domNode=function(t){return e.object(t)&&t.nodeType>0},e.error=function(e){return"[object Error]"===t.call(e)},e.function=function(e){return"[object Function]"===t.call(e)||"function"==typeof e},e.json=function(e){return"[object Object]"===t.call(e)},e.nan=function(e){return e!=e},e.null=function(e){return null===e},e.number=function(n){return e.not.nan(n)&&"[object Number]"===t.call(n)},e.object=function(e){return Object(e)===e},e.regexp=function(e){return"[object RegExp]"===t.call(e)},e.sameType=function(n,i){var o=t.call(n);return o===t.call(i)&&("[object Number]"!==o||!e.any.nan(n,i)||e.all.nan(n,i))},e.sameType.api=["not"],e.string=function(e){return"[object String]"===t.call(e)},e.undefined=function(e){return void 0===e},e.windowObject=function(e){return null!=e&&"object"==typeof e&&"setInterval"in e},e.empty=function(t){if(e.object(t)){var n=Object.getOwnPropertyNames(t).length;return!!(0===n||1===n&&e.array(t)||2===n&&e.arguments(t))}return""===t},e.existy=function(e){return null!=e},e.falsy=function(e){return!e},e.truthy=o(e.falsy),e.above=function(t,n){return e.all.number(t,n)&&t>n},e.above.api=["not"],e.decimal=function(t){return e.number(t)&&t%1!=0},e.equal=function(t,n){return e.all.number(t,n)?t===n&&1/t==1/n:e.all.string(t,n)||e.all.regexp(t,n)?""+t==""+n:!!e.all.boolean(t,n)&&t===n},e.equal.api=["not"],e.even=function(t){return e.number(t)&&t%2==0},e.finite=isFinite||function(t){return e.not.infinite(t)&&e.not.nan(t)},e.infinite=function(e){return e===1/0||e===-1/0},e.integer=function(t){return e.number(t)&&t%1==0},e.negative=function(t){return e.number(t)&&t<0},e.odd=function(t){return e.number(t)&&t%2==1},e.positive=function(t){return e.number(t)&&t>0},e.under=function(t,n){return e.all.number(t,n)&&t<n},e.under.api=["not"],e.within=function(t,n,i){return e.all.number(t,n,i)&&t>n&&t<i},e.within.api=["not"];var p={affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,alphaNumeric:/^[A-Za-z0-9]+$/,caPostalCode:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\s?[0-9][A-Z][0-9]$/,creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,dateString:/^(1[0-2]|0?[1-9])([\/-])(3[01]|[12][0-9]|0?[1-9])(?:\2)(?:[0-9]{2})?[0-9]{2}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,eppPhone:/^\+[0-9]{1,3}\.[0-9]{4,14}(?:x.+)?$/,hexadecimal:/^(?:0x)?[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,nanpPhone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,socialSecurityNumber:/^(?!000|666)[0-8][0-9]{2}-?(?!00)[0-9]{2}-?(?!0000)[0-9]{4}$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,ukPostCode:/^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,url:/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,usZipCode:/^[0-9]{5}(?:-[0-9]{4})?$/};function u(t,n){e[t]=function(e){return n[t].test(e)}}for(var d in p)p.hasOwnProperty(d)&&u(d,p);e.ip=function(t){return e.ipv4(t)||e.ipv6(t)},e.capitalized=function(t){if(e.not.string(t))return!1;for(var n=t.split(" "),i=0;i<n.length;i++){var o=n[i];if(o.length){var a=o.charAt(0);if(a!==a.toUpperCase())return!1}}return!0},e.endWith=function(t,n){if(e.not.string(t))return!1;n+="";var i=t.length-n.length;return i>=0&&t.indexOf(n,i)===i},e.endWith.api=["not"],e.include=function(e,t){return e.indexOf(t)>-1},e.include.api=["not"],e.lowerCase=function(t){return e.string(t)&&t===t.toLowerCase()},e.palindrome=function(t){if(e.not.string(t))return!1;for(var n=(t=t.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase()).length-1,i=0,o=Math.floor(n/2);i<=o;i++)if(t.charAt(i)!==t.charAt(n-i))return!1;return!0},e.space=function(t){if(e.not.char(t))return!1;var n=t.charCodeAt(0);return n>8&&n<14||32===n},e.startWith=function(t,n){return e.string(t)&&0===t.indexOf(n)},e.startWith.api=["not"],e.upperCase=function(t){return e.string(t)&&t===t.toUpperCase()};var m=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],h=["january","february","march","april","may","june","july","august","september","october","november","december"];e.day=function(t,n){return e.date(t)&&n.toLowerCase()===m[t.getDay()]},e.day.api=["not"],e.dayLightSavingTime=function(e){var t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1),i=Math.max(t.getTimezoneOffset(),n.getTimezoneOffset());return e.getTimezoneOffset()<i},e.future=function(t){var n=new Date;return e.date(t)&&t.getTime()>n.getTime()},e.inDateRange=function(t,n,i){if(e.not.date(t)||e.not.date(n)||e.not.date(i))return!1;var o=t.getTime();return o>n.getTime()&&o<i.getTime()},e.inDateRange.api=["not"],e.inLastMonth=function(t){return e.inDateRange(t,new Date((new Date).setMonth((new Date).getMonth()-1)),new Date)},e.inLastWeek=function(t){return e.inDateRange(t,new Date((new Date).setDate((new Date).getDate()-7)),new Date)},e.inLastYear=function(t){return e.inDateRange(t,new Date((new Date).setFullYear((new Date).getFullYear()-1)),new Date)},e.inNextMonth=function(t){return e.inDateRange(t,new Date,new Date((new Date).setMonth((new Date).getMonth()+1)))},e.inNextWeek=function(t){return e.inDateRange(t,new Date,new Date((new Date).setDate((new Date).getDate()+7)))},e.inNextYear=function(t){return e.inDateRange(t,new Date,new Date((new Date).setFullYear((new Date).getFullYear()+1)))},e.leapYear=function(t){return e.number(t)&&(t%4==0&&t%100!=0||t%400==0)},e.month=function(t,n){return e.date(t)&&n.toLowerCase()===h[t.getMonth()]},e.month.api=["not"],e.past=function(t){var n=new Date;return e.date(t)&&t.getTime()<n.getTime()},e.quarterOfYear=function(t,n){return e.date(t)&&e.number(n)&&n===Math.floor((t.getMonth()+3)/3)},e.quarterOfYear.api=["not"],e.today=function(t){var n=new Date,i=n.toDateString();return e.date(t)&&t.toDateString()===i},e.tomorrow=function(t){var n=new Date,i=new Date(n.setDate(n.getDate()+1)).toDateString();return e.date(t)&&t.toDateString()===i},e.weekend=function(t){return e.date(t)&&(6===t.getDay()||0===t.getDay())},e.weekday=o(e.weekend),e.year=function(t,n){return e.date(t)&&e.number(n)&&n===t.getFullYear()},e.year.api=["not"],e.yesterday=function(t){var n=new Date,i=new Date(n.setDate(n.getDate()-1)).toDateString();return e.date(t)&&t.toDateString()===i};var f=e.windowObject("object"==typeof global&&global)&&global,g=e.windowObject("object"==typeof self&&self)&&self,v=e.windowObject("object"==typeof this&&this)&&this,x=f||g||v||Function("return this")(),b=g&&g.document,y=x.is,w=g&&g.navigator,k=(w&&w.appVersion||"").toLowerCase(),E=(w&&w.userAgent||"").toLowerCase(),S=(w&&w.vendor||"").toLowerCase();return e.android=function(){return/android/.test(E)},e.android.api=["not"],e.androidPhone=function(){return/android/.test(E)&&/mobile/.test(E)},e.androidPhone.api=["not"],e.androidTablet=function(){return/android/.test(E)&&!/mobile/.test(E)},e.androidTablet.api=["not"],e.blackberry=function(){return/blackberry/.test(E)||/bb10/.test(E)},e.blackberry.api=["not"],e.chrome=function(e){var t=/google inc/.test(S)?E.match(/(?:chrome|crios)\/(\d+)/):null;return null!==t&&c(t[1],e)},e.chrome.api=["not"],e.desktop=function(){return e.not.mobile()&&e.not.tablet()},e.desktop.api=["not"],e.edge=function(e){var t=E.match(/edge\/(\d+)/);return null!==t&&c(t[1],e)},e.edge.api=["not"],e.firefox=function(e){var t=E.match(/(?:firefox|fxios)\/(\d+)/);return null!==t&&c(t[1],e)},e.firefox.api=["not"],e.ie=function(e){var t=E.match(/(?:msie |trident.+?; rv:)(\d+)/);return null!==t&&c(t[1],e)},e.ie.api=["not"],e.ios=function(){return e.iphone()||e.ipad()||e.ipod()},e.ios.api=["not"],e.ipad=function(e){var t=E.match(/ipad.+?os (\d+)/);return null!==t&&c(t[1],e)},e.ipad.api=["not"],e.iphone=function(e){var t=E.match(/iphone(?:.+?os (\d+))?/);return null!==t&&c(t[1]||1,e)},e.iphone.api=["not"],e.ipod=function(e){var t=E.match(/ipod.+?os (\d+)/);return null!==t&&c(t[1],e)},e.ipod.api=["not"],e.linux=function(){return/linux/.test(k)},e.linux.api=["not"],e.mac=function(){return/mac/.test(k)},e.mac.api=["not"],e.mobile=function(){return e.iphone()||e.ipod()||e.androidPhone()||e.blackberry()||e.windowsPhone()},e.mobile.api=["not"],e.offline=o(e.online),e.offline.api=["not"],e.online=function(){return!w||!0===w.onLine},e.online.api=["not"],e.opera=function(e){var t=E.match(/(?:^opera.+?version|opr)\/(\d+)/);return null!==t&&c(t[1],e)},e.opera.api=["not"],e.phantom=function(e){var t=E.match(/phantomjs\/(\d+)/);return null!==t&&c(t[1],e)},e.phantom.api=["not"],e.safari=function(e){var t=E.match(/version\/(\d+).+?safari/);return null!==t&&c(t[1],e)},e.safari.api=["not"],e.tablet=function(){return e.ipad()||e.androidTablet()||e.windowsTablet()},e.tablet.api=["not"],e.touchDevice=function(){return!!b&&("ontouchstart"in g||"DocumentTouch"in g&&b instanceof DocumentTouch)},e.touchDevice.api=["not"],e.windows=function(){return/win/.test(k)},e.windows.api=["not"],e.windowsPhone=function(){return e.windows()&&/phone/.test(E)},e.windowsPhone.api=["not"],e.windowsTablet=function(){return e.windows()&&e.not.windowsPhone()&&/touch/.test(E)},e.windowsTablet.api=["not"],e.propertyCount=function(t,n){if(e.not.object(t)||e.not.number(n))return!1;var o=0;for(var a in t)if(i.call(t,a)&&++o>n)return!1;return o===n},e.propertyCount.api=["not"],e.propertyDefined=function(t,n){return e.object(t)&&e.string(n)&&n in t},e.propertyDefined.api=["not"],e.inArray=function(t,n){if(e.not.array(n))return!1;for(var i=0;i<n.length;i++)if(n[i]===t)return!0;return!1},e.inArray.api=["not"],e.sorted=function(t,n){if(e.not.array(t))return!1;for(var i=r[n]||r[">="],o=1;o<t.length;o++)if(!i(t[o],t[o-1]))return!1;return!0},function(){var t=e;for(var n in t)if(i.call(t,n)&&e.function(t[n]))for(var r=t[n].api||["not","all","any"],c=0;c<r.length;c++)"not"===r[c]&&(e.not[n]=o(e[n])),"all"===r[c]&&(e.all[n]=a(e[n])),"any"===r[c]&&(e.any[n]=s(e[n]))}(),e.setNamespace=function(){return x.is=y,this},e.setRegexp=function(e,t){for(var n in p)i.call(p,n)&&t===n&&(p[n]=e)},e}()}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){var i=n(7);e.exports={itemToPayload:function(e,t,n){var o=t.payload||{};o.body&&delete o.body;var a=i.merge(e.data,o);e._isUncaught&&(a._isUncaught=!0),e._originalArgs&&(a._originalArgs=e._originalArgs),n(null,a)},addTelemetryData:function(e,t,n){e.telemetryEvents&&i.set(e,"data.body.telemetry",e.telemetryEvents),n(null,e)},addMessageWithError:function(e,t,n){if(e.message){var o="data.body.trace_chain.0",a=i.get(e,o);if(a||(o="data.body.trace",a=i.get(e,o)),a){if(!a.exception||!a.exception.description)return i.set(e,o+".exception.description",e.message),void n(null,e);var s=i.get(e,o+".extra")||{},r=i.merge(s,{message:e.message});i.set(e,o+".extra",r)}n(null,e)}else n(null,e)},userTransform:function(e){return function(t,n,o){var a=i.merge(t);try{i.isFunction(n.transform)&&n.transform(a.data,t)}catch(i){return n.transform=null,e.error("Error while calling custom transform() function. Removing custom transform().",i),void o(null,t)}o(null,a)}},addConfigToPayload:function(e,t,n){if(!t.sendConfig)return n(null,e);var o=i.get(e,"data.custom")||{};o._rollbarConfig=t,e.data.custom=o,n(null,e)}}},function(e,t,n){var i=n(7);function o(e,t,n,o){var a,s,r,c,l,p,u,d,m=!1;"blacklist"===n&&(m=!0);try{if(p=(a=m?t.hostBlackList:t.hostWhiteList)&&a.length,s=i.get(e,"body.trace"),!a||0===p)return!m;if(!s||!s.frames||0===s.frames.length)return!m;for(c=s.frames.length,u=0;u<c;u++){if(r=s.frames[u].filename,!i.isType(r,"string"))return!m;for(d=0;d<p;d++)if(l=a[d],new RegExp(l).test(r))return!0}}catch(e){m?t.hostBlackList=null:t.hostWhiteList=null;var h=m?"hostBlackList":"hostWhiteList";return o.error("Error while reading your configuration's "+h+" option. Removing custom "+h+".",e),!m}return!1}e.exports={checkLevel:function(e,t){var n=e.level,o=i.LEVELS[n]||0,a=t.reportLevel;return!(o<(i.LEVELS[a]||0))},userCheckIgnore:function(e){return function(t,n){var o=!!t._isUncaught;delete t._isUncaught;var a=t._originalArgs;delete t._originalArgs;try{i.isFunction(n.onSendCallback)&&n.onSendCallback(o,a,t)}catch(t){n.onSendCallback=null,e.error("Error while calling onSendCallback, removing",t)}try{if(i.isFunction(n.checkIgnore)&&n.checkIgnore(o,a,t))return!1}catch(t){n.checkIgnore=null,e.error("Error while calling custom checkIgnore(), removing",t)}return!0}},urlIsNotBlacklisted:function(e){return function(t,n){return!o(t,n,"blacklist",e)}},urlIsWhitelisted:function(e){return function(t,n){return o(t,n,"whitelist",e)}},messageIsIgnored:function(e){return function(t,n){var o,a,s,r,c,l,p,u;try{if(c=!1,!(s=n.ignoredMessages)||0===s.length)return!0;if(l=t.body,p=i.get(l,"trace.exception.message"),u=i.get(l,"message.body"),!(o=p||u))return!0;for(r=s.length,a=0;a<r&&!(c=new RegExp(s[a],"gi").test(o));a++);}catch(t){n.ignoredMessages=null,e.error("Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return!c}}}},function(e,t,n){"use strict";const i=n(6);e.exports=class extends i{start(e,t){return new Promise((e,n)=>{t.on("did-pick-install",()=>e()),t.on("did-skip-install",()=>t.destroy())})}}},function(e,t,n){"use strict";const{parseSetCookies:i,findCookie:o}=n(5),a=n(27),s=n(6);e.exports=class extends s{start({account:{email:e}}={},t){return this.install=t,new Promise((n,i)=>{this.subscriptions.add(t.on("did-submit-credentials",({email:e,password:t})=>n(this.onSubmit({email:e,password:t})))),this.subscriptions.add(t.on("did-click-back",()=>{n({step:this.options.backStep,data:{error:null}})})),this.subscriptions.add(t.on("did-forgot-password",()=>{a.resetPassword({email:e}).then(n=>{200===n.statusCode&&t.emit("did-reset-password",e)})}))})}onSubmit(e){return this.install.updateState({error:null,account:e}),a.login(e).then(e=>({account:{sessionId:o(i(e.headers["set-cookie"]),"kite-session").Value}}))}}},function(e,t,n){"use strict";const i=n(6),{deepMerge:o}=n(5);e.exports=class extends i{constructor(e,t){super(t),this.steps=e}start(e,t){return Promise.all(this.steps.map(n=>n.start(e,t))).then(e=>e.reduce((e,t)=>t?o(e,t):e))}getView(){return this.view||this.steps.map(e=>e.view).filter(e=>e)[0]}}},function(e,t,n){"use strict";const i=n(6);e.exports=class extends i{start(e){return Promise.resolve(e)}}},function(e,t,n){"use strict";const i=n(6);e.exports=class extends i{constructor(e,t){super(e),this.action=t}start(){return this.action&&this.action(),new Promise(()=>{})}}},function(e,t,n){"use strict";const{CompositeDisposable:i}=n(0),o=n(3),a=n(61),{logo:s}=n(30),r=n(17);e.exports=class extends HTMLElement{static initClass(){const e=document.registerElement("kite-atom-install",{prototype:this.prototype});return atom.themes.requireStylesheet(o.resolve(__dirname,"..","..","..","styles","install.less")),atom.views.addViewProvider(a,t=>{const n=new e;return n.setModel(t),n}),e}createdCallback(){this.classList.add("native-key-bindings"),this.innerHTML=`\n    <div class="install-wrapper">\n      <div class="logo">${s}</div>\n\n      <div class="progress-indicators">\n        <div class="download-kite invisible">\n          <progress max='100' class="inline-block"></progress>\n          <span class="inline-block">Downloading Kite</span>\n        </div>\n        <div class="install-kite hidden">\n          <span class='loading loading-spinner-tiny inline-block'></span>\n          <span class="inline-block">Installing Kite</span>\n        </div>\n        <div class="run-kite hidden">\n          <span class='loading loading-spinner-tiny inline-block'></span>\n          <span class="inline-block">Starting Kite</span>\n        </div>\n        <div class="authenticate-user hidden">\n          <span class='loading loading-spinner-tiny inline-block'></span>\n          <span class="inline-block">Authenticating your account</span>\n        </div>\n        <div class="install-plugin hidden">\n          <span class='loading loading-spinner-tiny inline-block'></span>\n          <span class="inline-block">Installing the Kite plugin</span>\n        </div>\n      </div>\n\n      <div class="content"></div>\n    </div>`,this.logo=this.querySelector(".logo"),this.content=this.querySelector(".content"),this.progress=this.querySelector("progress"),this.downloadKite=this.querySelector(".download-kite"),this.installKite=this.querySelector(".install-kite"),this.runKite=this.querySelector(".run-kite"),this.authenticateUser=this.querySelector(".authenticate-user"),this.installPlugin=this.querySelector(".install-plugin"),this.indicators=this.querySelector(".progress-indicators")}detachedCallback(){this.subscriptions&&this.subscriptions.dispose(),delete this.install,delete this.subscriptions}setModel(e){this.subscriptions=new i,this.install=e,this.subscriptions.add(this.install.onDidChangeCurrentStep(()=>{this.updateView()})),this.subscriptions.add(this.install.observeState(e=>{void 0!==e.kiteLogoVisible&&this.logo.classList.toggle("hidden",!e.kiteLogoVisible),e.download&&(e.download.done?this.downloadKite.classList.add("hidden"):this.downloadKite.classList.remove("invisible"),e.download.ratio&&(this.progress.value=Math.round(100*e.download.ratio))),e.install&&this.installKite.classList.toggle("hidden",e.install.done),e.running&&this.runKite.classList.toggle("hidden",e.running.done),e.authenticate&&this.authenticateUser.classList.toggle("hidden",e.authenticate.done),e.plugin&&this.installPlugin.classList.toggle("hidden",e.plugin.done)})),this.subscriptions.add(this.install.on("encountered-fatal-error",()=>{this.indicators.classList.add("hidden")}))}getModel(){return this.install}updateView(){this.currentView&&this.currentView.release();const e=this.install.getCurrentStepView();e&&(this.content.children.length&&[].slice.call(this.content.children).forEach(e=>this.content.removeChild(e)),this.content.appendChild(e),e.init(this.install),this.currentView=e,this.currentView.name&&r.Tracker.trackEvent(`${this.currentView.name}_shown`,this.install.state.error?{error:this.install.state.error.message}:{}))}}.initClass()},function(e,t,n){"use strict";const{CompositeDisposable:i}=n(0),{addDisposableEventListener:o}=n(18);class a extends HTMLElement{constructor(e){super(),this.name=e,this.innerHTML='\n    <div>\n      <p>Great! Create an account with your email address.</p>\n    </div>\n    <form novalidate>\n      <input class="input-text" name="email" type="email"></input>\n      <button class="btn btn-primary btn-block">Continue</button>\n      <div class="status hidden"></div>\n    </form>\n    <center>\n      <div class="dismiss secondary-actions">\n        <a class="skip-email">Continue without email</a>\n      </div>\n    </center>\n\n    ',this.form=this.querySelector("form"),this.input=this.querySelector("input"),this.submit=this.querySelector("button"),this.status=this.querySelector(".status"),this.skipButton=this.querySelector("a.skip-email")}get data(){return{email:this.input.value}}release(){this.subscriptions&&this.subscriptions.dispose(),delete this.install,delete this.subscriptions}init(e){this.subscriptions=new i,this.install=e,this.classList.remove("disabled"),this.subscriptions.add(e.observeState(e=>this.onStateChange(e))),this.subscriptions.add(o(this.form,"submit",()=>{this.hideError(),this.classList.add("disabled"),this.install.emit("did-submit-email",this.data)})),this.subscriptions.add(o(this.skipButton,"click",()=>{this.install.emit("did-skip-email",{skipped:!0})}))}onStateChange(e){this.input.value=e.account.email||"",e.error?(console.log(e.error),this.status.textContent=e.error.message,this.status.classList.remove("hidden")):this.hideError()}hideError(){this.status.textContent="",this.status.classList.add("hidden")}}customElements.define("kite-atom-input-email",a),e.exports=a},function(e,t,n){"use strict";const{screenshot:i}=n(30);class o extends HTMLElement{constructor(e){super(),this.name=e,this.innerHTML=`\n    <div class="welcome-to-kite">\n      <div class="warning">\n        <span class="icon"></span>\n        <span class="message">Kite is still installing on your machine. Please do not close this tab until installation has finished.</span>\n      </div>\n      <div class="description">\n        <div class="content">\n          <p>Kite provides the best Python completions in the world</p>\n          <ul>\n            <li>1.5x more completions than the basic engine</li>\n            <li>Completions ranked by your current code context</li>\n            <li>Full line of code completions</li>\n            <li>Works locally without an internet connection</li>\n          </ul>\n        </div>\n        <div class="description-screenshot"><img src="${i}"></div>\n      </div>\n      <p>\n        Kite is under active development. You can expect our completions\n        to improve significantly and become more intelligent over the coming\n        months.</p>\n      <p class="feedback">Send us feedback at <a href="mailto:feedback@kite.com">feedback@kite.com</a></p>\n    </div>\n    `}init(e){this.install=e,this.install.emit("did-skip-whitelist")}release(){}}customElements.define("kite-atom-install-wait",o),e.exports=o},function(e,t,n){"use strict";const{logoSmall:i,screenshot:o}=n(30);class a extends HTMLElement{constructor(e){super(),this.name=e,this.innerHTML=`\n    <div class="welcome-to-kite">\n      <div class="welcome-title">\n        <h3>Welcome to Kite!</h3>\n        <div class="title-logo">${i}</div>\n      </div>\n      <div class="warning">\n        <span class="icon"></span>\n        <span class="message">Kite is now integrated with Atom. You'll see your completions improve over the next few minutes as Kite analyzes your code.</span>\n      </div>\n      <div class="description">\n        <div class="content">\n          <p>Kite provides the best Python completions in the world</p>\n          <ul>\n            <li>1.5x more completions than the basic engine</li>\n            <li>Completions ranked by your current code context</li>\n            <li>Full line of code completions</li>\n            <li>Works locally without an internet connection</li>\n          </ul>\n        </div>\n        <div class="description-screenshot"><img src="${o}"></div>\n      </div>\n      <p>\n        Kite is under active development. You can expect our completions\n        to improve significantly and become more intelligent over the coming\n        months.</p>\n      <p class="feedback">Send us feedback at <a href="mailto:feedback@kite.com">feedback@kite.com</a></p>\n    </div>\n    `}init(e){this.install=e,this.install.updateState({kiteLogoVisible:!1})}release(){}}customElements.define("kite-atom-install-end",a),e.exports=a},function(e,t,n){"use strict";class i extends HTMLElement{constructor(e){super(),this.name=e}init(e){this.install=e,this.install.emit("encountered-fatal-error"),this.innerHTML=`\n    <div class="content">\n      <p>\n        We've encountered an error!\n        Please email <a href="mailto:feedback@kite.com">feedback@kite.com</a>\n        with the contents of the error message below to get help.\n      </p>\n    </div>\n    <br>\n    <div class="status">\n      <h4>${e.state.error.message}</h4>\n      <pre>${e.state.error.stack}</pre>\n    </div>\n    `}release(){}}customElements.define("kite-atom-install-error",i),e.exports=i},function(e,t,n){"use strict";const{CompositeDisposable:i}=n(0),{addDisposableEventListener:o}=n(18),{demoVideo:a}=n(30);class s extends HTMLElement{constructor(e){super(),this.name=e,this.innerHTML=`\n    <h2><span class="icon"></span> autocomplete-python installed successfully</h2>\n    <div id="kite" class="inset-panel kite-description">\n      <h3>Level up your completions with Kite</h3>\n      <div class="columns">\n        <div class="body">\n          <div class="summary">\n            Kite is a native app that runs locally on your computer and uses machine learning to provide advanced completions\n          </div>\n          <ul class="features">\n            <li class="feature icon icon-check">All the features of autocomplete-python and...</li>\n            <li class="feature icon icon-check">1.5x more completions</li>\n            <li class="feature icon icon-check">Completions ranked by code context</li>\n            <li class="feature icon icon-check">Full line of code completions</li>\n            <li class="feature icon icon-check">100% local - no internet connection required</li>\n            <li class="feature icon icon-check">100% free to use</li>\n          </ul>\n          <div class="more">\n            <a href="https://kite.com">Learn more</a>\n          </div>\n        </div>\n        <div class="actions">\n          <video autoplay loop playsinline>\n            <source src="${a}" type="video/mp4">\n          </video>\n          <div class="cta-container">\n            <center>\n              <button class="btn btn-primary">\n                <span class="icon icon-cloud-download"></span>Add Kite\n              </button>\n            </center>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="dismiss">\n      <a href="#">Dismiss</a>\n    </div>\n    `,this.skipButton=this.querySelector(".dismiss a"),this.nextButton=this.querySelector("#kite .actions .cta-container .btn")}init(e){this.install=e,this.subscriptions=new i,this.install.updateState({kiteLogoVisible:!1}),this.subscriptions.add(o(this.skipButton,"click",()=>{this.install.emit("did-skip-install")})),this.subscriptions.add(o(this.nextButton,"click",()=>{this.install.updateState({kiteLogoVisible:!0}),this.install.emit("did-pick-install")}))}release(){this.subscriptions&&this.subscriptions.dispose(),delete this.subscriptions}}customElements.define("kite-atom-kite-vs-jedi",s),e.exports=s},function(e,t,n){"use strict";const{CompositeDisposable:i}=n(0),{addDisposableEventListener:o}=n(18);class a extends HTMLElement{constructor(e){super(),this.name=e,this.innerHTML='\n    <p>It seems like you already have a Kite account. Sign in with your login info.</p>\n    <form novalidate>\n      <input class=\'input-text\' name="email" type="email"></input>\n      <input class=\'input-text\' name="password" type="password"></input>\n      <button class="btn btn-primary btn-block" type="submit">Sign in</button>\n      <div class="secondary-actions">\n        <a class="back">Back</a>\n        <a class="reset-password secondary-cta">Forgot password</a>\n      </div>\n      <div class="status hidden"></div>\n    </form>\n    ',this.form=this.querySelector("form"),this.input=this.querySelector('input[type="email"]'),this.password=this.querySelector('input[type="password"]'),this.submit=this.querySelector('button[type="submit"]'),this.backButton=this.querySelector("a.back"),this.forgotPassword=this.querySelector("a.reset-password"),this.status=this.querySelector(".status")}get data(){return{email:this.input.value,password:this.password.value}}release(){this.subscriptions&&this.subscriptions.dispose(),delete this.install,delete this.subscriptions}init(e){this.subscriptions=new i,this.install=e,this.classList.remove("disabled"),this.subscriptions.add(e.on("did-reset-password",e=>{atom.notifications.addSuccess(`Instructions on how to reset your password should\n         have been sent to ${e}`)})),this.subscriptions.add(o(this.form,"submit",()=>{this.classList.add("disabled"),this.install.emit("did-submit-credentials",this.data)})),this.subscriptions.add(o(this.forgotPassword,"click",()=>{this.install.emit("did-forgot-password")})),this.subscriptions.add(o(this.backButton,"click",()=>{this.install.emit("did-click-back")})),this.subscriptions.add(e.observeState(e=>this.onStateChange(e)))}onStateChange(e){e.account.email&&(this.input.value=e.account.email),e.account.password&&(this.input.password=e.account.password),e.error?(this.status.textContent=e.error.message,this.status.classList.remove("hidden")):this.hideError()}hideError(){this.status.textContent="",this.status.classList.add("hidden")}}customElements.define("kite-atom-login",a),e.exports=a},function(e,t,n){"use strict";const{CompositeDisposable:i}=n(0),{addDisposableEventListener:o}=n(18);class a extends HTMLElement{constructor(e){super(),this.name=e,this.innerHTML='\n    <div class="content">\n      <p>It seems like you don\'t have administrator privileges. Please restart Atom as an administrator and try installing Kite again.</p>\n      <p>You can also <a class="download-link" href="https://kite.com/download">manually install Kite</a>.</p>\n      <p class="dismiss"><a class="dismiss-link" href="#">Don\'t show this again</a></p>\n    </div>\n    ',this.dismissButton=this.querySelector(".dismiss-link")}init(e){this.install=e,this.subscriptions=new i,this.subscriptions.add(o(this.dismissButton,"click",()=>{this.install.destroy(),this.install.emit("not-admin-dismissed")})),this.install.emit("not-admin-shown")}release(){}}customElements.define("kite-atom-install-not-admin",a),e.exports=a},function(e,t,n){"use strict";const i=n(6),o=n(18),a=n(17);e.exports=class extends i{start(e,t){return t.updateState({plugin:{done:!1}}),o.installPackage().then(()=>new Promise(e=>{setTimeout(()=>{o.activatePackage(),e()},200)})).then(()=>{a.Tracker.trackEvent("kite_installer_kite_plugin_installed"),t.updateState({plugin:{done:!0}})})}}},function(e,t,n){"use strict";let i,o,a,s,r,c,l,p,u,d,m,h,f;const g=()=>{f||(({Errors:r,Metrics:c}=n(26)),f=n(11),s=n(152),h=n(31),u=r())},v=()=>{l||({promisifyReadResponse:l,flatten:d,compact:m}=n(1))},x=30,b=2500,y={python:["py"],javascript:["js"]};e.exports=class{static get STATES(){return g(),f.STATES}constructor(e){a||({Emitter:a}=n(0)),this.emitter=new a,this.kite=e}onDidGetState(e){return this.emitter.on("did-get-state",e)}onDidChangeState(e){return this.emitter.on("did-change-state",e)}onKiteReady(e){return this.emitter.on("kite-ready",e)}onWillDownload(e){return this.emitter.on("will-download",e)}onDidDownload(e){return this.emitter.on("did-download",e)}onDidFailDownload(e){return this.emitter.on("did-fail-download",e)}onDidSkipInstall(e){return this.emitter.on("did-skip-install",e)}onWillInstall(e){return this.emitter.on("will-install",e)}onDidInstall(e){return this.emitter.on("did-install",e)}onDidFailInstall(e){return this.emitter.on("did-fail-install",e)}onWillStart(e){return this.emitter.on("will-start",e)}onDidStart(e){return this.emitter.on("did-start",e)}onDidFailStart(e){return this.emitter.on("did-fail-start",e)}onDidShowLogin(e){return this.emitter.on("did-show-login",e)}onDidSubmitLogin(e){return this.emitter.on("did-submit-login",e)}onDidShowLoginError(e){return this.emitter.on("did-show-login-error",e)}onDidShowSignupError(e){return this.emitter.on("did-show-signup-error",e)}onDidCancelLogin(e){return this.emitter.on("did-cancel-login",e)}onDidResetPassword(e){return this.emitter.on("did-reset-password",e)}onWillAuthenticate(e){return this.emitter.on("will-authenticate",e)}onDidAuthenticate(e){return this.emitter.on("did-authenticate",e)}onDidFailAuthenticate(e){return this.emitter.on("did-fail-authenticate",e)}onDidGetUnauthorized(e){return this.emitter.on("did-get-unauthorized",e)}reset(){delete this.previousState,delete this.ready}dispose(){this.emitter.dispose()}connect(e){return g(),f.checkHealth().then(t=>{t>=f.STATES.INSTALLED&&localStorage.setItem("kite.wasInstalled",!0);let n=!1;return(t===f.STATES.RUNNING||t===f.STATES.REACHABLE)&&(!this.previousPolledState||this.previousPolledState!==t||"activation"!==e&&"pollingInterval"!==e)||(n=!0),this.emitter.emit("did-get-state",{state:t,canNotify:n}),t!==this.previousState&&(this.emitter.emit("did-change-state",t),this.previousState=t,t!==f.STATES.READY||this.ready||(this.emitter.emit("kite-ready"),this.ready=!0)),"activation"!==e&&"pollingInterval"!==e||(this.previousPolledState=t),t})}installFlow(){return g(),Promise.all([f.canInstallKite(),localStorage.getItem("kite.no-admin-privileges")?Promise.reject("User does not have admin privileges"):Promise.resolve()]).then(([e])=>{c.Tracker.name="atom",c.Tracker.props={},c.Tracker.props.lastEvent=event,this.showInstallFlow({})},e=>{s.error("rejected with data:",e)})}showInstallFlow(e){g(),u||(u=r());const{install:{Install:t,atom:o}}=n(26),{defaultFlow:a}=o(),s=new t(a(),{path:atom.project.getPaths()[0]||i.homedir()},{failureStep:"termination",title:"Kite Install"}),c=f.Account.client;return f.Account.client=new h("alpha.kite.com",-1,"",!0),u.trackUncaught(),atom.workspace.getActivePane().addItem(s),atom.workspace.getActivePane().activateItem(s),s.start().catch(e=>console.error(e)).then(()=>{f.Account.client=c}),s}install(){return g(),this.emitter.emit("will-download"),f.downloadKiteRelease({install:!0,onDownload:()=>this.emitter.emit("did-download"),onInstallStart:()=>this.emitter.emit("will-install")}).then(()=>this.emitter.emit("did-install")).catch(e=>{switch(e.type){case"bad_status":case"curl_error":this.emitter.emit("did-fail-download",e);break;default:this.emitter.emit("did-fail-install",e)}throw e})}wasInstalledOnce(){return"true"===localStorage.getItem("kite.wasInstalled")}start(){return g(),this.emitter.emit("will-start"),f.runKiteAndWait(x,b).then(()=>this.emitter.emit("did-start")).catch(e=>{throw this.emitter.emit("did-fail-start",e),e})}startEnterprise(){return g(),this.emitter.emit("will-start"),f.runKiteEnterpriseAndWait(x,b).then(()=>this.emitter.emit("did-start")).catch(e=>{throw this.emitter.emit("did-fail-start",e),e})}login(){atom.applicationDelegate.openExternal("kite://home")}copilotSettings(){atom.applicationDelegate.openExternal("kite://settings")}saveUserID(){return g(),v(),f.request({path:"/clientapi/user",method:"GET"}).then(e=>{if(s.logResponse(e),200!==e.statusCode)throw new Error("Unable to reach user endpoint");return l(e)}).then(e=>{void 0!==(e=JSON.parse(e)).id&&(p||(p=n(68)),p.set("distinctID",e.id))}).catch(e=>{})}getRootDirectory(e){i||(i=n(2)),o||(o=n(3));const[t]=atom.project.getPaths(),a=e&&e.getPath()||t;return a&&0===o.relative(i.homedir(),a).indexOf("..")?o.parse(a).root:i.homedir()}getSupportedLanguagesRegExp(e){return v(),`.(${m(d(e.map(e=>y[e]))).join("|")})$`}}},function(e,t,n){"use strict";const i=n(2),o=n(8),a=n(3),s=n(4),r=n(10),c=n(14),l=n(19),{STATES:p}=n(15),u={RELEASE_URL:"https://alpha.kite.com/release/dls/mac/current",APPS_PATH:"/Applications/",KITE_DMG_PATH:"/tmp/Kite.dmg",KITE_VOLUME_PATH:"/Volumes/Kite/",KITE_APP_PATH:{mounted:"/Volumes/Kite/Kite.app",defaultInstalled:"/Applications/Kite.app"},KITE_SIDEBAR_PATH:"/Applications/Kite.app/Contents/MacOS/KiteSidebar.app",KITE_BUNDLE_ID:"com.kite.Kite",SESSION_FILE_PATH:a.join(i.homedir(),".kite","session.json"),get releaseURL(){return this.RELEASE_URL},get downloadPath(){return this.KITE_DMG_PATH},get installPath(){return this.allInstallPaths[0]},get allInstallPaths(){let e=String(r.spawnSync("mdfind",['kMDItemCFBundleIdentifier = "com.kite.Kite"']).stdout).trim().split("\n");return-1===e.indexOf(this.KITE_APP_PATH.defaultInstalled)&&this.checkDefaultAppPath()&&e.push(this.KITE_APP_PATH.defaultInstalled),e.filter(e=>""!==e)},get enterpriseInstallPath(){return this.allEnterpriseInstallPaths[0]},get allEnterpriseInstallPaths(){return String(r.spawnSync("mdfind",['kMDItemCFBundleIdentifier = "enterprise.kite.Kite"']).stdout).trim().split("\n")},get sessionFilePath(){return this.SESSION_FILE_PATH},isAdmin(){try{const e=c.whoami();return String(r.execSync("dscacheutil -q group -a name admin")).split("\n").filter(e=>/^users:/.test(e))[0].trim().replace(/users:\s+/,"").split(/\s/g).includes(e)}catch(e){return!1}},arch:()=>i.arch(),isOSSupported:()=>!0,isOSVersionSupported:()=>parseFloat(i.release())>=14,isKiteSupported(){return this.isOSVersionSupported()},checkDefaultAppPath(){return o.existsSync(this.KITE_APP_PATH.defaultInstalled)},isKiteInstalled(){return c.spawnPromise("mdfind",['kMDItemCFBundleIdentifier = "com.kite.Kite"'],"mdfind_error","Unable to run mdfind and verify that Kite is installed").then(e=>{if(!(e&&""!==e.trim()||this.checkDefaultAppPath()))throw new l("Unable to find Kite application install using mdfind",{state:p.UNINSTALLED})})},hasManyKiteInstallation(){return this.allInstallPaths.length>1},hasManyKiteEnterpriseInstallation(){return this.allEnterpriseInstallPaths.length>1},hasBothKiteInstalled(){return Promise.all([this.isKiteInstalled(),this.isKiteEnterpriseInstalled()])},isKiteEnterpriseInstalled:()=>c.spawnPromise("mdfind",['kMDItemCFBundleIdentifier = "enterprise.kite.Kite"'],"mdfind_error","Unable to run mdfind and verify that kite enterprise is installed").then(e=>{if(!e||""===e.trim())throw new l("Unable to find Kite Enterprise application install using mdfind",{state:p.UNINSTALLED})}),downloadKiteRelease(e){return this.downloadKite(this.releaseURL,e||{})},downloadKite(e,t){return t=t||{},this.streamKiteDownload(e,t.onDownloadProgress).then(()=>c.guardCall(t.onDownload)).then(()=>t.install&&this.installKite(t))},streamKiteDownload(e,t){const n=s.request(e);return n.end(),c.followRedirections(n).then(e=>{if(t){const n=parseInt(e.headers["content-length"],10);let i=0;e.on("data",e=>{i+=e.length,t(i,n,i/n)})}return c.promisifyStream(e.pipe(o.createWriteStream(this.downloadPath))).then(()=>new Promise((e,t)=>{setTimeout(e,100)}))})},installKite(e){return e=e||{},c.guardCall(e.onInstallStart),c.spawnPromise("hdiutil",["attach","-nobrowse",this.KITE_DMG_PATH],"mount_error","Unable to mount Kite.dmg").then(()=>c.guardCall(e.onMount)).then(()=>c.spawnPromise("cp",["-r",this.KITE_APP_PATH.mounted,this.APPS_PATH],"cp_error","Unable to copy Kite.app in the applications directory")).then(()=>c.guardCall(e.onCopy)).then(()=>c.spawnPromise("hdiutil",["detach",this.KITE_VOLUME_PATH],"unmount_error","Unable to unmount Kite.dmg")).then(()=>c.guardCall(e.onUnmount)).then(()=>c.spawnPromise("rm",[this.KITE_DMG_PATH],"rm_error","Unable to remove Kite.dmg")).then(()=>c.guardCall(e.onRemove)).then(()=>c.retryPromise(()=>this.isKiteInstalled(),10,1500))},isKiteRunning:()=>c.spawnPromise("/bin/ps",["-axco","command"],{encoding:"utf8"},"ps_error","Unable to run the ps command and verify that Kite is running").then(e=>{if(!e.split("\n").some(e=>/^Kite$/.test(e)))throw new l("Kite process could not be found in the processes list",{state:p.NOT_RUNNING})}),runKite(){const e=Object.assign({},process.env);return delete e.ELECTRON_RUN_AS_NODE,this.isKiteRunning().catch(()=>c.spawnPromise("defaults",["write","com.kite.Kite","shouldReopenSidebar","0"],"defaults_error","Unable to run defaults command").then(()=>c.spawnPromise("open",["-a",this.installPath,"--args","--plugin-launch","--channel=autocomplete-python"],{env:e},"open_error","Unable to run the open command to start Kite")))},isKiteEnterpriseRunning:()=>c.spawnPromise("/bin/ps",["-axco","command"],{encoding:"utf8"},"ps_error","Unable to run the ps command and verify that Kite enterprise is running").then(e=>{if(!e.split("\n").some(e=>/^KiteEnterprise$/.test(e)))throw new l("Kite Enterprise process could not be found in the processes list",{state:p.NOT_RUNNING})}),runKiteEnterprise(){const e=Object.assign({},process.env);return delete e.ELECTRON_RUN_AS_NODE,c.spawnPromise("defaults",["write","enterprise.kite.Kite","shouldReopenSidebar","0"],"defaults_error","Unable to run defaults command").then(()=>c.spawnPromise("open",["-a",this.enterpriseInstallPath],{env:e},"open_error","Unable to run the open command and start Kite enterprise"))}};e.exports=u},function(e,t,n){"use strict";const i=n(2),o=n(8),a=n(3),s=n(4),r=n(10),c=n(14),l=n(19),p=n(41),{STATES:u}=n(15),d=`"${a.join(__dirname,"read-key.bat")}"`;a.join(__dirname,"read-arch.bat");let m;const h={RELEASE_URL:"https://alpha.kite.com/release/dls/windows/current",KITE_INSTALLER_PATH:a.join(i.tmpdir(),"KiteSetup.exe"),SESSION_FILE_PATH:a.join(process.env.LOCALAPPDATA,"Kite","session.json"),set KITE_EXE_PATH(e){m=e},get KITE_EXE_PATH(){if(!m){let e,t;t=process.env.ProgramW6432?a.join(process.env.ProgramW6432,"Kite"):"C:\\Program Files\\Kite";try{const n=String(r.execSync(d)).trim();e="not found"!==n?n:t}catch(n){e=t}m=a.join(e,"kited.exe")}return m},get releaseURL(){return this.RELEASE_URL},get downloadPath(){return this.KITE_INSTALLER_PATH},get installPath(){return this.KITE_EXE_PATH},get enterpriseInstallPath(){return null},get allInstallPaths(){return[this.installPath]},get allEnterpriseInstallPaths(){return[]},get sessionFilePath(){return this.SESSION_FILE_PATH},isAdmin(){try{return r.execSync("net session"),!0}catch(e){return!1}},arch:()=>"64bit",isOSSupported:()=>!0,isOSVersionSupported(){return parseFloat(i.release())>=6.1&&"64bit"===this.arch()},isKiteSupported(){return this.isOSVersionSupported()},isKiteInstalled(){return new Promise((e,t)=>{o.exists(this.KITE_EXE_PATH,n=>{n?e():t(new l("",{state:u.UNINSTALLED}))})})},isKiteEnterpriseInstalled:()=>Promise.reject(new l("Kite Enterprise is currently not supported on windows",{state:u.UNSUPPORTED})),hasManyKiteInstallation(){return this.allInstallPaths.length>1},hasManyKiteEnterpriseInstallation(){return this.allEnterpriseInstallPaths.length>1},hasBothKiteInstalled(){return Promise.all([this.isKiteInstalled(),this.isKiteEnterpriseInstalled()])},downloadKiteRelease(e){return this.downloadKite(this.releaseURL,e||{})},downloadKite(e,t){return t=t||{},this.streamKiteDownload(e,t.onDownloadProgress).then(()=>c.guardCall(t.onDownload)).then(()=>t.install&&this.installKite(t))},streamKiteDownload(e,t){const n=s.request(e);return n.end(),c.followRedirections(n).then(e=>{if(t){const n=parseInt(e.headers["content-length"],10);let i=0;e.on("data",e=>{i+=e.length,t(i,n,i/n)})}return c.promisifyStream(e.pipe(o.createWriteStream(this.downloadPath))).then(()=>new Promise((e,t)=>{setTimeout(e,100)}))})},installKite(e){e=e||{};var t=Object.create(process.env);return t.KITE_SKIP_ONBOARDING="1",c.guardCall(e.onInstallStart),c.execPromise(`"${this.KITE_INSTALLER_PATH}"`+" --skip-onboarding --plugin-launch --channel=autocomplete-python",{env:t},"kite_install_error","Unable to run Kite installer").then(()=>c.guardCall(e.onCopy)).then(()=>o.unlinkSync(this.KITE_INSTALLER_PATH)).then(()=>c.guardCall(e.onRemove))},isKiteRunning:()=>c.spawnPromise("tasklist","tasklist_error","Unable to run the tasklist command and verify whether kite is running or not").then(e=>{if(e.split("\n").every(e=>-1===e.indexOf("kited.exe")))throw new l("Unable to find kited.exe process in the tasks list",{state:u.NOT_RUNNING})}),runKite(){return this.isKiteRunning().catch(()=>{var e=Object.create(process.env);e.KITE_SKIP_ONBOARDING="1",delete e.ELECTRON_RUN_AS_NODE;try{r.spawn(this.KITE_EXE_PATH,["--plugin-launch","--channel=autocomplete-python"],{detached:!0,env:e})}catch(t){throw new p("kite_exe_error",{message:"Unable to run kite executable",callStack:t.stack,cmd:this.KITE_EXE_PATH,options:{detached:!0,env:e}})}})},isKiteEnterpriseRunning:()=>Promise.reject(new l("Kite Enterprise is currently not supported on windows",{state:u.UNSUPPORTED})),runKiteEnterprise:()=>Promise.reject(new l("Kite Enterprise is currently not supported on windows",{state:u.UNSUPPORTED}))};e.exports=h},function(e,t,n){"use strict";const i=n(2),o=n(8),a=n(3),s=n(4),r=n(10),c=n(14),l=n(19),p=n(41),{STATES:u}=n(15),d={RELEASE_URL:"https://linux.kite.com/dls/linux/current",SESSION_FILE_PATH:a.join(i.homedir(),".kite","session.json"),KITE_DEB_PATH:"/tmp/kite-installer.deb",KITED_PATH:a.join(i.homedir(),".local","share","kite","kited"),FALLBACK_KITED_PATH:"/opt/kite/kited",KITED_PROCESS:/kited/,KITE_CURRENT_LINK:"/opt/kite/current",memKitedInstallPath:null,get releaseURL(){return this.RELEASE_URL},get downloadPath(){return this.KITE_DEB_PATH},get installPath(){return this.memKitedInstallPath||(o.existsSync(this.KITED_PATH)?this.memKitedInstallPath=this.KITED_PATH:this.memKitedInstallPath=this.FALLBACK_KITED_PATH),this.memKitedInstallPath},resetInstallPath(){this.memKitedInstallPath=null},get allInstallPaths(){return[this.installPath]},get enterpriseInstallPath(){return null},get allEnterpriseInstallPaths(){return null},get sessionFilePath(){return this.SESSION_FILE_PATH},hasManyKiteInstallation(){return this.allInstallPaths.length>1},hasManyKiteEnterpriseInstallation:()=>!1,isAdmin(){try{const e=c.whoami();return String(r.execSync("getent group root adm admin sudo")).split("\n").map(e=>e.substring(e.lastIndexOf(":")+1)).reduce((e,t)=>(t.split(",").forEach(t=>e.push(t.trim())),e),[]).includes(e)}catch(e){return!1}},arch:()=>i.arch(),isOSSupported:()=>!0,isOSVersionSupported:()=>!0,isKiteSupported(){return this.isOSSupported()&&this.isOSVersionSupported()},isKiteInstalled(){return new Promise((e,t)=>{o.exists(this.installPath,n=>{n?e():t(new l("",{state:u.UNINSTALLED}))})})},downloadKiteRelease(e){return this.downloadKite(this.releaseURL,e||{})},downloadKite(e,t){return t=t||{},this.streamKiteDownload(e,t.onDownloadProgress).then(()=>c.guardCall(t.onDownload)).then(()=>t.install&&this.installKite(t))},streamKiteDownload(e,t){const n=s.request(e);return n.end(),c.followRedirections(n).then(e=>{if(t){const n=parseInt(e.headers["content-length"],10);let i=0;e.on("data",e=>{i+=e.length,t(i,n,i/n)})}return c.promisifyStream(e.pipe(o.createWriteStream(this.downloadPath))).then(()=>new Promise((e,t)=>{setTimeout(e,100)}))})},installKite(e){return e=e||{},c.guardCall(e.onInstallStart),c.spawnPromise("apt",["install","-f",this.KITE_DEB_PATH],{gid:27},"apt install error","unable to install kite from kite-installer.deb").catch(e=>{throw"EPERM"===e.code||"EPERM"===e.errno?new p("kite-installer.deb EPERM",{message:`Installing ${this.KITE_DEB_PATH} failed due to lacking root permissions.\n          In your command line, try running \`sudo apt install -f ${this.KITE_DEB_PATH}\` to finish installing Kite`,cmd:`apt install -f ${this.KITE_DEB_PATH}`}):e}).then(()=>this.resetInstallPath()).then(()=>c.guardCall(e.onMount)).then(()=>o.unlinkSync(this.KITE_DEB_PATH)).then(()=>c.guardCall(e.onRemove))},isKiteRunning(){return c.spawnPromise("/bin/ps",["-axo","pid,command"],{encoding:"utf-8"},"ps_error","unable to run the ps command and verify that Kite is running").then(e=>{if(!e.split("\n").some(e=>this.KITED_PROCESS.test(e)))throw new l("Kite process could not be found in the processes list",{state:u.NOT_RUNNING})})},runKite(){return this.isKiteRunning().catch(()=>{const e=Object.assign({},process.env);e.SKIP_KITE_ONBOARDING="1",delete e.ELECTRON_RUN_AS_NODE;try{if(!o.existsSync(this.installPath))throw new Error("kited is not installed");r.spawn(this.installPath,["--plugin-launch","--channel=autocomplete-python"],{detached:!0,env:e})}catch(t){throw new p("kited_error",{message:t.message&&"kited is not installed"===t.message||"unable to run kited binary",callStack:t.stack,cmd:this.installPath,options:{detached:!0,env:e}})}})},hasBothKiteInstalled(){return Promise.all([this.isKiteInstalled(),this.isKiteEnterpriseInstalled()])},isKiteEnterpriseInstalled(){return this.notSupported()},isKiteEnterpriseRunning(){return this.notSupported()},runKiteEnterprise(){return this.notSupported()},notSupported:()=>Promise.reject(new l("Your platform is currently not supported",{state:u.UNSUPPORTED}))};e.exports=d},function(e,t,n){"use strict";const i=n(19),{STATES:o}=n(15);e.exports={get releaseURL(){return null},get downloadPath(){return null},get installPath(){return null},get allInstallPaths(){return null},get enterpriseInstallPath(){return null},get allEnterpriseInstallPaths(){return null},get sessionFilePath(){return null},hasManyKiteInstallation:()=>!1,hasManyKiteEnterpriseInstallation:()=>!1,isAdmin:()=>!1,arch:()=>null,isOSSupported:()=>!1,isOSVersionSupported:()=>!1,isKiteSupported:()=>!1,isKiteInstalled(){return this.notSupported()},downloadKite(e){return this.notSupported()},installKite(e){return this.notSupported()},isKiteRunning(){return this.notSupported()},runKite(){return this.notSupported()},hasBothKiteInstalled(){return Promise.all([this.isKiteInstalled(),this.isKiteEnterpriseInstalled()])},isKiteEnterpriseInstalled(){return this.notSupported()},isKiteEnterpriseRunning(){return this.notSupported()},runKiteEnterprise(){return this.notSupported()},notSupported:()=>Promise.reject(new i("Your platform is currently not supported",{state:o.UNSUPPORTED}))}},function(e,t,n){"use strict";e.exports=class{constructor(e){this.store=e}get(e){return(this.content?Promise.resolve(this.content):this.store.get().then(e=>(function(e){return e?JSON.parse(e):e})(e)).then(e=>(this.content=e,e))).then(t=>(function(e,t){if(!e)return t;return e.split(/\./g).reduce((e,t)=>null==e?e:e[t],t)})(e,t))}set(e,t){return this.get().then(n=>this.store.set(function(e){return JSON.stringify(e)}(function(e,t,n){n||(n={});return e.split(/\./g).reduce((e,i,o,a)=>o===a.length-1?(e[i]=t,n):null==e[i]?(e[i]={},e[i]):e[i],n)}(e,t,n))))}}},function(e,t,n){"use strict";e.exports=class{constructor(){}set(e){return this.content=e,Promise.resolve()}get(){return Promise.resolve(this.content)}}},function(e,t){const n=Math.pow(2,20),i=Math.pow(2,21);e.exports={MAX_FILE_SIZE:n,MAX_PAYLOAD_SIZE:i}},function(e,t,n){"use strict";const{LEVELS:i}=n(15),o=n(153),a=n(154);e.exports={LEVELS:i,LEVEL:i.INFO,output:"undefined"!=typeof console?a:o,silly(...e){this.log(i.SILLY,...e)},verbose(...e){this.log(i.VERBOSE,...e)},debug(...e){this.log(i.DEBUG,...e)},info(...e){this.log(i.INFO,...e)},warn(...e){this.log(i.WARNING,...e)},error(...e){this.log(i.ERROR,...e)},log(e,...t){e>=this.LEVEL&&!this.SILENT&&this.output.log(e,...t)},logRequest(){},logResponse(){}}},function(e,t,n){"use strict";e.exports={log(){}}},function(e,t,n){"use strict";const{LEVELS:i}=n(15);e.exports={TRACE_ALL:!1,METHODS:{[i.SILLY]:"debug"in console?"debug":"log",[i.VERBOSE]:"debug"in console?"debug":"log",[i.DEBUG]:"log",[i.INFO]:"info"in console?"info":"log",[i.WARNING]:"warn"in console?"warn":"error",[i.ERROR]:"error"},log(e,...t){console[this.METHODS[e]](...t)}}},function(e,t,n){"use strict";const i=n(2),{CompositeDisposable:o,Emitter:a}=n(0),s=n(11),{STATES:r}=s,{fromSetting:c,all:l}=n(156),p=(n(69),n(158));n(12);e.exports=class{get NOTIFIERS(){return{[r.UNSUPPORTED]:"warnNotSupported",[r.RUNNING]:"warnNotReachable",[r.REACHABLE]:"warnNotAuthenticated"}}get NOTIFICATION_METRICS(){return{[r.UNSUPPORTED]:"not-supported",[r.RUNNING]:"not-reachable",[r.REACHABLE]:"not-authenticated"}}pauseNotifications(){this.paused=!0}resumeNotifications(){this.paused=!1}constructor(e){this.app=e,this.emitter=new a,this.subscriptions=new o,this.lastShown={},this.queue=new p,this.subscriptions.add(e.onDidGetState(({state:e,canNotify:t})=>{t&&this.shouldNotify(e)&&this.notify(e)})),this.subscriptions.add(this.queue.onDidNotify(e=>{const{type:t,metric:n,key:i}=this.extractNotificationMetrics(e);this.lastShown[i]=new Date,this.emit("did-notify",{notification:n,type:t})})),this.subscriptions.add(this.queue.onDidClickNotificationButton(({notification:e,button:t})=>{const{type:n,metric:i}=this.extractNotificationMetrics(e);this.emit("did-click-notification-button",{button:t.metric,notification:i,type:n})})),this.subscriptions.add(this.queue.onDidDismissNotification(e=>{const{type:t,metric:n}=this.extractNotificationMetrics(e);this.emit("did-dismiss-notification",{notification:n,type:t})})),this.subscriptions.add(this.queue.onDidRejectNotification(e=>{const{type:t,metric:n}=this.extractNotificationMetrics(e);this.emit("did-reject-notification",{notification:n,type:t})}))}extractNotificationMetrics(e){const t=e.options;return{type:t.metricType||e.level,metric:"number"==typeof t.metric?this.NOTIFICATION_METRICS[t.metric]:t.metric,key:t.key||t.metric}}onDidNotify(e){return this.emitter.on("did-notify",e)}onDidRejectNotification(e){return this.emitter.on("did-reject-notification",e)}onDidDismissNotification(e){return this.emitter.on("did-dismiss-notification",e)}onDidClickNotificationButton(e){return this.emitter.on("did-click-notification-button",e)}activateForcedNotifications(){this.forceNotification=!0}deactivateForcedNotifications(){this.forceNotification=!1}dispose(){this.queue.abort(),this.subscriptions.dispose(),this.emitter.dispose(),delete this.app,delete this.subscriptions,delete this.emitter}notify(e){this[this.NOTIFIERS[e]]&&this[this.NOTIFIERS[e]](e)}onboardingNotifications(e){this.queue.addInfo("Kite is now integrated with Atom",{dismissable:!0,description:"Kite is an AI-powered programming assistant that shows you the right information at the right time to keep you in the flow.",buttons:[{text:"Learn how to use Kite",onDidClick(e){atom.applicationDelegate.openExternal("http://help.kite.com/category/43-atom-integration"),atom.config.set("kite.showWelcomeNotificationOnStartup",!1),e&&e()}},{text:"Don't show this again",onDidClick(e){atom.config.set("kite.showWelcomeNotificationOnStartup",!1),e&&e()}}]},{condition:l(c("kite.showWelcomeNotificationOnStartup"),()=>!atom.inSpecMode())})}warnNotSupported(e){let t="Sorry, the Kite engine only supports macOS and Windows at the moment.";switch(i.platform()){case"win32":const e=s.arch();t="64bit"!==e?`Sorry, the Kite engine only supports Windows7 and higher with a 64bit architecture.\n          Your version is actually recognised as: ${e}`:"Sorry, the Kite engine only supports Windows7 and higher.";break;case"darwin":t="Sorry, the Kite engine only supports OSX 10.10 (Yosemite) and higher.";break;case"linux":t="Sorry, the Kite engine only supports Ubuntu 18.04 and higher"}this.queue.addError("Kite doesn't support your OS",{description:t,icon:"circle-slash"},{metric:e})}warnNotInstalled(e){this.app.wasInstalledOnce()||this.queue.addWarning("The Kite engine is not installed",{description:"Install Kite to get Python completions, documentation, and examples.",icon:"circle-slash",buttons:[{text:"Install Kite",metric:"install",onDidClick:e=>{e&&e(),this.app&&this.app.install()}}]},{metric:e})}warnNotRunning(e){Promise.all([s.isKiteInstalled().then(()=>!0).catch(()=>!1),s.isKiteEnterpriseInstalled().then(()=>!0).catch(()=>!1)]).then(([t,n])=>{s.hasManyKiteInstallation()||s.hasManyKiteEnterpriseInstallation()?this.queue.addWarning("The Kite engine is not running",{description:"You have multiple versions of Kite installed. Please launch your desired one.",icon:"circle-slash"},{metric:e}):t&&n?this.queue.addWarning("The Kite engine is not running",{description:"Start the Kite background service to get Python completions, documentation, and examples.",icon:"circle-slash",buttons:[{text:"Start Kite",metric:"start",onDidClick:e=>{e&&e(),this.app&&this.app.start().catch(e=>this.warnFailedStart(e))}},{text:"Start Kite Enterprise",metric:"startEnterprise",onDidClick:e=>{e&&e(),this.app&&this.app.startEnterprise().catch(e=>this.warnFailedStartEnterprise(e))}}]},{metric:e}):t?this.queue.addWarning("The Kite engine is not running",{description:"Start the Kite background service to get Python completions, documentation, and examples.",icon:"circle-slash",buttons:[{text:"Start Kite",metric:"start",onDidClick:e=>{e&&e(),this.app&&this.app.start().catch(e=>this.warnFailedStart(e))}}]},{metric:e}):n&&this.queue.addWarning("The Kite engine is not running",{description:"Start the Kite background service to get Python completions, documentation, and examples.",icon:"circle-slash",buttons:[{text:"Start Kite Enterprise",metric:"startEnterprise",onDidClick:e=>{e&&e(),this.app&&this.app.startEnterprise().catch(e=>this.warnFailedStartEnterprise(e))}}]},{metric:e})})}warnFailedStart(e){this.queue.addError("Unable to start Kite engine",{description:JSON.stringify(e),buttons:[{text:"Retry",metric:"retry",onDidClick:e=>{e&&e(),this.app&&this.app.start().catch(e=>this.warnFailedStart(e))}}]},{metric:"launch"})}warnFailedStartEnterprise(e){this.queue.addError("Unable to start Kite engine",{description:JSON.stringify(e),buttons:[{text:"Retry",metric:"retryEnterprise",onDidClick:e=>{e&&e(),this.app&&this.app.startEnterprise().catch(e=>this.warnFailedStartEnterprise(e))}}]},{metric:"launchEnterprise"})}warnNotReachable(e){this.queue.addError("The Kite background service is running but not reachable",{description:"Try killing Kite from the Activity Monitor."},{metric:e})}warnNotAuthenticated(e){navigator.onLine&&!document.querySelector("kite-login")&&this.queue.addWarning("You need to login to the Kite engine",{description:["Kite needs to be authenticated to access","the index of your code stored on the cloud."].join(" "),icon:"circle-slash",buttons:[{text:"Login",metric:"login",onDidClick:e=>{e&&e(),this.app&&this.app.login()}}]},{metric:e})}warnUnauthorized(e){this.queue.addError("Unable to login",{description:JSON.stringify(e),buttons:[{text:"Retry",metric:"retry",onDidClick:e=>{e&&e(),this.app&&this.app.login()}}]},{metric:"unauthorized"})}warnOnboardingFileFailure(){this.queue.addWarning("We were unable to open the tutorial",{description:"We had an internal error setting up our interactive tutorial. Try again later, or email us at feedback@kite.com",buttons:[{text:"OK",onDidClick:e=>e&&e()}]})}notifyReady(e){this.queue.addSuccess("The Kite engine is ready",{description:"We checked that the autocomplete engine is installed, running, responsive, and authenticated."},{metric:e,metricType:"notification"})}shouldNotify(e){return this.forceNotification||this.app&&this.app.kite.getModule("editors").hasActiveSupportedFile()&&!this.lastShown[e]&&!this.paused}emit(...e){this.emitter&&this.emitter.emit(...e)}truncateLeft(e,t){return e.length<=t?e:`${e.slice(e.length-t)}`}}},function(e,t,n){"use strict";const i=n(157),o=e=>t=>!o.store.getItem(`${e||""}${t.id}`),a=e=>t=>!a.store.getItem(`${e||""}${t.id}`);o.store=localStorage,a.store=new i,e.exports={all:(...e)=>t=>e.every(e=>e(t)),any:(...e)=>t=>e.some(e=>e(t)),fromSetting:(e,t)=>n=>t?atom.config.get(e)===t:atom.config.get(e),once:o,oncePerWindow:a}},function(e,t,n){"use strict";e.exports=class{constructor(){this.content={}}setItem(e,t){return this.content[e]=String(t),t}getItem(e){return this.content[e]}removeItem(e){delete this.content[e]}}},function(e,t,n){"use strict";const{Emitter:i,CompositeDisposable:o}=n(0),a=n(69),s=n(159);e.exports=class{constructor(){this.queue=[],this.promise=Promise.resolve(),this.emitter=new i}onDidNotify(e){return this.emitter.on("did-notify",e)}onDidRejectNotification(e){return this.emitter.on("did-reject-notification",e)}onDidDismissNotification(e){return this.emitter.on("did-dismiss-notification",e)}onDidClickNotificationButton(e){return this.emitter.on("did-click-notification-button",e)}abort(){this.aborted=!0,this.activeNotification&&this.activeNotification.dismiss()}add(e){return this.promise="function"==typeof e?this.promise.then(()=>this.aborted?null:e()).then(e=>(this.activeNotification=e,this.execute(e))).then(()=>{delete this.activeNotification}):this.promise.then(()=>this.aborted?null:(this.activeNotification=e,this.execute(e))).then(()=>{delete this.activeNotification})}execute(e){return e?(this.subscribeToNotification(e),e.execute()):null}subscribeToNotification(e){const t=new o,n=e=>t=>this.emitter.emit(e,t),i=e=>n=>{this.emitter.emit(e,n),t.dispose()};t.add(e.onDidNotify(n("did-notify"))),t.add(e.onDidClickNotificationButton(n("did-click-notification-button"))),t.add(e.onDidDismissNotification(i("did-dismiss-notification"))),t.add(e.onDidRejectNotification(i("did-reject-notification")))}addModal(e,t){return this.add(new s(e,t))}addInfo(e,t,n){return this.add(new a("info",e,t,n))}addSuccess(e,t,n){return this.add(new a("success",e,t,n))}addWarning(e,t,n){return this.add(new a("warning",e,t,n))}addError(e,t,n){return this.add(new a("error",e,t,n))}addFatalError(e,t,n){return this.add(new a("fatalError",e,t,n))}}},function(e,t,n){"use strict";const{Emitter:i}=n(0);e.exports=class{constructor({content:e,buttons:t}={},n={}){this.content=e,this.buttons=t,this.options=n,this.emitter=new i}onDidNotify(e){return this.emitter.on("did-notify",e)}onDidRejectNotification(e){return this.emitter.on("did-reject-notification",e)}onDidDismissNotification(e){return this.emitter.on("did-dismiss-notification",e)}onDidClickNotificationButton(e){return this.emitter.on("did-click-notification-button",e)}dismiss(){this.destroy()}destroy(){this.modal.destroy(),delete this.modal}execute(){return new Promise((e,t)=>{const{condition:n,onDidDestroy:i}=this.options;if(!n||n()){const t=document.createElement("div");if(t.innerHTML=this.content,this.buttons){const e=document.createElement("div");e.className="modal-metrics-row",this.buttons.forEach((t,n)=>{const i=document.createElement("div");i.className="modal-metrics-cell",i.innerHTML=`\n            <button tabindex="${n}"\n                    class="btn btn-${t.className||"default"} btn-block">\n              ${t.text}\n            </button>`,i.querySelector("button").addEventListener("click",()=>{t.onDidClick&&t.onDidClick(this)}),e.appendChild(i)}),t.appendChild(e)}this.modal=atom.workspace.addModalPanel({item:t,autoFocus:!0});const n=this.modal.onDidDestroy(()=>{i&&i(),n.dispose(),this.emitter.dispose(),e()})}else e()})}}},function(e,t,n){"use strict";const i=n(71),{distinctID:o,EDITOR_UUID:a,OS_VERSION:s}=n(12);if(atom.inSpecMode())e.exports=class{dispose(){}};else{window._rollbarConfig={accessToken:"d1aa81c4290d409e847153a29b2872b3",autoInstrument:!1,payload:{environment:"production",distinctID:o(),editor_uuid:a,editor:"atom",atom_version:atom.getVersion(),kite_plugin_version:i.version,os:s}},n(161);class t{constructor(){this.subscription=atom.onDidThrowError(({column:e,line:t,message:n,originalError:i,url:o})=>{/\/kite\/|\/kite-installer\//.test(i.stack)&&!/kite$/.test(atom.project.getPaths()[0]||"")&&window.Rollbar.error(i)})}dispose(){this.subscription&&this.subscription.dispose()}}e.exports=t}},function(e,t,n){!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){var i=n(9),o={},a=!1;function s(e,t){return t===r(e)}function r(e){var t=typeof e;return"object"!==t?t:e?e instanceof Error?"error":{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase():"null"}function c(e){return s(e,"function")}function l(e){var t,n,i=Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),o=RegExp("^"+i+"$");return n=typeof(t=e),null!=t&&("object"==n||"function"==n)&&o.test(e)}function p(e,t,n){var i,o,a,r=s(e,"object"),c=s(e,"array"),l=[];if(r&&-1!==n.indexOf(e))return e;if(n.push(e),r)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&l.push(i);else if(c)for(a=0;a<e.length;++a)l.push(a);var p=r?{}:[],u=!0;for(a=0;a<l.length;++a)o=e[i=l[a]],p[i]=t(i,o,n),u=u&&p[i]===e[i];return 0==l.length||u?e:p}function u(){return"********"}function d(){var e=b();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)})}a||(a=!0,s(JSON,"undefined")||(l(JSON.stringify)&&(o.stringify=JSON.stringify),l(JSON.parse)&&(o.parse=JSON.parse)),c(o.stringify)&&c(o.parse)||n(10)(o));var m={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function h(e,t){var n,i;try{n=o.stringify(e)}catch(o){if(t&&c(t))try{n=t(e)}catch(e){i=e}else i=o}return{error:i,value:n}}function f(e,t){return function(n,i){try{t(n,i)}catch(t){e.error(t)}}}var g=["log","network","dom","navigation","error","manual"],v=["critical","error","warning","info","debug"];function x(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function b(){return Date.now?+Date.now():+new Date}e.exports={addParamsAndAccessTokenToPath:function(e,t,n){(n=n||{}).access_token=e;var i,o=[];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&o.push([i,n[i]].join("="));var a="?"+o.sort().join("&");(t=t||{}).path=t.path||"";var s,r=t.path.indexOf("?"),c=t.path.indexOf("#");-1!==r&&(-1===c||c>r)?(s=t.path,t.path=s.substring(0,r)+a+"&"+s.substring(r+1)):-1!==c?(s=t.path,t.path=s.substring(0,c)+a+s.substring(c)):t.path=t.path+a},createItem:function(e,t,n,o,a){for(var s,c,l,p,u,m,h=[],g=0,v=e.length;g<v;++g){var x=r(m=e[g]);switch(x){case"undefined":break;case"string":s?h.push(m):s=m;break;case"function":p=f(t,m);break;case"date":h.push(m);break;case"error":case"domexception":case"exception":c?h.push(m):c=m;break;case"object":case"array":if(m instanceof Error||"undefined"!=typeof DOMException&&m instanceof DOMException){c?h.push(m):c=m;break}if(o&&"object"===x&&!u){for(var y=0,w=o.length;y<w;++y)if(void 0!==m[o[y]]){u=m;break}if(u)break}l?h.push(m):l=m;break;default:if(m instanceof Error||"undefined"!=typeof DOMException&&m instanceof DOMException){c?h.push(m):c=m;break}h.push(m)}}h.length>0&&((l=i(l)).extraArgs=h);var k={message:s,err:c,custom:l,timestamp:b(),callback:p,uuid:d()};return l&&void 0!==l.level&&(k.level=l.level,delete l.level),o&&u&&(k.request=u),a&&(k.lambdaContext=a),k._originalArgs=e,k},createTelemetryEvent:function(e){for(var t,n,i,o,a=0,s=e.length;a<s;++a)switch(r(o=e[a])){case"string":x(g,o)?t=o:x(v,o)&&(i=o);break;case"object":n=o}return{type:t||"manual",metadata:n||{},level:i}},filterIp:function(e,t){if(e&&e.user_ip&&!0!==t){var n=e.user_ip;if(t)try{var i;if(-1!==n.indexOf("."))(i=n.split(".")).pop(),i.push("0"),n=i.join(".");else if(-1!==n.indexOf(":")){if((i=n.split(":")).length>2){var o=i.slice(0,3),a=o[2].indexOf("/");-1!==a&&(o[2]=o[2].substring(0,a)),n=o.concat("0000:0000:0000:0000:0000").join(":")}}else n=null}catch(e){n=null}else n=null;e.user_ip=n}},formatArgsAsString:function(e){var t,n,i,o=[];for(t=0,n=e.length;t<n;++t){switch(r(i=e[t])){case"object":(i=(i=h(i)).error||i.value).length>500&&(i=i.substr(0,497)+"...");break;case"null":i="null";break;case"undefined":i="undefined";break;case"symbol":i=i.toString()}o.push(i)}return o.join(" ")},formatUrl:function(e,t){if(!(t=t||e.protocol)&&e.port&&(80===e.port?t="http:":443===e.port&&(t="https:")),t=t||"https:",!e.hostname)return null;var n=t+"//"+e.hostname;return e.port&&(n=n+":"+e.port),e.path&&(n+=e.path),n},get:function(e,t){if(e){var n=t.split("."),i=e;try{for(var o=0,a=n.length;o<a;++o)i=i[n[o]]}catch(e){i=void 0}return i}},handleOptions:function(e,t,n){var o=i(e,t,n);return!t||t.overwriteScrubFields?o:(t.scrubFields&&(o.scrubFields=(e.scrubFields||[]).concat(t.scrubFields)),o)},isError:function(e){return s(e,"error")||s(e,"exception")},isFunction:c,isIterable:function(e){var t=r(e);return"object"===t||"array"===t},isNativeFunction:l,isType:s,jsonParse:function(e){var t,n;try{t=o.parse(e)}catch(e){n=e}return{error:n,value:t}},LEVELS:{debug:0,info:1,warning:2,error:3,critical:4},makeUnhandledStackInfo:function(e,t,n,i,o,a,s,r){var c={url:t||"",line:n,column:i};c.func=r.guessFunctionName(c.url,c.line),c.context=r.gatherContext(c.url,c.line);var l=document&&document.location&&document.location.href,p=window&&window.navigator&&window.navigator.userAgent;return{mode:a,message:o?String(o):e||s,url:l,stack:[c],useragent:p}},merge:i,now:b,redact:u,sanitizeUrl:function(e){var t=function(e){if(s(e,"string")){for(var t=m,n=t.parser[t.strictMode?"strict":"loose"].exec(e),i={},o=0,a=t.key.length;o<a;++o)i[t.key[o]]=n[o]||"";return i[t.q.name]={},i[t.key[12]].replace(t.q.parser,function(e,n,o){n&&(i[t.q.name][n]=o)}),i}}(e);return t?(""===t.anchor&&(t.source=t.source.replace("#","")),e=t.source.replace("?"+t.query,"")):"(unknown)"},scrub:function(e,t){var n=function(e){for(var t,n=[],i=0;i<e.length;++i)t="^\\[?(%5[bB])?"+e[i]+"\\[?(%5[bB])?\\]?(%5[dD])?$",n.push(new RegExp(t,"i"));return n}(t=t||[]),i=function(e){for(var t,n=[],i=0;i<e.length;++i)t="\\[?(%5[bB])?"+e[i]+"\\[?(%5[bB])?\\]?(%5[dD])?",n.push(new RegExp("("+t+"=)([^&\\n]+)","igm"));return n}(t);function o(e,t){return t+"********"}return p(e,function e(t,a,r){var c=function(e,t){var i;for(i=0;i<n.length;++i)if(n[i].test(e)){t="********";break}return t}(t,a);return c===a?s(a,"object")||s(a,"array")?p(a,e,r):function(e){var t;if(s(e,"string"))for(t=0;t<i.length;++t)e=e.replace(i[t],o);return e}(c):c},[])},set:function(e,t,n){if(e){var i=t.split("."),o=i.length;if(!(o<1))if(1!==o)try{for(var a=e[i[0]]||{},s=a,r=1;r<o-1;++r)a[i[r]]=a[i[r]]||{},a=a[i[r]];a[i[o-1]]=n,e[i[0]]=s}catch(e){return}else e[i[0]]=n}},stringify:h,traverse:p,typeName:r,uuid4:d}},function(e,t,n){n(16);var i=n(17),o=n(0);e.exports={error:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("Rollbar:"),i.ieVersion()<=8?console.error(o.formatArgsAsString(e)):console.error.apply(console,e)},info:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("Rollbar:"),i.ieVersion()<=8?console.info(o.formatArgsAsString(e)):console.info.apply(console,e)},log:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("Rollbar:"),i.ieVersion()<=8?console.log(o.formatArgsAsString(e)):console.log.apply(console,e)}}},function(e,t,n){var i=n(0);function o(e,t){return[e,i.stringify(e,t)]}function a(e,t){var n=e.length;return n>2*t?e.slice(0,t).concat(e.slice(n-t)):e}function s(e,t,n){n=void 0===n?30:n;var o,s=e.data.body;if(s.trace_chain)for(var r=s.trace_chain,c=0;c<r.length;c++)o=a(o=r[c].frames,n),r[c].frames=o;else s.trace&&(o=a(o=s.trace.frames,n),s.trace.frames=o);return[e,i.stringify(e,t)]}function r(e,t){return t&&t.length>e?t.slice(0,e-3).concat("..."):t}function c(e,t,n){return[t=i.traverse(t,function t(n,o,a){switch(i.typeName(o)){case"string":return r(e,o);case"object":case"array":return i.traverse(o,t,a);default:return o}},[]),i.stringify(t,n)]}function l(e){return e.exception&&(delete e.exception.description,e.exception.message=r(255,e.exception.message)),e.frames=a(e.frames,1),e}function p(e,t){var n=e.data.body;if(n.trace_chain)for(var o=n.trace_chain,a=0;a<o.length;a++)o[a]=l(o[a]);else n.trace&&(n.trace=l(n.trace));return[e,i.stringify(e,t)]}function u(e,t){return e.length>t}e.exports={truncate:function(e,t,n){n=void 0===n?524288:n;for(var i,a,r,l=[o,s,c.bind(null,1024),c.bind(null,512),c.bind(null,256),p];i=l.shift();)if(e=(a=i(e,t))[0],(r=a[1]).error||!u(r.value,n))return r;return r},raw:o,truncateFrames:s,truncateStrings:c,maybeTruncateValue:r}},function(e,t){e.exports={parse:function(e){var t,n,i={protocol:null,auth:null,host:null,path:null,hash:null,href:e,hostname:null,port:null,pathname:null,search:null,query:null};if(-1!==(t=e.indexOf("//"))?(i.protocol=e.substring(0,t),n=t+2):n=0,-1!==(t=e.indexOf("@",n))&&(i.auth=e.substring(n,t),n=t+1),-1===(t=e.indexOf("/",n))){if(-1===(t=e.indexOf("?",n)))return-1===(t=e.indexOf("#",n))?i.host=e.substring(n):(i.host=e.substring(n,t),i.hash=e.substring(t)),i.hostname=i.host.split(":")[0],i.port=i.host.split(":")[1],i.port&&(i.port=parseInt(i.port,10)),i;i.host=e.substring(n,t),i.hostname=i.host.split(":")[0],i.port=i.host.split(":")[1],i.port&&(i.port=parseInt(i.port,10)),n=t}else i.host=e.substring(n,t),i.hostname=i.host.split(":")[0],i.port=i.host.split(":")[1],i.port&&(i.port=parseInt(i.port,10)),n=t;if(-1===(t=e.indexOf("#",n))?i.path=e.substring(n):(i.path=e.substring(n,t),i.hash=e.substring(t)),i.path){var o=i.path.split("?");i.pathname=o[0],i.query=o[1],i.search=i.query?"?"+i.query:null}return i}}},function(e,t,n){var i=n(21),o="?",a=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");function s(){return null}function r(e){var t={};return t._stackFrame=e,t.url=e.fileName,t.line=e.lineNumber,t.func=e.functionName,t.column=e.columnNumber,t.args=e.args,t.context=null,t}function c(e){var t=e.constructor&&e.constructor.name;return(!t||!t.length||t.length<3)&&(t=e.name),{stack:function(){var t,n=[];if(e.stack)t=e;else try{throw e}catch(e){t=e}try{n=i.parse(t)}catch(e){n=[]}for(var o=[],a=0;a<n.length;a++)o.push(new r(n[a]));return o}(),message:e.message,name:t,rawStack:e.stack,rawException:e}}e.exports={guessFunctionName:function(){return o},guessErrorClass:function(e){if(!e||!e.match)return["Unknown error. There was no error message to display.",""];var t=e.match(a),n="(unknown)";return t&&(n=t[t.length-1],e=(e=e.replace((t[t.length-2]||"")+n+":","")).replace(/(^[\s]+|[\s]+$)/g,"")),[n,e]},gatherContext:s,parse:function(e){return new c(e)},Stack:c,Frame:r}},function(e,t,n){var i=n(6),o="undefined"!=typeof window&&window._rollbarConfig,a=o&&o.globalAlias||"Rollbar",s="undefined"!=typeof window&&window[a]&&"function"==typeof window[a].shimId&&void 0!==window[a].shimId();if("undefined"==typeof window||window._rollbarStartTime||(window._rollbarStartTime=(new Date).getTime()),!s&&o){var r=new i(o);window[a]=r}else"undefined"!=typeof window?(window.rollbar=i,window._rollbarDidLoad=!0):"undefined"!=typeof self&&(self.rollbar=i,self._rollbarDidLoad=!0);e.exports=i},function(e,t,n){var i=n(7),o=n(0),a=n(14),s=n(1),r=n(18),c=n(19),l=n(3),p=n(20),u=n(23),d=n(24),m=n(25),h=n(4),f=n(26);function g(e,t){this.options=o.handleOptions(w,e);var n=new a(this.options,c,l);this.client=t||new i(this.options,n,s,"browser");var r=y(),h="undefined"!=typeof document&&document;!function(e,t){e.addTransform(p.handleItemWithError).addTransform(p.ensureItemHasSomethingToSay).addTransform(p.addBaseInfo).addTransform(p.addRequestInfo(t)).addTransform(p.addClientInfo(t)).addTransform(p.addPluginInfo(t)).addTransform(p.addBody).addTransform(u.addMessageWithError).addTransform(u.addTelemetryData).addTransform(u.addConfigToPayload).addTransform(p.scrubPayload).addTransform(u.userTransform(s)).addTransform(u.itemToPayload)}(this.client.notifier,r),this.client.queue.addPredicate(m.checkLevel).addPredicate(d.checkIgnore).addPredicate(m.userCheckIgnore(s)).addPredicate(m.urlIsNotBlacklisted(s)).addPredicate(m.urlIsWhitelisted(s)).addPredicate(m.messageIsIgnored(s)),this.setupUnhandledCapture(),this.instrumenter=new f(this.options,this.client.telemeter,this,r,h),this.instrumenter.instrument()}var v=null;function x(e){var t="Rollbar is not initialized";s.error(t),e&&e(new Error(t))}function b(e){for(var t=0,n=e.length;t<n;++t)if(o.isFunction(e[t]))return e[t]}function y(){return"undefined"!=typeof window&&window||"undefined"!=typeof self&&self}g.init=function(e,t){return v?v.global(e).configure(e):v=new g(e,t)},g.prototype.global=function(e){return this.client.global(e),this},g.global=function(e){if(v)return v.global(e);x()},g.prototype.configure=function(e,t){var n=this.options,i={};return t&&(i={payload:t}),this.options=o.handleOptions(n,e,i),this.client.configure(this.options,t),this.instrumenter.configure(this.options),this.setupUnhandledCapture(),this},g.configure=function(e,t){if(v)return v.configure(e,t);x()},g.prototype.lastError=function(){return this.client.lastError},g.lastError=function(){if(v)return v.lastError();x()},g.prototype.log=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.log(e),{uuid:t}},g.log=function(){if(v)return v.log.apply(v,arguments);x(b(arguments))},g.prototype.debug=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.debug(e),{uuid:t}},g.debug=function(){if(v)return v.debug.apply(v,arguments);x(b(arguments))},g.prototype.info=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.info(e),{uuid:t}},g.info=function(){if(v)return v.info.apply(v,arguments);x(b(arguments))},g.prototype.warn=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.warn(e),{uuid:t}},g.warn=function(){if(v)return v.warn.apply(v,arguments);x(b(arguments))},g.prototype.warning=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.warning(e),{uuid:t}},g.warning=function(){if(v)return v.warning.apply(v,arguments);x(b(arguments))},g.prototype.error=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.error(e),{uuid:t}},g.error=function(){if(v)return v.error.apply(v,arguments);x(b(arguments))},g.prototype.critical=function(){var e=this._createItem(arguments),t=e.uuid;return this.client.critical(e),{uuid:t}},g.critical=function(){if(v)return v.critical.apply(v,arguments);x(b(arguments))},g.prototype.buildJsonPayload=function(e){return this.client.buildJsonPayload(e)},g.buildJsonPayload=function(){if(v)return v.buildJsonPayload.apply(v,arguments);x()},g.prototype.sendJsonPayload=function(e){return this.client.sendJsonPayload(e)},g.sendJsonPayload=function(){if(v)return v.sendJsonPayload.apply(v,arguments);x()},g.prototype.setupUnhandledCapture=function(){var e=y();this.unhandledExceptionsInitialized||(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&(r.captureUncaughtExceptions(e,this),r.wrapGlobals(e,this),this.unhandledExceptionsInitialized=!0),this.unhandledRejectionsInitialized||(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&(r.captureUnhandledRejections(e,this),this.unhandledRejectionsInitialized=!0)},g.prototype.handleUncaughtException=function(e,t,n,i,a,s){if(this.options.captureUncaught||this.options.handleUncaughtExceptions){var r,c=o.makeUnhandledStackInfo(e,t,n,i,a,"onerror","uncaught exception",h);o.isError(a)?(r=this._createItem([e,a,s]))._unhandledStackInfo=c:o.isError(t)?(r=this._createItem([e,t,s]))._unhandledStackInfo=c:(r=this._createItem([e,s])).stackInfo=c,r.level=this.options.uncaughtErrorLevel,r._isUncaught=!0,this.client.log(r)}},g.prototype.handleUnhandledRejection=function(e,t){if(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections){var n="unhandled rejection was null or undefined!";if(e)if(e.message)n=e.message;else{var i=o.stringify(e);i.value&&(n=i.value)}var a,s=e&&e._rollbarContext||t&&t._rollbarContext;o.isError(e)?a=this._createItem([n,e,s]):(a=this._createItem([n,e,s])).stackInfo=o.makeUnhandledStackInfo(n,"",0,0,null,"unhandledrejection","",h),a.level=this.options.uncaughtErrorLevel,a._isUncaught=!0,a._originalArgs=a._originalArgs||[],a._originalArgs.push(t),this.client.log(a)}},g.prototype.wrap=function(e,t,n){try{var i;if(i=o.isFunction(t)?t:function(){return t||{}},!o.isFunction(e))return e;if(e._isWrap)return e;if(!e._rollbar_wrapped&&(e._rollbar_wrapped=function(){n&&o.isFunction(n)&&n.apply(this,arguments);try{return e.apply(this,arguments)}catch(n){var t=n;throw t&&window._rollbarWrappedError!==t&&(o.isType(t,"string")&&(t=new String(t)),t._rollbarContext=i()||{},t._rollbarContext._wrappedSource=e.toString(),window._rollbarWrappedError=t),t}},e._rollbar_wrapped._isWrap=!0,e.hasOwnProperty))for(var a in e)e.hasOwnProperty(a)&&"_rollbar_wrapped"!==a&&(e._rollbar_wrapped[a]=e[a]);return e._rollbar_wrapped}catch(t){return e}},g.wrap=function(e,t){if(v)return v.wrap(e,t);x()},g.prototype.captureEvent=function(){var e=o.createTelemetryEvent(arguments);return this.client.captureEvent(e.type,e.metadata,e.level)},g.captureEvent=function(){if(v)return v.captureEvent.apply(v,arguments);x()},g.prototype.captureDomContentLoaded=function(e,t){return t||(t=new Date),this.client.captureDomContentLoaded(t)},g.prototype.captureLoad=function(e,t){return t||(t=new Date),this.client.captureLoad(t)},g.prototype._createItem=function(e){return o.createItem(e,s,this)};var w={version:"2.7.0",scrubFields:["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","secret_key","secretKey","secretToken","cc-number","card number","cardnumber","cardnum","ccnum","ccnumber","cc num","creditcardnumber","credit card number","newcreditcardnumber","new credit card","creditcardno","credit card no","card#","card #","cc-csc","cvc2","cvv2","ccv2","security code","card verification","name on credit card","name on card","nameoncard","cardholder","card holder","name des karteninhabers","card type","cardtype","cc type","cctype","payment type","expiration date","expirationdate","expdate","cc-exp"],logLevel:"debug",reportLevel:"debug",uncaughtErrorLevel:"error",endpoint:"api.rollbar.com/api/1/item/",verbose:!1,enabled:!0,sendConfig:!1,includeItemsInTelemetry:!0,captureIp:!0};e.exports=g},function(e,t,n){var i=n(8),o=n(11),a=n(12),s=n(13),r=n(0);function c(e,t,n,i){this.options=r.merge(e),this.logger=n,c.rateLimiter.configureGlobal(this.options),c.rateLimiter.setPlatformOptions(i,this.options),this.api=t,this.queue=new o(c.rateLimiter,t,n,this.options),this.notifier=new a(this.queue,this.options),this.telemeter=new s(this.options),this.lastError=null,this.lastErrorHash="none"}c.rateLimiter=new i({maxItems:0,itemsPerMinute:60}),c.prototype.global=function(e){return c.rateLimiter.configureGlobal(e),this},c.prototype.configure=function(e,t){var n=this.options,i={};return t&&(i={payload:t}),this.options=r.merge(n,e,i),this.notifier&&this.notifier.configure(this.options),this.telemeter&&this.telemeter.configure(this.options),this.global(this.options),this},c.prototype.log=function(e){var t=this._defaultLogLevel();return this._log(t,e)},c.prototype.debug=function(e){this._log("debug",e)},c.prototype.info=function(e){this._log("info",e)},c.prototype.warn=function(e){this._log("warning",e)},c.prototype.warning=function(e){this._log("warning",e)},c.prototype.error=function(e){this._log("error",e)},c.prototype.critical=function(e){this._log("critical",e)},c.prototype.wait=function(e){this.queue.wait(e)},c.prototype.captureEvent=function(e,t,n){return this.telemeter.captureEvent(e,t,n)},c.prototype.captureDomContentLoaded=function(e){return this.telemeter.captureDomContentLoaded(e)},c.prototype.captureLoad=function(e){return this.telemeter.captureLoad(e)},c.prototype.buildJsonPayload=function(e){return this.api.buildJsonPayload(e)},c.prototype.sendJsonPayload=function(e){this.api.postJsonPayload(e)},c.prototype._log=function(e,t){var n;if(t.callback&&(n=t.callback,delete t.callback),this._sameAsLastError(t)){if(n){var i=new Error("ignored identical item");i.item=t,n(i)}}else try{t.level=t.level||e,this.telemeter._captureRollbarItem(t),t.telemetryEvents=this.telemeter.copyEvents(),this.notifier.log(t,n)}catch(e){this.logger.error(e)}},c.prototype._defaultLogLevel=function(){return this.options.logLevel||"debug"},c.prototype._sameAsLastError=function(e){if(!e._isUncaught)return!1;var t=function(e){var t=e.message||"",n=(e.err||{}).stack||String(e.err);return t+"::"+n}(e);return this.lastErrorHash===t||(this.lastError=e.err,this.lastErrorHash=t,!1)},e.exports=c},function(e,t,n){var i=n(0);function o(e){this.startTime=i.now(),this.counter=0,this.perMinCounter=0,this.platform=null,this.platformOptions={},this.configureGlobal(e)}function a(e,t,n){return!e.ignoreRateLimit&&t>=1&&n>t}function s(e,t,n,i,o,a,s){var r=null;return n&&(n=new Error(n)),n||i||(r=function(e,t,n,i,o){var a,s=t.environment||t.payload&&t.payload.environment;a=o?"item per minute limit reached, ignoring errors until timeout":"maxItems has been hit, ignoring errors until reset.";var r={body:{message:{body:a,extra:{maxItems:n,itemsPerMinute:i}}},language:"javascript",environment:s,notifier:{version:t.notifier&&t.notifier.version||t.version}};"browser"===e?(r.platform="browser",r.framework="browser-js",r.notifier.name="rollbar-browser-js"):"server"===e?(r.framework=t.framework||"node-js",r.notifier.name=t.notifier.name):"react-native"===e&&(r.framework=t.framework||"react-native",r.notifier.name=t.notifier.name);return r}(e,t,o,a,s)),{error:n,shouldSend:i,payload:r}}o.globalSettings={startTime:i.now(),maxItems:void 0,itemsPerMinute:void 0},o.prototype.configureGlobal=function(e){void 0!==e.startTime&&(o.globalSettings.startTime=e.startTime),void 0!==e.maxItems&&(o.globalSettings.maxItems=e.maxItems),void 0!==e.itemsPerMinute&&(o.globalSettings.itemsPerMinute=e.itemsPerMinute)},o.prototype.shouldSend=function(e,t){var n=(t=t||i.now())-this.startTime;(n<0||n>=6e4)&&(this.startTime=t,this.perMinCounter=0);var r=o.globalSettings.maxItems,c=o.globalSettings.itemsPerMinute;if(a(e,r,this.counter))return s(this.platform,this.platformOptions,r+" max items reached",!1);if(a(e,c,this.perMinCounter))return s(this.platform,this.platformOptions,c+" items per minute reached",!1);this.counter++,this.perMinCounter++;var l=!a(e,r,this.counter),p=l;return l=l&&!a(e,c,this.perMinCounter),s(this.platform,this.platformOptions,null,l,r,c,p)},o.prototype.setPlatformOptions=function(e,t){this.platform=e,this.platformOptions=t},e.exports=o},function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=function(e){if(!e||"[object Object]"!==o.call(e))return!1;var t,n=i.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!a)return!1;for(t in e);return void 0===t||i.call(e,t)};e.exports=function e(){var t,n,i,o,s,r={},c=null,l=arguments.length;for(t=0;t<l;t++)if(null!=(c=arguments[t]))for(s in c)n=r[s],r!==(i=c[s])&&(i&&a(i)?(o=n&&a(n)?n:{},r[s]=e(o,i)):void 0!==i&&(r[s]=i));return r}},function(e,t){e.exports=function(e){var t,n,i,o,a=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function s(e){return e<10?"0"+e:e}function r(){return this.valueOf()}function c(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+s(this.getUTCMonth()+1)+"-"+s(this.getUTCDate())+"T"+s(this.getUTCHours())+":"+s(this.getUTCMinutes())+":"+s(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=r,Number.prototype.toJSON=r,String.prototype.toJSON=r),"function"!=typeof e.stringify&&(i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e.stringify=function(e,i,a){var s;if(t="",n="","number"==typeof a)for(s=0;s<a;s+=1)n+=" ";else"string"==typeof a&&(n=a);if(o=i,i&&"function"!=typeof i&&("object"!=typeof i||"number"!=typeof i.length))throw new Error("JSON.stringify");return function e(i,a){var s,r,l,p,u,d=t,m=a[i];switch(m&&"object"==typeof m&&"function"==typeof m.toJSON&&(m=m.toJSON(i)),"function"==typeof o&&(m=o.call(a,i,m)),typeof m){case"string":return c(m);case"number":return isFinite(m)?String(m):"null";case"boolean":case"null":return String(m);case"object":if(!m)return"null";if(t+=n,u=[],"[object Array]"===Object.prototype.toString.apply(m)){for(p=m.length,s=0;s<p;s+=1)u[s]=e(s,m)||"null";return l=0===u.length?"[]":t?"[\n"+t+u.join(",\n"+t)+"\n"+d+"]":"["+u.join(",")+"]",t=d,l}if(o&&"object"==typeof o)for(p=o.length,s=0;s<p;s+=1)"string"==typeof o[s]&&(l=e(r=o[s],m))&&u.push(c(r)+(t?": ":":")+l);else for(r in m)Object.prototype.hasOwnProperty.call(m,r)&&(l=e(r,m))&&u.push(c(r)+(t?": ":":")+l);return l=0===u.length?"{}":t?"{\n"+t+u.join(",\n"+t)+"\n"+d+"}":"{"+u.join(",")+"}",t=d,l}}("",{"":e})}),"function"!=typeof e.parse&&(e.parse=(h={"\\":"\\",'"':'"',"/":"/",t:"\t",n:"\n",r:"\r",f:"\f",b:"\b"},f={go:function(){l="ok"},firstokey:function(){d=m,l="colon"},okey:function(){d=m,l="colon"},ovalue:function(){l="ocomma"},firstavalue:function(){l="acomma"},avalue:function(){l="acomma"}},g={go:function(){l="ok"},ovalue:function(){l="ocomma"},firstavalue:function(){l="acomma"},avalue:function(){l="acomma"}},v={"{":{go:function(){p.push({state:"ok"}),u={},l="firstokey"},ovalue:function(){p.push({container:u,state:"ocomma",key:d}),u={},l="firstokey"},firstavalue:function(){p.push({container:u,state:"acomma"}),u={},l="firstokey"},avalue:function(){p.push({container:u,state:"acomma"}),u={},l="firstokey"}},"}":{firstokey:function(){var e=p.pop();m=u,u=e.container,d=e.key,l=e.state},ocomma:function(){var e=p.pop();u[d]=m,m=u,u=e.container,d=e.key,l=e.state}},"[":{go:function(){p.push({state:"ok"}),u=[],l="firstavalue"},ovalue:function(){p.push({container:u,state:"ocomma",key:d}),u=[],l="firstavalue"},firstavalue:function(){p.push({container:u,state:"acomma"}),u=[],l="firstavalue"},avalue:function(){p.push({container:u,state:"acomma"}),u=[],l="firstavalue"}},"]":{firstavalue:function(){var e=p.pop();m=u,u=e.container,d=e.key,l=e.state},acomma:function(){var e=p.pop();u.push(m),m=u,u=e.container,d=e.key,l=e.state}},":":{colon:function(){if(Object.hasOwnProperty.call(u,d))throw new SyntaxError("Duplicate key '"+d+'"');l="ovalue"}},",":{ocomma:function(){u[d]=m,l="okey"},acomma:function(){u.push(m),l="avalue"}},true:{go:function(){m=!0,l="ok"},ovalue:function(){m=!0,l="ocomma"},firstavalue:function(){m=!0,l="acomma"},avalue:function(){m=!0,l="acomma"}},false:{go:function(){m=!1,l="ok"},ovalue:function(){m=!1,l="ocomma"},firstavalue:function(){m=!1,l="acomma"},avalue:function(){m=!1,l="acomma"}},null:{go:function(){m=null,l="ok"},ovalue:function(){m=null,l="ocomma"},firstavalue:function(){m=null,l="acomma"},avalue:function(){m=null,l="acomma"}}},function(e,t){var n,i,o=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;l="go",p=[];try{for(;n=o.exec(e);)n[1]?v[n[1]][l]():n[2]?(m=+n[2],g[l]()):(i=n[3],m=i.replace(/\\(?:u(.{4})|([^u]))/g,function(e,t,n){return t?String.fromCharCode(parseInt(t,16)):h[n]}),f[l]()),e=e.slice(n[0].length)}catch(e){l=e}if("ok"!==l||/[^\u0020\t\n\r]/.test(e))throw l instanceof SyntaxError?l:new SyntaxError("JSON");return"function"==typeof t?function e(n,i){var o,a,s=n[i];if(s&&"object"==typeof s)for(o in m)Object.prototype.hasOwnProperty.call(s,o)&&(void 0!==(a=e(s,o))?s[o]=a:delete s[o]);return t.call(n,i,s)}({"":m},""):m}));var l,p,u,d,m,h,f,g,v}},function(e,t,n){var i=n(0);function o(e,t,n,i){this.rateLimiter=e,this.api=t,this.logger=n,this.options=i,this.predicates=[],this.pendingItems=[],this.pendingRequests=[],this.retryQueue=[],this.retryHandle=null,this.waitCallback=null,this.waitIntervalID=null}o.prototype.configure=function(e){this.api&&this.api.configure(e);var t=this.options;return this.options=i.merge(t,e),this},o.prototype.addPredicate=function(e){return i.isFunction(e)&&this.predicates.push(e),this},o.prototype.addPendingItem=function(e){this.pendingItems.push(e)},o.prototype.removePendingItem=function(e){var t=this.pendingItems.indexOf(e);-1!==t&&this.pendingItems.splice(t,1)},o.prototype.addItem=function(e,t,n,o){t&&i.isFunction(t)||(t=function(){});var a=this._applyPredicates(e);if(a.stop)return this.removePendingItem(o),void t(a.err);this._maybeLog(e,n),this.removePendingItem(o),this.pendingRequests.push(e);try{this._makeApiRequest(e,function(n,i){this._dequeuePendingRequest(e),t(n,i)}.bind(this))}catch(n){this._dequeuePendingRequest(e),t(n)}},o.prototype.wait=function(e){i.isFunction(e)&&(this.waitCallback=e,this._maybeCallWait()||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitIntervalID=setInterval(function(){this._maybeCallWait()}.bind(this),500)))},o.prototype._applyPredicates=function(e){for(var t=null,n=0,i=this.predicates.length;n<i;n++)if(!(t=this.predicates[n](e,this.options))||void 0!==t.err)return{stop:!0,err:t.err};return{stop:!1,err:null}},o.prototype._makeApiRequest=function(e,t){var n=this.rateLimiter.shouldSend(e);n.shouldSend?this.api.postItem(e,function(n,i){n?this._maybeRetry(n,e,t):t(n,i)}.bind(this)):n.error?t(n.error):this.api.postItem(n.payload,t)};var a=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN"];o.prototype._maybeRetry=function(e,t,n){var i=!1;if(this.options.retryInterval)for(var o=0,s=a.length;o<s;o++)if(e.code===a[o]){i=!0;break}i?this._retryApiRequest(t,n):n(e)},o.prototype._retryApiRequest=function(e,t){this.retryQueue.push({item:e,callback:t}),this.retryHandle||(this.retryHandle=setInterval(function(){for(;this.retryQueue.length;){var e=this.retryQueue.shift();this._makeApiRequest(e.item,e.callback)}}.bind(this),this.options.retryInterval))},o.prototype._dequeuePendingRequest=function(e){var t=this.pendingRequests.indexOf(e);-1!==t&&(this.pendingRequests.splice(t,1),this._maybeCallWait())},o.prototype._maybeLog=function(e,t){if(this.logger&&this.options.verbose){var n=t;if(n=(n=n||i.get(e,"body.trace.exception.message"))||i.get(e,"body.trace_chain.0.exception.message"))return void this.logger.error(n);(n=i.get(e,"body.message.body"))&&this.logger.log(n)}},o.prototype._maybeCallWait=function(){return!(!i.isFunction(this.waitCallback)||0!==this.pendingItems.length||0!==this.pendingRequests.length)&&(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitCallback(),!0)},e.exports=o},function(e,t,n){var i=n(0);function o(e,t){this.queue=e,this.options=t,this.transforms=[]}o.prototype.configure=function(e){this.queue&&this.queue.configure(e);var t=this.options;return this.options=i.merge(t,e),this},o.prototype.addTransform=function(e){return i.isFunction(e)&&this.transforms.push(e),this},o.prototype.log=function(e,t){if(t&&i.isFunction(t)||(t=function(){}),!this.options.enabled)return t(new Error("Rollbar is not enabled"));this.queue.addPendingItem(e);var n=e.err;this._applyTransforms(e,function(i,o){if(i)return this.queue.removePendingItem(e),t(i,null);this.queue.addItem(o,t,n,e)}.bind(this))},o.prototype._applyTransforms=function(e,t){var n=-1,i=this.transforms.length,o=this.transforms,a=this.options,s=function(e,r){e?t(e,null):++n!==i?o[n](r,a,s):t(null,r)};s(null,e)},e.exports=o},function(e,t,n){var i=n(0),o=100;function a(e){this.queue=[],this.options=i.merge(e);var t=this.options.maxTelemetryEvents||o;this.maxQueueSize=Math.max(0,Math.min(t,o))}function s(e,t){if(t)return t;return{error:"error",manual:"info"}[e]||"info"}a.prototype.configure=function(e){var t=this.options;this.options=i.merge(t,e);var n=this.options.maxTelemetryEvents||o,a=Math.max(0,Math.min(n,o)),s=0;this.maxQueueSize>a&&(s=this.maxQueueSize-a),this.maxQueueSize=a,this.queue.splice(0,s)},a.prototype.copyEvents=function(){var e=Array.prototype.slice.call(this.queue,0);if(i.isFunction(this.options.filterTelemetry))try{for(var t=e.length;t--;)this.options.filterTelemetry(e[t])&&e.splice(t,1)}catch(e){this.options.filterTelemetry=null}return e},a.prototype.capture=function(e,t,n,o,a){var r={level:s(e,n),type:e,timestamp_ms:a||i.now(),body:t,source:"client"};o&&(r.uuid=o);try{if(i.isFunction(this.options.filterTelemetry)&&this.options.filterTelemetry(r))return!1}catch(e){this.options.filterTelemetry=null}return this.push(r),r},a.prototype.captureEvent=function(e,t,n,i){return this.capture(e,t,n,i)},a.prototype.captureError=function(e,t,n,i){var o={message:e.message||String(e)};return e.stack&&(o.stack=e.stack),this.capture("error",o,t,n,i)},a.prototype.captureLog=function(e,t,n,i){return this.capture("log",{message:e},t,n,i)},a.prototype.captureNetwork=function(e,t,n,i){t=t||"xhr",e.subtype=e.subtype||t,i&&(e.request=i);var o=this.levelFromStatus(e.status_code);return this.capture("network",e,o,n)},a.prototype.levelFromStatus=function(e){return e>=200&&e<400?"info":0===e||e>=400?"error":"info"},a.prototype.captureDom=function(e,t,n,i,o){var a={subtype:e,element:t};return void 0!==n&&(a.value=n),void 0!==i&&(a.checked=i),this.capture("dom",a,"info",o)},a.prototype.captureNavigation=function(e,t,n){return this.capture("navigation",{from:e,to:t},"info",n)},a.prototype.captureDomContentLoaded=function(e){return this.capture("navigation",{subtype:"DOMContentLoaded"},"info",void 0,e&&e.getTime())},a.prototype.captureLoad=function(e){return this.capture("navigation",{subtype:"load"},"info",void 0,e&&e.getTime())},a.prototype.captureConnectivityChange=function(e,t){return this.captureNetwork({change:e},"connectivity",t)},a.prototype._captureRollbarItem=function(e){if(this.options.includeItemsInTelemetry)return e.err?this.captureError(e.err,e.level,e.uuid,e.timestamp):e.message?this.captureLog(e.message,e.level,e.uuid,e.timestamp):e.custom?this.capture("log",e.custom,e.level,e.uuid,e.timestamp):void 0},a.prototype.push=function(e){this.queue.push(e),this.queue.length>this.maxQueueSize&&this.queue.shift()},e.exports=a},function(e,t,n){var i=n(0),o=n(15),a=n(2),s={hostname:"api.rollbar.com",path:"/api/1/item/",search:null,version:"1",protocol:"https:",port:443};function r(e,t,n,i){this.options=e,this.transport=t,this.url=n,this.jsonBackup=i,this.accessToken=e.accessToken,this.transportOptions=c(e,n)}function c(e,t){return o.getTransportFromOptions(e,s,t)}r.prototype.postItem=function(e,t){var n=o.transportOptions(this.transportOptions,"POST"),i=o.buildPayload(this.accessToken,e,this.jsonBackup);this.transport.post(this.accessToken,n,i,t)},r.prototype.buildJsonPayload=function(e,t){var n=o.buildPayload(this.accessToken,e,this.jsonBackup),i=a.truncate(n);return i.error?(t&&t(i.error),null):i.value},r.prototype.postJsonPayload=function(e,t){var n=o.transportOptions(this.transportOptions,"POST");this.transport.postJsonPayload(this.accessToken,n,e,t)},r.prototype.configure=function(e){var t=this.oldOptions;return this.options=i.merge(t,e),this.transportOptions=c(this.options,this.url),void 0!==this.options.accessToken&&(this.accessToken=this.options.accessToken),this},e.exports=r},function(e,t,n){var i=n(0);e.exports={buildPayload:function(e,t,n){if(!i.isType(t.context,"string")){var o=i.stringify(t.context,n);o.error?t.context="Error: could not serialize 'context'":t.context=o.value||"",t.context.length>255&&(t.context=t.context.substr(0,255))}return{access_token:e,data:t}},getTransportFromOptions:function(e,t,n){var i=t.hostname,o=t.protocol,a=t.port,s=t.path,r=t.search,c=e.proxy;if(e.endpoint){var l=n.parse(e.endpoint);i=l.hostname,o=l.protocol,a=l.port,s=l.pathname,r=l.search}return{hostname:i,protocol:o,port:a,path:s,search:r,proxy:c}},transportOptions:function(e,t){var n=e.protocol||"https:",i=e.port||("http:"===n?80:"https:"===n?443:void 0),o=e.hostname,a=e.path;return e.search&&(a+=e.search),e.proxy&&(a=n+"//"+o+a,o=e.proxy.host||e.proxy.hostname,i=e.proxy.port,n=e.proxy.protocol||n),{protocol:n,hostname:o,path:a,port:i,method:t}},appendPathToPath:function(e,t){var n=/\/$/.test(e),i=/^\//.test(t);return n&&i?t=t.substring(1):n||i||(t="/"+t),e+t}}},function(e,t){!function(e){"use strict";e.console||(e.console={});for(var t,n,i=e.console,o=function(){},a=["memory"],s="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=a.pop();)i[t]||(i[t]={});for(;n=s.pop();)i[n]||(i[n]=o)}("undefined"==typeof window?this:window)},function(e,t){var n={ieVersion:function(){if(document){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e>4?e:void 0}}};e.exports=n},function(e,t){function n(e,t,n){if(t.hasOwnProperty&&t.hasOwnProperty("addEventListener")){for(var i=t.addEventListener;i._rollbarOldAdd&&i.belongsToShim;)i=i._rollbarOldAdd;var o=function(t,n,o){i.call(this,t,e.wrap(n),o)};o._rollbarOldAdd=i,o.belongsToShim=n,t.addEventListener=o;for(var a=t.removeEventListener;a._rollbarOldRemove&&a.belongsToShim;)a=a._rollbarOldRemove;var s=function(e,t,n){a.call(this,e,t&&t._rollbar_wrapped||t,n)};s._rollbarOldRemove=a,s.belongsToShim=n,t.removeEventListener=s}}e.exports={captureUncaughtExceptions:function(e,t,n){if(e){var i;if("function"==typeof t._rollbarOldOnError)i=t._rollbarOldOnError;else if(e.onerror){for(i=e.onerror;i._rollbarOldOnError;)i=i._rollbarOldOnError;t._rollbarOldOnError=i}var o=function(){var n=Array.prototype.slice.call(arguments,0);!function(e,t,n,i){e._rollbarWrappedError&&(i[4]||(i[4]=e._rollbarWrappedError),i[5]||(i[5]=e._rollbarWrappedError._rollbarContext),e._rollbarWrappedError=null),t.handleUncaughtException.apply(t,i),n&&n.apply(e,i)}(e,t,i,n)};n&&(o._rollbarOldOnError=i),e.onerror=o}},captureUnhandledRejections:function(e,t,n){if(e){"function"==typeof e._rollbarURH&&e._rollbarURH.belongsToShim&&e.removeEventListener("unhandledrejection",e._rollbarURH);var i=function(e){var n,i,o;try{n=e.reason}catch(e){n=void 0}try{i=e.promise}catch(e){i="[unhandledrejection] error getting `promise` from event"}try{o=e.detail,!n&&o&&(n=o.reason,i=o.promise)}catch(e){}n||(n="[unhandledrejection] error getting `reason` from event"),t&&t.handleUnhandledRejection&&t.handleUnhandledRejection(n,i)};i.belongsToShim=n,e._rollbarURH=i,e.addEventListener("unhandledrejection",i)}},wrapGlobals:function(e,t,i){if(e){var o,a,s="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(o=0;o<s.length;++o)e[a=s[o]]&&e[a].prototype&&n(t,e[a].prototype,i)}}}},function(e,t,n){var i=n(0),o=n(2),a=n(1);function s(e,t,n,i,o,a){var s="undefined"!=typeof window&&window||"undefined"!=typeof self&&self,c=s&&s.Zone&&s.Zone.current;c&&"angular"===c._name?c._parent.run(function(){r(e,t,n,i,o,a)}):r(e,t,n,i,o,a)}function r(e,t,n,o,s,r){if("undefined"!=typeof RollbarProxy)return function(e,t){(new RollbarProxy).sendJsonPayload(e,function(e){},function(e){t(new Error(e))})}(o,s);var l;if(!(l=r?r():function(){var e,t,n=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],i=n.length;for(t=0;t<i;t++)try{e=n[t]();break}catch(e){}return e}()))return s(new Error("No way to send a request"));try{try{var p=function(){try{if(p&&4===l.readyState){p=void 0;var e=i.jsonParse(l.responseText);if((o=l)&&o.status&&200===o.status)return void s(e.error,e.value);if(function(e){return e&&i.isType(e.status,"number")&&e.status>=400&&e.status<600}(l)){if(403===l.status){var t=e.value&&e.value.message;a.error(t)}s(new Error(String(l.status)))}else{s(c("XHR response had no status code (likely connection failure)"))}}}catch(e){var n;n=e&&e.stack?e:new Error(e),s(n)}var o};l.open(n,t,!0),l.setRequestHeader&&(l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("X-Rollbar-Access-Token",e)),l.onreadystatechange=p,l.send(o)}catch(e){if("undefined"!=typeof XDomainRequest){if(!window||!window.location)return s(new Error("No window available during request, unknown environment"));"http:"===window.location.href.substring(0,5)&&"https"===t.substring(0,5)&&(t="http"+t.substring(5));var u=new XDomainRequest;u.onprogress=function(){},u.ontimeout=function(){s(c("Request timed out","ETIMEDOUT"))},u.onerror=function(){s(new Error("Error during request"))},u.onload=function(){var e=i.jsonParse(u.responseText);s(e.error,e.value)},u.open(n,t,!0),u.send(o)}else s(new Error("Cannot find a method to transport a request"))}}catch(e){s(e)}}function c(e,t){var n=new Error(e);return n.code=t||"ENOTFOUND",n}e.exports={get:function(e,t,n,o,a){o&&i.isFunction(o)||(o=function(){}),i.addParamsAndAccessTokenToPath(e,t,n),s(e,i.formatUrl(t),"GET",null,o,a)},post:function(e,t,n,a,r){if(a&&i.isFunction(a)||(a=function(){}),!n)return a(new Error("Cannot send empty request"));var c=o.truncate(n);if(c.error)return a(c.error);var l=c.value;s(e,i.formatUrl(t),"POST",l,a,r)},postJsonPayload:function(e,t,n,o,a){o&&i.isFunction(o)||(o=function(){}),s(e,i.formatUrl(t),"POST",n,o,a)}}},function(e,t,n){var i=n(0),o=n(4),a=n(1);function s(e,t,n){var o=e.message,a=e.custom;if(!o)if(a){var s=t.scrubFields,r=i.stringify(i.scrub(a,s));o=r.error||r.value||""}else o="";var c={body:o};a&&(c.extra=i.merge(a)),i.set(e,"data.body",{message:c}),n(null,e)}e.exports={handleItemWithError:function(e,t,n){if(e.data=e.data||{},e.err)try{e.stackInfo=e.err._savedStackTrace||o.parse(e.err)}catch(t){a.error("Error while parsing the error object.",t);try{e.message=e.err.message||e.err.description||e.message||String(e.err)}catch(t){e.message=String(e.err)||String(t)}delete e.err}n(null,e)},ensureItemHasSomethingToSay:function(e,t,n){e.message||e.stackInfo||e.custom||n(new Error("No message, stack info, or custom data"),null),n(null,e)},addBaseInfo:function(e,t,n){var o=t.payload&&t.payload.environment||t.environment;e.data=i.merge(e.data,{environment:o,level:e.level,endpoint:t.endpoint,platform:"browser",framework:"browser-js",language:"javascript",server:{},uuid:e.uuid,notifier:{name:"rollbar-browser-js",version:t.version}}),n(null,e)},addRequestInfo:function(e){return function(t,n,o){if(!e||!e.location)return o(null,t);var a="$remote_ip";n.captureIp?!0!==n.captureIp&&(a+="_anonymize"):a=null,i.set(t,"data.request",{url:e.location.href,query_string:e.location.search,user_ip:a}),o(null,t)}},addClientInfo:function(e){return function(t,n,o){if(!e)return o(null,t);var a=e.navigator||{},s=e.screen||{};i.set(t,"data.client",{runtime_ms:t.timestamp-e._rollbarStartTime,timestamp:Math.round(t.timestamp/1e3),javascript:{browser:a.userAgent,language:a.language,cookie_enabled:a.cookieEnabled,screen:{width:s.width,height:s.height}}}),o(null,t)}},addPluginInfo:function(e){return function(t,n,o){if(!e||!e.navigator)return o(null,t);for(var a,s=[],r=e.navigator.plugins||[],c=0,l=r.length;c<l;++c)a=r[c],s.push({name:a.name,description:a.description});i.set(t,"data.client.javascript.plugins",s),o(null,t)}},addBody:function(e,t,n){e.stackInfo?function(e,t,n){var a=e.data.description,r=e.stackInfo,c=e.custom,l=o.guessErrorClass(r.message),p=r.name||l[0],u=l[1],d={exception:{class:p,message:u}};a&&(d.exception.description=a);var m=r.stack;if(m&&0===m.length&&e._unhandledStackInfo&&e._unhandledStackInfo.stack&&(m=e._unhandledStackInfo.stack),m){var h,f,g,v,x,b,y,w;for(0===m.length&&(d.exception.stack=r.rawStack,d.exception.raw=String(r.rawException)),d.frames=[],y=0;y<m.length;++y)h=m[y],f={filename:h.url?i.sanitizeUrl(h.url):"(unknown)",lineno:h.line||null,method:h.func&&"?"!==h.func?h.func:"[anonymous]",colno:h.column},t.sendFrameUrl&&(f.url=h.url),f.method&&f.method.endsWith&&f.method.endsWith("_rollbar_wrapped")||(g=v=x=null,(b=h.context?h.context.length:0)&&(w=Math.floor(b/2),v=h.context.slice(0,w),g=h.context[w],x=h.context.slice(w)),g&&(f.code=g),(v||x)&&(f.context={},v&&v.length&&(f.context.pre=v),x&&x.length&&(f.context.post=x)),h.args&&(f.args=h.args),d.frames.push(f));d.frames.reverse(),c&&(d.extra=i.merge(c)),i.set(e,"data.body",{trace:d}),n(null,e)}else e.message=p+": "+u,s(e,t,n)}(e,t,n):s(e,t,n)},scrubPayload:function(e,t,n){var o=t.scrubFields;e.data=i.scrub(e.data,o),n(null,e)}}},function(e,t,n){var i,o,a;!function(s,r){"use strict";o=[n(22)],void 0===(a="function"==typeof(i=function(e){var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,i=/^(eval@)?(\[native code\])?$/;function o(e,t,n){if("function"==typeof Array.prototype.map)return e.map(t,n);for(var i=new Array(e.length),o=0;o<e.length;o++)i[o]=t.call(n,e[o]);return i}function a(e,t,n){if("function"==typeof Array.prototype.filter)return e.filter(t,n);for(var i=[],o=0;o<e.length;o++)t.call(n,e[o])&&i.push(e[o]);return i}return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=e.replace(/[\(\)\s]/g,"").split(":"),n=t.pop(),i=t[t.length-1];if(!isNaN(parseFloat(i))&&isFinite(i)){var o=t.pop();return[t.join(":"),o,n]}return[t.join(":"),n,void 0]},parseV8OrIE:function(t){var i=a(t.stack.split("\n"),function(e){return!!e.match(n)},this);return o(i,function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),i=this.extractLocation(n.pop()),o=n.join(" ")||void 0,a="eval"===i[0]?void 0:i[0];return new e(o,void 0,a,i[1],i[2],t)},this)},parseFFOrSafari:function(t){var n=a(t.stack.split("\n"),function(e){return!e.match(i)},this);return o(n,function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var n=t.split("@"),i=this.extractLocation(n.pop()),o=n.shift()||void 0;return new e(o,void 0,i[0],i[1],i[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,i=t.message.split("\n"),o=[],a=2,s=i.length;a<s;a+=2){var r=n.exec(i[a]);r&&o.push(new e(void 0,void 0,r[2],r[1],void 0,i[a]))}return o},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=t.stacktrace.split("\n"),o=[],a=0,s=i.length;a<s;a+=2){var r=n.exec(i[a]);r&&o.push(new e(r[3]||void 0,void 0,r[2],r[1],void 0,i[a]))}return o},parseOpera11:function(n){var i=a(n.stack.split("\n"),function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this);return o(i,function(t){var n,i=t.split("@"),o=this.extractLocation(i.pop()),a=i.shift()||"",s=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;a.match(/\(([^\)]*)\)/)&&(n=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var r=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e(s,r,o[0],o[1],o[2],t)},this)}}})?i.apply(t,o):i)||(e.exports=a)}()},function(e,t,n){var i,o,a;!function(n,s){"use strict";o=[],void 0===(a="function"==typeof(i=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,n,i,o,a){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==n&&this.setFileName(n),void 0!==i&&this.setLineNumber(i),void 0!==o&&this.setColumnNumber(o),void 0!==a&&this.setSource(a)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}},t})?i.apply(t,o):i)||(e.exports=a)}()},function(e,t,n){var i=n(0);e.exports={itemToPayload:function(e,t,n){var o=t.payload||{};o.body&&delete o.body;var a=i.merge(e.data,o);e._isUncaught&&(a._isUncaught=!0),e._originalArgs&&(a._originalArgs=e._originalArgs),n(null,a)},addTelemetryData:function(e,t,n){e.telemetryEvents&&i.set(e,"data.body.telemetry",e.telemetryEvents),n(null,e)},addMessageWithError:function(e,t,n){if(e.message){var o="data.body.trace_chain.0",a=i.get(e,o);if(a||(o="data.body.trace",a=i.get(e,o)),a){if(!a.exception||!a.exception.description)return i.set(e,o+".exception.description",e.message),void n(null,e);var s=i.get(e,o+".extra")||{},r=i.merge(s,{message:e.message});i.set(e,o+".extra",r)}n(null,e)}else n(null,e)},userTransform:function(e){return function(t,n,o){var a=i.merge(t);try{i.isFunction(n.transform)&&n.transform(a.data,t)}catch(i){return n.transform=null,e.error("Error while calling custom transform() function. Removing custom transform().",i),void o(null,t)}o(null,a)}},addConfigToPayload:function(e,t,n){if(!t.sendConfig)return n(null,e);var o=i.get(e,"data.custom")||{};o._rollbarConfig=t,e.data.custom=o,n(null,e)}}},function(e,t,n){var i=n(0);e.exports={checkIgnore:function(e,t){return!i.get(t,"plugins.jquery.ignoreAjaxErrors")||!i.get(e,"body.message.extra.isAjax")}}},function(e,t,n){var i=n(0);function o(e,t,n,o){var a,s,r,c,l,p,u,d,m=!1;"blacklist"===n&&(m=!0);try{if(p=(a=m?t.hostBlackList:t.hostWhiteList)&&a.length,s=i.get(e,"body.trace"),!a||0===p)return!m;if(!s||!s.frames||0===s.frames.length)return!m;for(c=s.frames.length,u=0;u<c;u++){if(r=s.frames[u].filename,!i.isType(r,"string"))return!m;for(d=0;d<p;d++)if(l=a[d],new RegExp(l).test(r))return!0}}catch(e){m?t.hostBlackList=null:t.hostWhiteList=null;var h=m?"hostBlackList":"hostWhiteList";return o.error("Error while reading your configuration's "+h+" option. Removing custom "+h+".",e),!m}return!1}e.exports={checkLevel:function(e,t){var n=e.level,o=i.LEVELS[n]||0,a=t.reportLevel;return!(o<(i.LEVELS[a]||0))},userCheckIgnore:function(e){return function(t,n){var o=!!t._isUncaught;delete t._isUncaught;var a=t._originalArgs;delete t._originalArgs;try{i.isFunction(n.onSendCallback)&&n.onSendCallback(o,a,t)}catch(t){n.onSendCallback=null,e.error("Error while calling onSendCallback, removing",t)}try{if(i.isFunction(n.checkIgnore)&&n.checkIgnore(o,a,t))return!1}catch(t){n.checkIgnore=null,e.error("Error while calling custom checkIgnore(), removing",t)}return!0}},urlIsNotBlacklisted:function(e){return function(t,n){return!o(t,n,"blacklist",e)}},urlIsWhitelisted:function(e){return function(t,n){return o(t,n,"whitelist",e)}},messageIsIgnored:function(e){return function(t,n){var o,a,s,r,c,l,p,u;try{if(c=!1,!(s=n.ignoredMessages)||0===s.length)return!0;if(l=t.body,p=i.get(l,"trace.exception.message"),u=i.get(l,"message.body"),!(o=p||u))return!0;for(r=s.length,a=0;a<r&&!(c=new RegExp(s[a],"gi").test(o));a++);}catch(t){n.ignoredMessages=null,e.error("Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return!c}}}},function(e,t,n){var i=n(0),o=n(3),a=n(27),s={network:!0,networkResponseHeaders:!1,networkResponseBody:!1,networkRequestBody:!1,log:!0,dom:!0,navigation:!0,connectivity:!0};function r(e,t,n,i,o){var a=e[t];e[t]=n(a),i&&i[o].push([e,t,a])}function c(e,t){for(var n;e[t].length;)(n=e[t].shift())[0][n[1]]=n[2]}function l(e,t,n,o,a){var r=e.autoInstrument;!1===e.enabled||!1===r?this.autoInstrument={}:(i.isType(r,"object")||(r=s),this.autoInstrument=i.merge(s,r)),this.scrubTelemetryInputs=!!e.scrubTelemetryInputs,this.telemetryScrubber=e.telemetryScrubber,this.defaultValueScrubber=function(e){for(var t=[],n=0;n<e.length;++n)t.push(new RegExp(e[n],"i"));return function(e){var n=function(e){if(!e||!e.attributes)return null;for(var t=e.attributes,n=0;n<t.length;++n)if("name"===t[n].key)return t[n].value;return null}(e);if(!n)return!1;for(var i=0;i<t.length;++i)if(t[i].test(n))return!0;return!1}}(e.scrubFields),this.telemeter=t,this.rollbar=n,this._window=o||{},this._document=a||{},this.replacements={network:[],log:[],navigation:[],connectivity:[]},this.eventRemovers={dom:[],connectivity:[]},this._location=this._window.location,this._lastHref=this._location&&this._location.href}l.prototype.configure=function(e){var t=e.autoInstrument,n=i.merge(this.autoInstrument);!1===e.enabled||!1===t?this.autoInstrument={}:(i.isType(t,"object")||(t=s),this.autoInstrument=i.merge(s,t)),this.instrument(n),void 0!==e.scrubTelemetryInputs&&(this.scrubTelemetryInputs=!!e.scrubTelemetryInputs),void 0!==e.telemetryScrubber&&(this.telemetryScrubber=e.telemetryScrubber)},l.prototype.instrument=function(e){!this.autoInstrument.network||e&&e.network?!this.autoInstrument.network&&e&&e.network&&this.deinstrumentNetwork():this.instrumentNetwork(),!this.autoInstrument.log||e&&e.log?!this.autoInstrument.log&&e&&e.log&&this.deinstrumentConsole():this.instrumentConsole(),!this.autoInstrument.dom||e&&e.dom?!this.autoInstrument.dom&&e&&e.dom&&this.deinstrumentDom():this.instrumentDom(),!this.autoInstrument.navigation||e&&e.navigation?!this.autoInstrument.navigation&&e&&e.navigation&&this.deinstrumentNavigation():this.instrumentNavigation(),!this.autoInstrument.connectivity||e&&e.connectivity?!this.autoInstrument.connectivity&&e&&e.connectivity&&this.deinstrumentConnectivity():this.instrumentConnectivity()},l.prototype.deinstrumentNetwork=function(){c(this.replacements,"network")},l.prototype.instrumentNetwork=function(){var e=this;function t(t,n){t in n&&i.isFunction(n[t])&&r(n,t,function(t){return e.rollbar.wrap(t)})}if("XMLHttpRequest"in this._window){var n=this._window.XMLHttpRequest.prototype;r(n,"open",function(e){return function(t,n){return i.isType(n,"string")&&(this.__rollbar_xhr={method:t,url:n,status_code:null,start_time_ms:i.now(),end_time_ms:null}),e.apply(this,arguments)}},this.replacements,"network"),r(n,"send",function(n){return function(o){var a=this;function s(){if(a.__rollbar_xhr){if(null===a.__rollbar_xhr.status_code){a.__rollbar_xhr.status_code=0;var t=null;e.autoInstrument.networkRequestBody&&(t=o),a.__rollbar_event=e.telemeter.captureNetwork(a.__rollbar_xhr,"xhr",void 0,t)}if(a.readyState<2&&(a.__rollbar_xhr.start_time_ms=i.now()),a.readyState>3){a.__rollbar_xhr.end_time_ms=i.now();var n=null;if(e.autoInstrument.networkResponseHeaders){var s=e.autoInstrument.networkResponseHeaders;n={};try{var r,c;if(!0===s){var l=a.getAllResponseHeaders();if(l){var p,u,d=l.trim().split(/[\r\n]+/);for(c=0;c<d.length;c++)r=(p=d[c].split(": ")).shift(),u=p.join(": "),n[r]=u}}else for(c=0;c<s.length;c++)n[r=s[c]]=a.getResponseHeader(r)}catch(e){}}var m=null;if(e.autoInstrument.networkResponseBody)try{m=a.responseText}catch(e){}var h=null;(m||n)&&(h={},m&&(h.body=m),n&&(h.headers=n)),h&&(a.__rollbar_xhr.response=h);try{var f=a.status;f=1223===f?204:f,a.__rollbar_xhr.status_code=f,a.__rollbar_event.level=e.telemeter.levelFromStatus(f)}catch(e){}}}}return t("onload",a),t("onerror",a),t("onprogress",a),"onreadystatechange"in a&&i.isFunction(a.onreadystatechange)?r(a,"onreadystatechange",function(t){return e.rollbar.wrap(t,void 0,s)}):a.onreadystatechange=s,n.apply(this,arguments)}},this.replacements,"network")}"fetch"in this._window&&r(this._window,"fetch",function(t){return function(n,o){for(var a=new Array(arguments.length),s=0,r=a.length;s<r;s++)a[s]=arguments[s];var c,l=a[0],p="GET";i.isType(l,"string")?c=l:l&&(c=l.url,l.method&&(p=l.method)),a[1]&&a[1].method&&(p=a[1].method);var u={method:p,url:c,status_code:null,start_time_ms:i.now(),end_time_ms:null},d=null;return e.autoInstrument.networkRequestBody&&(a[1]&&a[1].body?d=a[1].body:a[0]&&!i.isType(a[0],"string")&&a[0].body&&(d=a[0].body)),e.telemeter.captureNetwork(u,"fetch",void 0,d),t.apply(this,a).then(function(t){u.end_time_ms=i.now(),u.status_code=t.status;var n=null;if(e.autoInstrument.networkResponseHeaders){var o=e.autoInstrument.networkResponseHeaders;n={};try{if(!0===o);else for(var a=0;a<o.length;a++){var s=o[a];n[s]=t.headers.get(s)}}catch(e){}}var r=null;return n&&(r={headers:n}),r&&(u.response=r),t})}},this.replacements,"network")},l.prototype.deinstrumentConsole=function(){if("console"in this._window&&this._window.console.log)for(var e;this.replacements.log.length;)e=this.replacements.log.shift(),this._window.console[e[0]]=e[1]},l.prototype.instrumentConsole=function(){if("console"in this._window&&this._window.console.log)for(var e=this,t=this._window.console,n=["debug","info","warn","error","log"],o=0,a=n.length;o<a;o++)s(n[o]);function s(n){var o=t[n],a=t,s="warn"===n?"warning":n;t[n]=function(){var t=Array.prototype.slice.call(arguments),n=i.formatArgsAsString(t);e.telemeter.captureLog(n,s),o&&Function.prototype.apply.call(o,a,t)},e.replacements.log.push([n,o])}},l.prototype.deinstrumentDom=function(){("addEventListener"in this._window||"attachEvent"in this._window)&&this.removeListeners("dom")},l.prototype.instrumentDom=function(){if("addEventListener"in this._window||"attachEvent"in this._window){var e=this.handleClick.bind(this),t=this.handleBlur.bind(this);this.addListener("dom",this._window,"click","onclick",e,!0),this.addListener("dom",this._window,"blur","onfocusout",t,!0)}},l.prototype.handleClick=function(e){try{var t=a.getElementFromEvent(e,this._document),n=t&&t.tagName,i=a.isDescribedElement(t,"a")||a.isDescribedElement(t,"button");n&&(i||a.isDescribedElement(t,"input",["button","submit"]))?this.captureDomEvent("click",t):a.isDescribedElement(t,"input",["checkbox","radio"])&&this.captureDomEvent("input",t,t.value,t.checked)}catch(e){}},l.prototype.handleBlur=function(e){try{var t=a.getElementFromEvent(e,this._document);t&&t.tagName&&(a.isDescribedElement(t,"textarea")?this.captureDomEvent("input",t,t.value):a.isDescribedElement(t,"select")&&t.options&&t.options.length?this.handleSelectInputChanged(t):a.isDescribedElement(t,"input")&&!a.isDescribedElement(t,"input",["button","submit","hidden","checkbox","radio"])&&this.captureDomEvent("input",t,t.value))}catch(e){}},l.prototype.handleSelectInputChanged=function(e){if(e.multiple)for(var t=0;t<e.options.length;t++)e.options[t].selected&&this.captureDomEvent("input",e,e.options[t].value);else e.selectedIndex>=0&&e.options[e.selectedIndex]&&this.captureDomEvent("input",e,e.options[e.selectedIndex].value)},l.prototype.captureDomEvent=function(e,t,n,i){if(void 0!==n)if(this.scrubTelemetryInputs||"password"===a.getElementType(t))n="[scrubbed]";else{var o=a.describeElement(t);this.telemetryScrubber?this.telemetryScrubber(o)&&(n="[scrubbed]"):this.defaultValueScrubber(o)&&(n="[scrubbed]")}var s=a.elementArrayToString(a.treeToArray(t));this.telemeter.captureDom(e,s,n,i)},l.prototype.deinstrumentNavigation=function(){var e=this._window.chrome;!(e&&e.app&&e.app.runtime)&&this._window.history&&this._window.history.pushState&&c(this.replacements,"navigation")},l.prototype.instrumentNavigation=function(){var e=this._window.chrome;if(!(e&&e.app&&e.app.runtime)&&this._window.history&&this._window.history.pushState){var t=this;r(this._window,"onpopstate",function(e){return function(){var n=t._location.href;t.handleUrlChange(t._lastHref,n),e&&e.apply(this,arguments)}},this.replacements,"navigation"),r(this._window.history,"pushState",function(e){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&t.handleUrlChange(t._lastHref,n+""),e.apply(this,arguments)}},this.replacements,"navigation")}},l.prototype.handleUrlChange=function(e,t){var n=o.parse(this._location.href),i=o.parse(t),a=o.parse(e);this._lastHref=t,n.protocol===i.protocol&&n.host===i.host&&(t=i.path+(i.hash||"")),n.protocol===a.protocol&&n.host===a.host&&(e=a.path+(a.hash||"")),this.telemeter.captureNavigation(e,t)},l.prototype.deinstrumentConnectivity=function(){("addEventListener"in this._window||"body"in this._document)&&(this._window.addEventListener?this.removeListeners("connectivity"):c(this.replacements,"connectivity"))},l.prototype.instrumentConnectivity=function(){if("addEventListener"in this._window||"body"in this._document)if(this._window.addEventListener)this.addListener("connectivity",this._window,"online",void 0,function(){this.telemeter.captureConnectivityChange("online")}.bind(this),!0),this.addListener("connectivity",this._window,"offline",void 0,function(){this.telemeter.captureConnectivityChange("offline")}.bind(this),!0);else{var e=this;r(this._document.body,"ononline",function(t){return function(){e.telemeter.captureConnectivityChange("online"),t&&t.apply(this,arguments)}},this.replacements,"connectivity"),r(this._document.body,"onoffline",function(t){return function(){e.telemeter.captureConnectivityChange("offline"),t&&t.apply(this,arguments)}},this.replacements,"connectivity")}},l.prototype.addListener=function(e,t,n,i,o,a){t.addEventListener?(t.addEventListener(n,o,a),this.eventRemovers[e].push(function(){t.removeEventListener(n,o,a)})):i&&(t.attachEvent(i,o),this.eventRemovers[e].push(function(){t.detachEvent(i,o)}))},l.prototype.removeListeners=function(e){for(;this.eventRemovers[e].length;)this.eventRemovers[e].shift()()},e.exports=l},function(e,t){function n(e){return(e.getAttribute("type")||"").toLowerCase()}function i(e){if(!e||!e.tagName)return"";var t=[e.tagName];e.id&&t.push("#"+e.id),e.classes&&t.push("."+e.classes.join("."));for(var n=0;n<e.attributes.length;n++)t.push("["+e.attributes[n].key+'="'+e.attributes[n].value+'"]');return t.join("")}function o(e){if(!e||!e.tagName)return null;var t,n,i,o,a={};a.tagName=e.tagName.toLowerCase(),e.id&&(a.id=e.id),(t=e.className)&&"string"==typeof t&&(a.classes=t.split(/\s+/));var s=["type","name","title","alt"];for(a.attributes=[],o=0;o<s.length;o++)n=s[o],(i=e.getAttribute(n))&&a.attributes.push({key:n,value:i});return a}e.exports={describeElement:o,descriptionToString:i,elementArrayToString:function(e){for(var t,n,o=" > ".length,a=[],s=0,r=e.length-1;r>=0;r--){if(t=i(e[r]),n=s+a.length*o+t.length,r<e.length-1&&n>=83){a.unshift("...");break}a.unshift(t),s+=t.length}return a.join(" > ")},treeToArray:function(e){for(var t,n=[],i=0;e&&i<5&&"html"!==(t=o(e)).tagName;i++)n.unshift(t),e=e.parentNode;return n},getElementFromEvent:function(e,t){return e.target?e.target:t&&t.elementFromPoint?t.elementFromPoint(e.clientX,e.clientY):void 0},isDescribedElement:function(e,t,i){if(e.tagName.toLowerCase()!==t.toLowerCase())return!1;if(!i)return!0;e=n(e);for(var o=0;o<i.length;o++)if(i[o]===e)return!0;return!1},getElementType:n}}])},function(e,t,n){(function(){var t,i,o,a,s,r,c,l,p=[].slice;l=n(163),o={cmd:"",ctrl:"",alt:"",option:"",shift:"",enter:"",left:"",right:"",up:"",down:""},a={cmd:"Cmd",ctrl:"Ctrl",alt:"Alt",option:"Alt",shift:"Shift",enter:"Enter",left:"Left",right:"Right",up:"Up",down:"Down"},r={"~":"`",_:"-","+":"=","|":"\\","{":"[","}":"]",":":";",'"':"'","<":",",">":".","?":"/"},c=function(e){var t,n,i,o,a;if(i=0,n=[],null==e)return n;for(t=o=0,a=e.length;o<a;t=++o)"."!==e[t]||0!==t&&"\\"===e[t-1]||(n.push(e.substring(i,t)),i=t+1);return n.push(e.substr(i,e.length)),n},i=function(e){return l.isObject(e)&&!l.isArray(e)},s={adviseBefore:function(e,t,n){var i;return i=e[t],e[t]=function(){var e;if(e=1<=arguments.length?p.call(arguments,0):[],!1!==n.apply(this,e))return i.apply(this,e)}},camelize:function(e){return e?e.replace(/[_-]+(\w)/g,function(e){return e[1].toUpperCase()}):""},capitalize:function(e){return e?"github"===e.toLowerCase()?"GitHub":e[0].toUpperCase()+e.slice(1):""},compactObject:function(e){var t,n,i;for(t in n={},e)null!=(i=e[t])&&(n[t]=i);return n},dasherize:function(e){return e?(e=e[0].toLowerCase()+e.slice(1)).replace(/([A-Z])|(_)/g,function(e,t){return t?"-"+t.toLowerCase():"-"}):""},deepClone:function(e){return l.isArray(e)?e.map(function(e){return s.deepClone(e)}):l.isObject(e)&&!l.isFunction(e)?s.mapObject(e,function(e,t){return[e,s.deepClone(t)]}):e},deepExtend:function(e){var t,n,o,a,r,c,l;for(a=e,t=0;++t<arguments.length;)if(o=arguments[t],i(a)&&i(o))for(r=0,c=(l=Object.keys(o)).length;r<c;r++)a[n=l[r]]=s.deepExtend(a[n],o[n]);else a=s.deepClone(o);return a},deepContains:function(e,t){var n,i,o;if(null==e)return!1;for(i=0,o=e.length;i<o;i++)if(n=e[i],l.isEqual(n,t))return!0;return!1},endsWith:function(e,t){return null==t&&(t=""),!!e&&-1!==e.indexOf(t,e.length-t.length)},escapeAttribute:function(e){return e?e.replace(/"/g,"&quot;").replace(/\n/g,"").replace(/\\/g,"-"):""},escapeRegExp:function(e){return e?e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):""},humanizeEventName:function(e,t){var n,i,o,a;return i=(a=e.split(":"))[0],null==(n=a[1])?s.undasherize(i):(o=s.undasherize(i),null==t&&(t=s.undasherize(n)),o+": "+t)},humanizeKey:function(e,t){var n;return null==t&&(t=process.platform),e?(n="darwin"===t?o:a)[e]?n[e]:1===e.length&&null!=r[e]?[n.shift,r[e]]:1===e.length&&e===e.toUpperCase()&&e.toUpperCase()!==e.toLowerCase()?[n.shift,e.toUpperCase()]:1===e.length||/f[0-9]{1,2}/.test(e)?e.toUpperCase():"darwin"===t?e:s.capitalize(e):e},humanizeKeystroke:function(e,t){var n,i,o,a,r,c,p,u,d,m;if(null==t&&(t=process.platform),!e)return e;for(n=[],p=0,d=(r=e.split(" ")).length;p<d;p++){for(a=[],i=u=0,m=(c=(e=r[p]).split("-")).length;u<m;i=++u)""===(o=c[i])&&""===c[i-1]&&(o="-"),o&&a.push(s.humanizeKey(o,t));a=l.uniq(l.flatten(a)),a="darwin"===t?a.join(""):a.join("+"),n.push(a)}return n.join(" ")},isSubset:function(e,t){return l.every(e,function(e){return l.include(t,e)})},losslessInvert:function(e){var t,n,i;for(n in t={},e)null==t[i=e[n]]&&(t[i]=[]),t[i].push(n);return t},mapObject:function(e,t){var n,i,o,a,s,r,c;for(i={},a=0,s=(r=Object.keys(e)).length;a<s;a++)n=(c=t(n=r[a],e[n]))[0],o=c[1],i[n]=o;return i},multiplyString:function(e,t){var n,i;for(n="",i=0;i<t;)n+=e,i++;return n},pluralize:function(e,t,n){return null==e&&(e=0),null==n&&(n=t+"s"),1===e?e+" "+t:e+" "+n},remove:function(e,t){var n;return(n=e.indexOf(t))>=0&&e.splice(n,1),e},setValueForKeyPath:function(e,t,n){var i,o;for(o=c(t);o.length>1;)null==e[i=o.shift()]&&(e[i]={}),e=e[i];return null!=n?e[o.shift()]=n:delete e[o.shift()]},hasKeyPath:function(e,t){var n,i,o,a;for(o=0,a=(i=c(t)).length;o<a;o++){if(n=i[o],!e.hasOwnProperty(n))return!1;e=e[n]}return!0},spliceWithArray:function(e,t,n,i,o){var a,s,r,c;if(null==o&&(o=1e5),i.length<o)return e.splice.apply(e,[t,n].concat(p.call(i)));for(e.splice(t,n),c=[],a=s=0,r=i.length;o>0?s<=r:s>=r;a=s+=o)c.push(e.splice.apply(e,[t+a,0].concat(p.call(i.slice(a,a+o)))));return c},sum:function(e){var t,n,i;for(t=0,n=0,i=e.length;n<i;n++)t+=e[n];return t},uncamelcase:function(e){var t;return e?(t=e.replace(/([A-Z])|_+/g,function(e,t){return null==t&&(t="")," "+t}),s.capitalize(t.trim())):""},undasherize:function(e){return e?e.split("-").map(s.capitalize).join(" "):""},underscore:function(e){return e?(e=e[0].toLowerCase()+e.slice(1)).replace(/([A-Z])|-+/g,function(e,t){return null==t&&(t=""),"_"+t.toLowerCase()}):""},valueForKeyPath:function(e,t){var n,i,o;for(i=0,o=(n=c(t)).length;i<o;i++)if(null==(e=e[n[i]]))return;return e},isEqual:function(e,n,i,o){return l.isArray(i)&&l.isArray(o)?t(e,n,i,o):t(e,n)},isEqualForProperties:function(){var e,t,n,i,o,a;for(e=arguments[0],t=arguments[1],o=0,a=(n=3<=arguments.length?p.call(arguments,2):[]).length;o<a;o++)if(i=n[o],!l.isEqual(e[i],t[i]))return!1;return!0}},t=function(e,n,i,o){var a,s,r,c,p,u,d,m,h,f,g,v,x,b;if(null==i&&(i=[]),null==o&&(o=[]),e===n)return l.isEqual(e,n);if(l.isFunction(e)||l.isFunction(n))return l.isEqual(e,n);for(v=i.length;v--;)if(i[v]===e)return o[v]===n;if(i.push(e),o.push(n),h=!1,l.isFunction(null!=e?e.isEqual:void 0))h=e.isEqual(n,i,o);else if(l.isFunction(null!=n?n.isEqual:void 0))h=n.isEqual(e,o,i);else if(l.isArray(e)&&l.isArray(n)&&e.length===n.length){for(h=!0,f=x=0,b=e.length;x<b;f=++x)if(r=e[f],!t(r,n[f],i,o)){h=!1;break}}else if(l.isRegExp(e)&&l.isRegExp(n))h=l.isEqual(e,n);else if(l.isElement(e)&&l.isElement(n))h=e===n;else if(l.isObject(e)&&l.isObject(n))if(a=e.constructor,u=n.constructor,s=l.isFunction(a)&&a instanceof a,d=l.isFunction(u)&&u instanceof u,a===u||s&&d){for(g in c=0,h=!0,e)if(p=e[g],l.has(e,g)&&(c++,!l.has(n,g)||!t(p,n[g],i,o))){h=!1;break}if(h){for(g in m=0,n)n[g],l.has(n,g)&&m++;h=c===m}}else h=!1;else h=l.isEqual(e,n);return i.pop(),o.pop(),h},e.exports=l.extend({},l,s)}).call(this)},function(e,t,n){(function(e){var n;!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},o=i._,a=Array.prototype,s=Object.prototype,r="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,l=a.slice,p=s.toString,u=s.hasOwnProperty,d=Array.isArray,m=Object.keys,h=Object.create,f=function(){},g=function(e){return e instanceof g?e:this instanceof g?void(this._wrapped=e):new g(e)};t.nodeType?i._=g:(!e.nodeType&&e.exports&&(t=e.exports=g),t._=g),g.VERSION="1.9.1";var v,x=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,a){return e.call(t,n,i,o,a)}}return function(){return e.apply(t,arguments)}},b=function(e,t,n){return g.iteratee!==v?g.iteratee(e,t):null==e?g.identity:g.isFunction(e)?x(e,t,n):g.isObject(e)&&!g.isArray(e)?g.matcher(e):g.property(e)};g.iteratee=v=function(e,t){return b(e,t,1/0)};var y=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),o=0;o<n;o++)i[o]=arguments[o+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var a=Array(t+1);for(o=0;o<t;o++)a[o]=arguments[o];return a[t]=i,e.apply(this,a)}},w=function(e){if(!g.isObject(e))return{};if(h)return h(e);f.prototype=e;var t=new f;return f.prototype=null,t},k=function(e){return function(t){return null==t?void 0:t[e]}},E=function(e,t){return null!=e&&u.call(e,t)},S=function(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0},P=Math.pow(2,53)-1,_=k("length"),I=function(e){var t=_(e);return"number"==typeof t&&t>=0&&t<=P};g.each=g.forEach=function(e,t,n){var i,o;if(t=x(t,n),I(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else{var a=g.keys(e);for(i=0,o=a.length;i<o;i++)t(e[a[i]],a[i],e)}return e},g.map=g.collect=function(e,t,n){t=b(t,n);for(var i=!I(e)&&g.keys(e),o=(i||e).length,a=Array(o),s=0;s<o;s++){var r=i?i[s]:s;a[s]=t(e[r],r,e)}return a};var T=function(e){return function(t,n,i,o){var a=arguments.length>=3;return function(t,n,i,o){var a=!I(t)&&g.keys(t),s=(a||t).length,r=e>0?0:s-1;for(o||(i=t[a?a[r]:r],r+=e);r>=0&&r<s;r+=e){var c=a?a[r]:r;i=n(i,t[c],c,t)}return i}(t,x(n,o,4),i,a)}};g.reduce=g.foldl=g.inject=T(1),g.reduceRight=g.foldr=T(-1),g.find=g.detect=function(e,t,n){var i=(I(e)?g.findIndex:g.findKey)(e,t,n);if(void 0!==i&&-1!==i)return e[i]},g.filter=g.select=function(e,t,n){var i=[];return t=b(t,n),g.each(e,function(e,n,o){t(e,n,o)&&i.push(e)}),i},g.reject=function(e,t,n){return g.filter(e,g.negate(b(t)),n)},g.every=g.all=function(e,t,n){t=b(t,n);for(var i=!I(e)&&g.keys(e),o=(i||e).length,a=0;a<o;a++){var s=i?i[a]:a;if(!t(e[s],s,e))return!1}return!0},g.some=g.any=function(e,t,n){t=b(t,n);for(var i=!I(e)&&g.keys(e),o=(i||e).length,a=0;a<o;a++){var s=i?i[a]:a;if(t(e[s],s,e))return!0}return!1},g.contains=g.includes=g.include=function(e,t,n,i){return I(e)||(e=g.values(e)),("number"!=typeof n||i)&&(n=0),g.indexOf(e,t,n)>=0},g.invoke=y(function(e,t,n){var i,o;return g.isFunction(t)?o=t:g.isArray(t)&&(i=t.slice(0,-1),t=t[t.length-1]),g.map(e,function(e){var a=o;if(!a){if(i&&i.length&&(e=S(e,i)),null==e)return;a=e[t]}return null==a?a:a.apply(e,n)})}),g.pluck=function(e,t){return g.map(e,g.property(t))},g.where=function(e,t){return g.filter(e,g.matcher(t))},g.findWhere=function(e,t){return g.find(e,g.matcher(t))},g.max=function(e,t,n){var i,o,a=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var r=0,c=(e=I(e)?e:g.values(e)).length;r<c;r++)null!=(i=e[r])&&i>a&&(a=i);else t=b(t,n),g.each(e,function(e,n,i){((o=t(e,n,i))>s||o===-1/0&&a===-1/0)&&(a=e,s=o)});return a},g.min=function(e,t,n){var i,o,a=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var r=0,c=(e=I(e)?e:g.values(e)).length;r<c;r++)null!=(i=e[r])&&i<a&&(a=i);else t=b(t,n),g.each(e,function(e,n,i){((o=t(e,n,i))<s||o===1/0&&a===1/0)&&(a=e,s=o)});return a},g.shuffle=function(e){return g.sample(e,1/0)},g.sample=function(e,t,n){if(null==t||n)return I(e)||(e=g.values(e)),e[g.random(e.length-1)];var i=I(e)?g.clone(e):g.values(e),o=_(i);t=Math.max(Math.min(t,o),0);for(var a=o-1,s=0;s<t;s++){var r=g.random(s,a),c=i[s];i[s]=i[r],i[r]=c}return i.slice(0,t)},g.sortBy=function(e,t,n){var i=0;return t=b(t,n),g.pluck(g.map(e,function(e,n,o){return{value:e,index:i++,criteria:t(e,n,o)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var D=function(e,t){return function(n,i,o){var a=t?[[],[]]:{};return i=b(i,o),g.each(n,function(t,o){var s=i(t,o,n);e(a,t,s)}),a}};g.groupBy=D(function(e,t,n){E(e,n)?e[n].push(t):e[n]=[t]}),g.indexBy=D(function(e,t,n){e[n]=t}),g.countBy=D(function(e,t,n){E(e,n)?e[n]++:e[n]=1});var A=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;g.toArray=function(e){return e?g.isArray(e)?l.call(e):g.isString(e)?e.match(A):I(e)?g.map(e,g.identity):g.values(e):[]},g.size=function(e){return null==e?0:I(e)?e.length:g.keys(e).length},g.partition=D(function(e,t,n){e[n?0:1].push(t)},!0),g.first=g.head=g.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:g.initial(e,e.length-t)},g.initial=function(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},g.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:g.rest(e,Math.max(0,e.length-t))},g.rest=g.tail=g.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},g.compact=function(e){return g.filter(e,Boolean)};var j=function(e,t,n,i){for(var o=(i=i||[]).length,a=0,s=_(e);a<s;a++){var r=e[a];if(I(r)&&(g.isArray(r)||g.isArguments(r)))if(t)for(var c=0,l=r.length;c<l;)i[o++]=r[c++];else j(r,t,n,i),o=i.length;else n||(i[o++]=r)}return i};g.flatten=function(e,t){return j(e,t,!1)},g.without=y(function(e,t){return g.difference(e,t)}),g.uniq=g.unique=function(e,t,n,i){g.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=b(n,i));for(var o=[],a=[],s=0,r=_(e);s<r;s++){var c=e[s],l=n?n(c,s,e):c;t&&!n?(s&&a===l||o.push(c),a=l):n?g.contains(a,l)||(a.push(l),o.push(c)):g.contains(o,c)||o.push(c)}return o},g.union=y(function(e){return g.uniq(j(e,!0,!0))}),g.intersection=function(e){for(var t=[],n=arguments.length,i=0,o=_(e);i<o;i++){var a=e[i];if(!g.contains(t,a)){var s;for(s=1;s<n&&g.contains(arguments[s],a);s++);s===n&&t.push(a)}}return t},g.difference=y(function(e,t){return t=j(t,!0,!0),g.filter(e,function(e){return!g.contains(t,e)})}),g.unzip=function(e){for(var t=e&&g.max(e,_).length||0,n=Array(t),i=0;i<t;i++)n[i]=g.pluck(e,i);return n},g.zip=y(g.unzip),g.object=function(e,t){for(var n={},i=0,o=_(e);i<o;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n};var O=function(e){return function(t,n,i){n=b(n,i);for(var o=_(t),a=e>0?0:o-1;a>=0&&a<o;a+=e)if(n(t[a],a,t))return a;return-1}};g.findIndex=O(1),g.findLastIndex=O(-1),g.sortedIndex=function(e,t,n,i){for(var o=(n=b(n,i,1))(t),a=0,s=_(e);a<s;){var r=Math.floor((a+s)/2);n(e[r])<o?a=r+1:s=r}return a};var L=function(e,t,n){return function(i,o,a){var s=0,r=_(i);if("number"==typeof a)e>0?s=a>=0?a:Math.max(a+r,s):r=a>=0?Math.min(a+1,r):a+r+1;else if(n&&a&&r)return i[a=n(i,o)]===o?a:-1;if(o!=o)return(a=t(l.call(i,s,r),g.isNaN))>=0?a+s:-1;for(a=e>0?s:r-1;a>=0&&a<r;a+=e)if(i[a]===o)return a;return-1}};g.indexOf=L(1,g.findIndex,g.sortedIndex),g.lastIndexOf=L(-1,g.findLastIndex),g.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),a=0;a<i;a++,e+=n)o[a]=e;return o},g.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],i=0,o=e.length;i<o;)n.push(l.call(e,i,i+=t));return n};var N=function(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var a=w(e.prototype),s=e.apply(a,o);return g.isObject(s)?s:a};g.bind=y(function(e,t,n){if(!g.isFunction(e))throw new TypeError("Bind must be called on a function");var i=y(function(o){return N(e,i,t,this,n.concat(o))});return i}),g.partial=y(function(e,t){var n=g.partial.placeholder,i=function(){for(var o=0,a=t.length,s=Array(a),r=0;r<a;r++)s[r]=t[r]===n?arguments[o++]:t[r];for(;o<arguments.length;)s.push(arguments[o++]);return N(e,i,this,this,s)};return i}),g.partial.placeholder=g,g.bindAll=y(function(e,t){var n=(t=j(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=g.bind(e[i],e)}}),g.memoize=function(e,t){var n=function(i){var o=n.cache,a=""+(t?t.apply(this,arguments):i);return E(o,a)||(o[a]=e.apply(this,arguments)),o[a]};return n.cache={},n},g.delay=y(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),g.defer=g.partial(g.delay,g,1),g.throttle=function(e,t,n){var i,o,a,s,r=0;n||(n={});var c=function(){r=!1===n.leading?0:g.now(),i=null,s=e.apply(o,a),i||(o=a=null)},l=function(){var l=g.now();r||!1!==n.leading||(r=l);var p=t-(l-r);return o=this,a=arguments,p<=0||p>t?(i&&(clearTimeout(i),i=null),r=l,s=e.apply(o,a),i||(o=a=null)):i||!1===n.trailing||(i=setTimeout(c,p)),s};return l.cancel=function(){clearTimeout(i),r=0,i=o=a=null},l},g.debounce=function(e,t,n){var i,o,a=function(t,n){i=null,n&&(o=e.apply(t,n))},s=y(function(s){if(i&&clearTimeout(i),n){var r=!i;i=setTimeout(a,t),r&&(o=e.apply(this,s))}else i=g.delay(a,t,this,s);return o});return s.cancel=function(){clearTimeout(i),i=null},s},g.wrap=function(e,t){return g.partial(t,e)},g.negate=function(e){return function(){return!e.apply(this,arguments)}},g.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},g.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},g.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},g.once=g.partial(g.before,2),g.restArguments=y;var R=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],K=function(e,t){var n=C.length,i=e.constructor,o=g.isFunction(i)&&i.prototype||s,a="constructor";for(E(e,a)&&!g.contains(t,a)&&t.push(a);n--;)(a=C[n])in e&&e[a]!==o[a]&&!g.contains(t,a)&&t.push(a)};g.keys=function(e){if(!g.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)E(e,n)&&t.push(n);return R&&K(e,t),t},g.allKeys=function(e){if(!g.isObject(e))return[];var t=[];for(var n in e)t.push(n);return R&&K(e,t),t},g.values=function(e){for(var t=g.keys(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=e[t[o]];return i},g.mapObject=function(e,t,n){t=b(t,n);for(var i=g.keys(e),o=i.length,a={},s=0;s<o;s++){var r=i[s];a[r]=t(e[r],r,e)}return a},g.pairs=function(e){for(var t=g.keys(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=[t[o],e[t[o]]];return i},g.invert=function(e){for(var t={},n=g.keys(e),i=0,o=n.length;i<o;i++)t[e[n[i]]]=n[i];return t},g.functions=g.methods=function(e){var t=[];for(var n in e)g.isFunction(e[n])&&t.push(n);return t.sort()};var F=function(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var o=1;o<i;o++)for(var a=arguments[o],s=e(a),r=s.length,c=0;c<r;c++){var l=s[c];t&&void 0!==n[l]||(n[l]=a[l])}return n}};g.extend=F(g.allKeys),g.extendOwn=g.assign=F(g.keys),g.findKey=function(e,t,n){t=b(t,n);for(var i,o=g.keys(e),a=0,s=o.length;a<s;a++)if(t(e[i=o[a]],i,e))return i};var q,M,U=function(e,t,n){return t in n};g.pick=y(function(e,t){var n={},i=t[0];if(null==e)return n;g.isFunction(i)?(t.length>1&&(i=x(i,t[1])),t=g.allKeys(e)):(i=U,t=j(t,!1,!1),e=Object(e));for(var o=0,a=t.length;o<a;o++){var s=t[o],r=e[s];i(r,s,e)&&(n[s]=r)}return n}),g.omit=y(function(e,t){var n,i=t[0];return g.isFunction(i)?(i=g.negate(i),t.length>1&&(n=t[1])):(t=g.map(j(t,!1,!1),String),i=function(e,n){return!g.contains(t,n)}),g.pick(e,i,n)}),g.defaults=F(g.allKeys,!0),g.create=function(e,t){var n=w(e);return t&&g.extendOwn(n,t),n},g.clone=function(e){return g.isObject(e)?g.isArray(e)?e.slice():g.extend({},e):e},g.tap=function(e,t){return t(e),e},g.isMatch=function(e,t){var n=g.keys(t),i=n.length;if(null==e)return!i;for(var o=Object(e),a=0;a<i;a++){var s=n[a];if(t[s]!==o[s]||!(s in o))return!1}return!0},q=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&M(e,t,n,i)},M=function(e,t,n,i){e instanceof g&&(e=e._wrapped),t instanceof g&&(t=t._wrapped);var o=p.call(e);if(o!==p.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return r.valueOf.call(e)===r.valueOf.call(t)}var a="[object Array]"===o;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,c=t.constructor;if(s!==c&&!(g.isFunction(s)&&s instanceof s&&g.isFunction(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!q(e[l],t[l],n,i))return!1}else{var u,d=g.keys(e);if(l=d.length,g.keys(t).length!==l)return!1;for(;l--;)if(u=d[l],!E(t,u)||!q(e[u],t[u],n,i))return!1}return n.pop(),i.pop(),!0},g.isEqual=function(e,t){return q(e,t)},g.isEmpty=function(e){return null==e||(I(e)&&(g.isArray(e)||g.isString(e)||g.isArguments(e))?0===e.length:0===g.keys(e).length)},g.isElement=function(e){return!(!e||1!==e.nodeType)},g.isArray=d||function(e){return"[object Array]"===p.call(e)},g.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},g.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){g["is"+e]=function(t){return p.call(t)==="[object "+e+"]"}}),g.isArguments(arguments)||(g.isArguments=function(e){return E(e,"callee")});var $=i.document&&i.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof $&&(g.isFunction=function(e){return"function"==typeof e||!1}),g.isFinite=function(e){return!g.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},g.isNaN=function(e){return g.isNumber(e)&&isNaN(e)},g.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===p.call(e)},g.isNull=function(e){return null===e},g.isUndefined=function(e){return void 0===e},g.has=function(e,t){if(!g.isArray(t))return E(e,t);for(var n=t.length,i=0;i<n;i++){var o=t[i];if(null==e||!u.call(e,o))return!1;e=e[o]}return!!n},g.noConflict=function(){return i._=o,this},g.identity=function(e){return e},g.constant=function(e){return function(){return e}},g.noop=function(){},g.property=function(e){return g.isArray(e)?function(t){return S(t,e)}:k(e)},g.propertyOf=function(e){return null==e?function(){}:function(t){return g.isArray(t)?S(e,t):e[t]}},g.matcher=g.matches=function(e){return e=g.extendOwn({},e),function(t){return g.isMatch(t,e)}},g.times=function(e,t,n){var i=Array(Math.max(0,e));t=x(t,n,1);for(var o=0;o<e;o++)i[o]=t(o);return i},g.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},g.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=g.invert(H),z=function(e){var t=function(t){return e[t]},n="(?:"+g.keys(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}};g.escape=z(H),g.unescape=z(B),g.result=function(e,t,n){g.isArray(t)||(t=[t]);var i=t.length;if(!i)return g.isFunction(n)?n.call(e):n;for(var o=0;o<i;o++){var a=null==e?void 0:e[t[o]];void 0===a&&(a=n,o=i),e=g.isFunction(a)?a.call(e):a}return e};var W=0;g.uniqueId=function(e){var t=++W+"";return e?e+t:t},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,Y=function(e){return"\\"+J[e]};g.template=function(e,t,n){!t&&n&&(t=n),t=g.defaults({},t,g.templateSettings);var i,o=RegExp([(t.escape||V).source,(t.interpolate||V).source,(t.evaluate||V).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(o,function(t,n,i,o,r){return s+=e.slice(a,r).replace(G,Y),a=r+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var r=function(e){return i.call(this,e,g)},c=t.variable||"obj";return r.source="function("+c+"){\n"+s+"}",r},g.chain=function(e){var t=g(e);return t._chain=!0,t};var X=function(e,t){return e._chain?g(t).chain():t};g.mixin=function(e){return g.each(g.functions(e),function(t){var n=g[t]=e[t];g.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),X(this,n.apply(g,e))}}),g},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];g.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],X(this,n)}}),g.each(["concat","join","slice"],function(e){var t=a[e];g.prototype[e]=function(){return X(this,t.apply(this._wrapped,arguments))}}),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return String(this._wrapped)},void 0===(n=function(){return g}.apply(t,[]))||(e.exports=n)}()}).call(this,n(164)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";const{CompositeDisposable:i}=n(0),{flatten:o,compact:a}=n(1),s=n(20),r=n(166),c={python:["py"],javascript:["js"]};e.exports=class{init(e){return this.Kite=e,this.subscriptions=new i,this.kiteEditorByEditorID=[],this.pathSubscriptionsByEditorID={},this.subscriptions.add(atom.workspace.observeTextEditors(e=>{if(this.isGrammarSupported(e)&&this.subscribeToEditor(e),!this.pathSubscriptionsByEditorID[e.id]){const t=new i,n=()=>{t.dispose(),delete this.pathSubscriptionsByEditorID[e.id],this.subscriptions.remove(t)};this.subscriptions.add(t),t.add(e.onDidChangePath(()=>{this.isGrammarSupported(e)?this.subscribeToEditor(e):this.hasEditorSubscription(e)&&this.unsubscribeFromEditor(e)})),t.add(e.onDidDestroy(()=>n())),this.pathSubscriptionsByEditorID[e.id]=t}})),s.getSupportedLanguages().then(e=>{this.supportedLanguages=e})}dispose(){delete this.kiteEditorByEditorID,this.subscriptions&&this.subscriptions.dispose()}subscribeToEditor(e){if(!this.hasEditorSubscription(e)){const t=new r(e);this.kiteEditorByEditorID[e.id]=t,this.subscriptions.add(t);const n=e.onDidDestroy(()=>{this.unsubscribeFromEditor(e),this.subscriptions.remove(n)});this.subscriptions.add(n)}}unsubscribeFromEditor(e){if(!this.hasEditorSubscription(e))return;const t=this.kiteEditorByEditorID[e.id];t.dispose(),this.subscriptions.remove(t),delete this.kiteEditorByEditorID[e.id]}hasEditorSubscription(e){return null!=this.kiteEditorForEditor(e)}kiteEditorForEditor(e){return e&&this.kiteEditorByEditorID&&this.kiteEditorByEditorID[e.id]}getSupportedLanguages(){return this.supportedLanguages}hasSupportedFileOpen(){return atom.workspace.getTextEditors().some(e=>this.isGrammarSupported(e))}hasActiveSupportedFile(){const e=atom.workspace.getActiveTextEditor();return e&&this.isGrammarSupported(e)}isGrammarSupported(e){return e&&(this.supportedLanguages?new RegExp(this.getSupportedLanguagesRegExp(this.supportedLanguages)).test(e.getPath()||""):/\.py$/.test(e.getPath()||""))}getSupportedLanguagesRegExp(e){return`.(${a(o(e.map(e=>c[e]))).join("|")})$`}getEditorsForPath(e){return atom.workspace.getPaneItems().filter(t=>t&&t.getURI&&t.getURI()===e)}}},function(e,t,n){"use strict";let i,o,a,s,r,c,l,p,u;e.exports=class{constructor(e){this.editor=e,this.buffer=e.getBuffer(),this.editorElement=atom.views.getView(e),this.fixesHistory=[],this.subscribeToEditor(e)}dispose(){this.subscriptions&&this.subscriptions.dispose(),delete this.subscriptions,delete this.editorElement,delete this.editor,delete this.buffer}subscribeToEditor(e){p||(({CompositeDisposable:p}=n(0)),({screenPositionForMouseEvent:c,pixelPositionForMouseEvent:l}=n(1)),s=n(167),o=n(20),r=n(170));const t=new p;this.subscriptions=t,this.events=new r(e),t.add(this.events);const u=atom.workspace.getActiveTextEditor();u&&e!==u||this.events.focus(),this.hoverGesture=new s(e,{ignoredSelector:"atom-overlay, atom-overlay *"}),t.add(this.hoverGesture),t.add(this.hoverGesture.onDidActivate(({position:t})=>{atom.config.get("kite.enableHoverUI")&&(a||(a=n(24)),a.showHoverAtPositionWithDelay(e,t),a.setWordHoverActive(!0))})),t.add(this.hoverGesture.onDidDeactivate(()=>{atom.config.get("kite.enableHoverUI")&&(a||(a=n(24)),a.setWordHoverActive(!1))})),t.add(e.onDidChangeCursorPosition(()=>{i||(i=n(21)),atom.config.get("kite.enableHoverUI")&&(a||(a=n(24)),a.setWordHoverActive(!1))}))}expandPosition(e){u||(u=n(12)),o.getHoverDataAtPosition(this.editor,e).then(e=>{const[t]=e.symbol;t&&t.id&&this.expandId(t.id)})}expandId(e){atom.applicationDelegate.openExternal(`kite://docs/${encodeURI(e)}`)}openDefinitionForId(e){return o.getValueReportDataForId(e).then(e=>this.openDefinition(e.report.definition))}openDefinitionAtRange(e){const t=this.tokensList.tokenAtRange(e);return this.openTokenDefinition(t)}openDefinitionAtPosition(e){const t=this.tokensList.tokenAtPosition(e);return this.openTokenDefinition(t)}openDefinition(e){return u||(u=n(12)),""===e.filename.trim()?Promise.resolve(!1):new Promise((t,n)=>(u.featureRequested("definition"),!!e&&atom.workspace.open(e.filename).then(t=>(u.featureFulfilled("definition"),t.setCursorBufferPosition([e.line-1,e.column?e.column-1:0],{autoscroll:!0}),!0))))}screenPositionForMouseEvent(e){return c(this.editorElement,e)}pixelPositionForMouseEvent(e){return l(this.editorElement,e)}}},function(e,t,n){"use strict";const{CompositeDisposable:i}=n(0),o=n(168),{DisposableEvent:a,isWithinTextOfLine:s}=n(1);e.exports=class extends o{constructor(e,t){super(e,t),this.registerEvents()}dispose(){super.dispose(),this.subscriptions.dispose()}registerEvents(){this.subscriptions=new i,this.subscriptions.add(new a(document,"mouseout",e=>{const t=e.relatedTarget||e.toElement;t&&"HTML"!=t.nodeName||this.deactivate()})),this.subscriptions.add(new a(this.editorElement,"mousemove",e=>{if(!this.matchesModifiers(e))return void this.deactivate();if(e.target.matches(this.options.ignoredSelector))return;const t=this.wordRangeForMouseEvent(event);t&&this.lastRange&&!this.lastRange.isEqual(t)&&!t.isEmpty()?s(this.editorElement,event)&&this.activate({position:this.screenPositionForMouseEvent(event),range:t}):t&&!t.isEmpty()||this.deactivate(),this.lastRange=t}))}}},function(e,t,n){"use strict";const{Range:i}=n(0),o=n(169),a=n(43),{screenPositionForMouseEvent:s}=n(1);e.exports=class extends o{constructor(e,t){super(e,t)}matchesModifiers(e){return e.altKey==!!this.options.altKey&&e.ctrlKey==!!this.options.ctrlKey&&e.shiftKey==!!this.options.shiftKey&&e.metaKey==!!this.options.metaKey}screenPositionForMouseEvent(e){return s(this.editorElement,e)}wordRangeForMouseEvent(e){const t=s(this.editorElement,e);if(t){const e=new a(this.editor);return e.setScreenPosition(t),i.fromObject(e.getCurrentWordBufferRange({includeNonWordCharacters:!1}))}return null}}},function(e,t,n){"use strict";const{Emitter:i}=n(0);e.exports=class{constructor(e,t){this.editor=e,this.buffer=e.getBuffer(),this.editorElement=atom.views.getView(e),this.options=t||{},this.emitter=new i}dispose(){this.emitter.dispose()}pause(){this.paused=!0}resume(){this.paused=!1}isActive(){return this.active}activate(e){this.active&&this.deactivate(),this.active=!0,this.paused||this.emitter.emit("did-activate",e)}deactivate(e){this.active&&(this.active=!1,this.paused||this.emitter.emit("did-deactivate",e))}onDidActivate(e){return this.emitter.on("did-activate",e)}onDidDeactivate(e){return this.emitter.on("did-deactivate",e)}}},function(e,t,n){"use strict";const{CompositeDisposable:i}=n(0),o=n(11),{MAX_FILE_SIZE:a,MAX_PAYLOAD_SIZE:s}=n(44),{DisposableEvent:r}=n(1),{version:c}=n(12);let l;e.exports=class{constructor(e){l||(l=n(21)),this.editor=e,this.subscriptions=new i,this.pendingEvents=[],this.subscriptions.add(e.onDidChange(e=>{this.send("edit")})),this.subscriptions.add(e.onDidChangeSelectionRange(()=>{this.send("selection")}));const t=atom.views.getView(this.editor);let o;this.subscriptions.add(new r(t,"mousedown",()=>{o=t.hasFocus()})),this.subscriptions.add(new r(t,"focus",()=>{o||this.focus(),o=null}))}focus(){return this.send("focus")}dispose(){delete this.editor,this.subscriptions.dispose()}reset(){clearTimeout(this.timeout),this.pendingEvents=[]}send(e){return this.pendingPromise||(this.pendingPromise=new Promise((e,t)=>{this.pendingPromiseResolve=e,this.pendingPromiseReject=t})),this.pendingEvents.push(e),clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.mergeEvents(),0),this.pendingPromise.catch(e=>{})}mergeEvents(){if(!this.editor)return;let e=this.pendingEvents.filter(e=>"focus"===e)[0],t=this.pendingEvents.some(e=>"edit"===e)?"edit":this.pendingEvents.pop();this.reset();const n=JSON.stringify(this.buildEvent(t));if(n.length>s)return this.reset();let i=Promise.resolve();return e&&t!==e&&(i=i.then(()=>o.request({path:"/clientapi/editor/event",method:"POST"},JSON.stringify(this.buildEvent(e))))),i.then(()=>o.request({path:"/clientapi/editor/event",method:"POST"},n)).then(e=>{this.pendingPromiseResolve(e)}).catch(e=>{this.pendingPromiseReject&&this.pendingPromiseReject(e)}).then(()=>{delete this.pendingPromise,delete this.pendingPromiseResolve,delete this.pendingPromiseReject})}buildEvent(e){let t=this.editor.getText();const n=this.editor.getCursorBufferPosition(),i=this.editor.getBuffer().characterIndexForPosition(n);return t&&t.length>a&&(e="skip",t=""),this.makeEvent(e,this.editor.getPath(),t,"skip"===e?0:i)}makeEvent(e,t,n,i){return{source:"atom",action:e,filename:t,text:n,selections:[{start:i,end:i}],editor_version:atom.getVersion(),plugin_version:c}}}},function(e,t,n){"use strict";n(45);const{Point:i,CompositeDisposable:o}=n(0),{symbolName:a,symbolType:s}=n(32),{internalGotoURL:r}=n(70),{debugData:c,wrapAfterParenthesisAndDots:l}=n(72),{DisposableEvent:p,idToDottedPath:u}=n(1);let d;e.exports=class extends HTMLElement{static initClass(){return customElements.define("kite-hover",this),this}disconnectedCallback(){this.subscriptions&&this.subscriptions.dispose()}connectedCallback(){this.classList.add("native-key-bindings"),this.setAttribute("tabindex","-1")}setData(e,t,m){if(m=i.fromObject(m),e&&e.symbol&&e.symbol.length){const[t]=e.symbol,i=[];e.report.definition&&e.report.definition.filename&&""!==e.report.definition.filename.trim()&&i.push(`<a\n        href="${r(e.report.definition)}">Def<span class="kite-link-icon">&#8619;</span></a>`),i.push(`<a href="kite-atom-internal://open-search-docs/${u(t.id)}">Docs<span class="kite-link-icon">&#8663;</span></a>`),this.innerHTML=`\n    <div class="definition">\n      <kite-logo small title="Powered by Kite" class="badge"></kite-logo>\n      <span class="name"><code>${l(a(t))}</code></span>\n      <span class="type">&#10098; ${s(t)} &#10099;</span>\n      <kite-links metric="Hover">\n        ${i.join(" ")}\n      </kite-links>\n    </div>\n    ${c(e)}`,this.subscriptions=new o;const m=this.querySelector("kite-links"),h=this.querySelector(".debug");h&&this.subscriptions.add(new p(h,"mousewheel",e=>{e.stopPropagation()})),m&&this.subscriptions.add(m.onDidClickMoreLink(()=>{d||(d=n(24)),d.dismiss()}))}else this.innerHTML=""}}.initClass()},function(e,t,n){"use strict";const{CompositeDisposable:i,Disposable:o,TextEditor:a}=n(0),s=n(11),r=n(67),{MAX_FILE_SIZE:c}=n(44);n(73);const{STATES:l}=s,p={[l.UNSUPPORTED]:"Kite only supports macOS, Windows, and Ubuntu at the moment.",[l.UNINSTALLED]:"Kite is not installed.",[l.INSTALLED]:"Kite is not running.",[l.RUNNING]:"Kite is running but not reachable.",[l.READY]:"Kite is ready.",sizeExceedsLimit:"The current file is too large for Kite to handle",indexing:"Kite engine is indexing your code",syncing:"Kite engine is syncing your code"},u={[l.UNSUPPORTED]:"unsupported",[l.UNINSTALLED]:"uninstalled",[l.INSTALLED]:"installed",[l.RUNNING]:"running",[l.READY]:"ready"},d={[l.UNSUPPORTED]:"",[l.UNINSTALLED]:"Kite: not installed",[l.INSTALLED]:"Kite: not running",[l.RUNNING]:"",[l.READY]:""};e.exports=class{constructor(){this.element=document.createElement("div"),this.element.className="kite-status",this.element.setAttribute("status","unknown"),this.element.innerHTML='<kite-logo small class="badge"></kite-logo>\n                      <kite-logo sync></kite-logo>\n                      <span class="text"></span>',this.element.classList.add("inline-block"),this.tooltipText="",this.statusText=this.element.querySelector(".text")}init(e){this.subscriptions=new i,this.editors=e.getModule("editors"),this.editors&&(this.subscriptions.add(atom.tooltips.add(this.element,{title:()=>this.tooltipText})),this.subscriptions.add(atom.workspace.onDidChangeActivePaneItem(e=>{e instanceof a&&this.editors.isGrammarSupported(e)?this.startPolling():this.stopPolling()})),this.editors.isGrammarSupported(atom.workspace.getActiveTextEditor())&&this.startPolling())}dispose(){this.subscriptions&&this.subscriptions.dispose(),delete this.subscriptions}getElement(){return this.element}startPolling(){const e=setInterval(()=>this.pollStatus(),atom.config.get("kite.pollingInterval"));return this.pollingDisposable=new o(()=>{clearInterval(e)}),this.subscriptions.add(this.pollingDisposable),this.pollStatus()}stopPolling(){return this.pollingDisposable&&(this.subscriptions.remove(this.pollingDisposable),this.pollingDisposable.dispose()),this.pollStatus()}pollStatus(){if(this.isPolling)return this.pollPromise;if(this.isPolling=!0,this.editors.hasActiveSupportedFile()){const e=atom.workspace.getActiveTextEditor();this.pollPromise=s.requestJSON({path:r.statusPath(e.getPath())}).then(t=>{this.element.removeAttribute("is-syncing"),this.element.removeAttribute("is-indexing"),this.statusText.innerHTML=d[l.READY],this.element.setAttribute("status",u[l.READY]),"indexing"===t.status?(this.element.setAttribute("is-indexing",""),this.tooltipText=p.indexing):"syncing"===t.status?(this.element.setAttribute("is-syncing",""),this.tooltipText=p.syncing):this.fileExceedsMaxSize(e)?this.tooltipText=p.sizeExceedsLimit:this.tooltipText=p[l.READY]}).catch(e=>{const{state:t}=e.data;this.element.removeAttribute("is-syncing"),this.element.removeAttribute("is-indexing"),null!=t?(this.tooltipText=p[t],this.statusText.innerHTML=d[t],this.element.setAttribute("status",u[t])):(this.element.setAttribute("status","unsupported"),this.statusText.innerHTML="",this.tooltipText="")})}else this.element.removeAttribute("is-syncing"),this.element.removeAttribute("is-indexing"),this.element.setAttribute("status","unsupported"),this.tooltipText="",this.statusText.innerHTML="",this.pollPromise=Promise.resolve();return this.pollPromise=this.pollPromise.then(()=>{this.isPolling=!1}),this.pollPromise}fileExceedsMaxSize(e){return e.getBuffer().getLength()>c}}},function(e,t,n){"use strict";n(73);const{CompositeDisposable:i,TextEditor:o}=n(0),{DisposableEvent:a,addDelegatedEventListener:s,parent:r,delayPromise:c}=n(1),l=n(11),{retryPromise:p}=n(66),u=n(46),d=n(20),{MAX_FILE_SIZE:m}=n(44),{STATES:h}=l,f='<span class="dot"></span>';e.exports=class extends HTMLElement{static initClass(){return customElements.define("kite-status-panel",this),this}setApp(e){this.app=e}hide(){this.parentNode&&(this.parentNode.removeChild(this),this.subscriptions.dispose())}pendingStatus(e){const t=this.querySelector(".status");t&&(t.innerHTML=`\n      ${e}\n      <span class='loading loading-spinner-small inline-block'></span>\n      `)}show(e){return this.renderCurrent().then(()=>{document.body.appendChild(this),this.setPosition(e),this.scheme=new u("kite-atom-internal",this),this.subscriptions=new i;const t=this.querySelector("kite-links");if(t){const e=t.onDidClickActionLink(()=>{this.hide()});e&&this.subscriptions.disposed&&this.subscriptions.add(e)}this.subscriptions.add(this.scheme),this.subscriptions.add(this.scheme.onDidClickLink(e=>this.handleAction(e))),this.subscriptions.add(atom.workspace.onDidChangeActivePaneItem(t=>{t instanceof o&&this.renderCurrent().then(()=>this.setPosition(e))})),this.subscriptions.add(s(this,"click",'.kite-warning-box [data-method="post"]',e=>{const t=e.target,n=r(t,".kite-warning-box");t.innerHTML="<span class='loading loading-spinner-tiny inline-block'></span>",t.style.pointerEvents="none",l.request({path:"/api/account/resendVerification",method:t.getAttribute("data-method")}).then(e=>{n.classList.remove("kite-warning-box"),n.classList.add("kite-info-box"),n.textContent=t.getAttribute("data-confirmation")}).catch(e=>{n.innerHTML=t.getAttribute("data-failure")})})),this.subscriptions.add(new a(window,"resize",t=>{this.setPosition(e)})),this.subscriptions.add(new a(document.body,"click",e=>{const{top:t,left:n,right:i,bottom:o}=this.getBoundingClientRect(),{pageX:a,pageY:s}=e;this.starting||this.installing||!(a<n||a>i||s<t||s>o)||this.hide()}))})}pauseNotifications(){this.app.kite&&this.app.kite.notifications.pauseNotifications()}resumeNotifications(){this.app.kite&&this.app.kite.notifications.resumeNotifications()}handleAction({url:e}){let t;switch(this.pauseNotifications(),e.host){case"open-account-web":atom.applicationDelegate.openExternal("http://localhost:46624/clientapi/desktoplogin?d=/settings/account"),this.hide();break;case"open-copilot-settings":this.app.copilotSettings(),this.hide();break;case"open-copilot-permissions":atom.applicationDelegate.openExternal(`kite://settings/permissions${e.path||""}`);break;case"install":this.pendingStatus("Installing Kite"),this.installing=!0,t=this.app.install().then(()=>this.app.start()).then(()=>p(()=>l.isUserAuthenticated(),10,500)).catch(e=>{if(4!==e.data)throw e}).then(()=>{this.installing=!1}).catch(()=>{this.installing=!1}).then(()=>this.renderCurrent());break;case"start":this.pendingStatus("Launching Kite"),this.starting=!0,t=this.app.start().then(()=>p(()=>l.isUserAuthenticated(),10,500)).then(()=>{this.starting=!1}).catch(()=>{this.starting=!1}).then(()=>this.renderCurrent());break;case"start-enterprise":this.pendingStatus("Launching Kite"),this.starting=!0,t=this.app.startEnterprise().then(()=>c(()=>Promise.resolve(),3e3)).then(()=>{this.starting=!1}).catch(()=>{this.starting=!1}).then(()=>this.renderCurrent());break;case"login":this.app.login(),this.hide()}t?t.then(()=>this.renderCurrent()).then(()=>this.resumeNotifications()).catch(e=>console.error(e)):this.resumeNotifications()}setPosition(e){if(!e)return;const t=e.getBoundingClientRect();this.style.cssText=`\n    top: ${Math.round(t.top-20)}px;\n    left: ${Math.round(t.right)}px;\n    `}renderCurrent(){if(this.installing||this.starting)return Promise.resolve();const e=atom.workspace.getActiveTextEditor(),t=[l.checkHealth().then(e=>Promise.all([l.isKiteInstalled().then(()=>!0,()=>!1),l.isKiteEnterpriseInstalled().then(()=>!0,()=>!1)]).then(([t,n])=>({state:e,kiteInstalled:t,kiteEnterpriseInstalled:n}))),d.getUserAccountInfo().catch(()=>{}),d.getStatus(e),d.isUserAuthenticated().catch(()=>{})];return Promise.all(t).then(e=>{this.render(...e)})}render(e,t,n,i){this.innerHTML=`\n      ${this.renderSubscription(e)}\n      ${this.renderLinks(t)}\n      ${this.renderStatus(e,n,i)}\n    `}renderLinks(e){return`\n    <kite-links emit-action="true">\n    <ul class="links ${e?"has-account":"no-account"}">\n      <li><a class="icon icon-search" href="kite-atom-internal://open-search-docs">Search Python Docs</a></li>\n      <li><a class="icon icon-question" href="kite-atom-internal://open-kite-plugin-help">Help</a></li>\n    </ul>\n    <ul class="links ${e?"has-account":"no-account"}">\n      <li><a class="icon icon-settings" href="kite-atom-internal://open-settings">Atom Plugin Settings</a></li>\n      <li><a class="icon icon-settings"\n             href="kite-atom-internal://open-copilot-settings">Kite Engine Settings</a></li>\n    </ul>\n    </kite-links>\n    `}renderStatus(e,t,n){let i="";switch(e.state){case h.UNSUPPORTED:i=`<div class="text-danger">Kite engine is not available on your system ${f}</div>`;break;case h.UNINSTALLED:i=`\n          <div class="text-danger">Kite engine is not installed ${f}</div>\n          <a href="https://kite.com/download" class="btn btn-error">Install now</a>\n        `;break;case h.INSTALLED:i=l.hasManyKiteInstallation()||l.hasManyKiteEnterpriseInstallation()?`<div class="text-danger">Kite engine is not running ${f}<br/>\n          You have multiple versions of Kite installed. Please launch your desired one.</div>`:e.kiteInstalled&&e.kiteEnterpriseInstalled?`\n          <div class="text-danger">Kite engine is not running ${f}<br/>\n          Which version of kite do you want to launch?</div>\n          <a href="kite-atom-internal://start-enterprise"\n             class="btn btn-purple">Launch Kite Enterprise</a><br/>\n          <a href="kite-atom-internal://start" class="btn btn-info">Launch Kite cloud</a>`:e.kiteInstalled?`<div class="text-danger">Kite engine is not running ${f}</div>\n          <a href="kite-atom-internal://start" class="btn btn-error">Launch now</a>`:`<div class="text-danger">Kite engine is not running ${f}</div>\n          <a href="kite-atom-internal://start-enterprise" class="btn btn-error">Launch now</a>`;break;case h.RUNNING:i='\n          <div class="text-danger">Kite engine is not reachable</div>\n        ';break;case h.READY:const o=atom.workspace.getActiveTextEditor();if(o)if(this.app.kite.getModule("editors").isGrammarSupported(o))if(o&&o.getText().length>=m)i=`\n            <div class="text-warning">The current file is too large for Kite to handle ${f}</div>`;else switch(t.status){case"":case"ready":i=`<div class="ready">Kite engine is ready and working ${f}</div>`;break;case"indexing":i=`<div class="ready">Kite engine is indexing your code ${f}</div>`;break;case"syncing":i=`<div class="ready">Kite engine is syncing your code ${f}</div>`}else i=`<div>Open a supported file to see Kite's status ${f}</div>`;else i=`<div>Open a supported file to see Kite's status ${f}</div>`;n||(i=`\n          <div>\n            Kite engine is not logged in\n            <a href="kite-atom-internal://open-copilot-settings" class="btn">Login now</a>\n          </div>\n          ${i}`)}return`<div class="status">${i}</div>`}renderSubscription(e){return`<div class="split-line subscription">\n      <div class="left"><kite-logo small></kite-logo></div>\n      <div class="right">${e.state>=h.READY?'<a href="kite-atom-internal://open-account-web">Account</a>':""}</div>\n    </div>`}}.initClass()},function(e,t,n){"use strict";const i=n(20),o=n(175),{delayPromise:a}=n(1);let s;const r={selector:".source.python, .source.js",disableForSelector:[".source.python .comment",".source.js .comment"].join(", "),inclusionPriority:5,suggestionPriority:5,excludeLowerPriority:!1,getSuggestions(e){return s||(s=n(21)),s.getModule("editors").isGrammarSupported(e.editor)?a(()=>{let t=Promise.resolve();const n=e.editor.getCursorBufferPosition();return this.isInsideFunctionCall(e.editor,n)||this.isInsideFunctionCallBrackets(e.editor,n)?t=t.then(()=>this.loadSignature(e)):this.isSignaturePanelVisible()?t=t.then(()=>this.loadSignature(e)):this.clearSignature(),atom.config.get("kite.enableCompletions",!1)?atom.config.get("kite.enableSnippets")?t.then(()=>i.getSnippetCompletionsAtPosition(e.editor)):t.then(()=>i.getCompletionsAtPosition(e.editor,e.editor.getCursorBufferPosition())).then(t=>" "===e.prefix?t.map(e=>(e.replacementPrefix="",e)):t).then(t=>(t.forEach(t=>{t.replacementPrefix||e.prefix!==t.text||(t.replacementPrefix=t.text)}),t)):t.then(()=>[])},0):Promise.resolve()},isInsideFunctionCall(e,t){const n=e.scopeDescriptorForBufferPosition(t);return parseFloat(atom.getVersion())<=1.23?n.scopes.some(e=>/(function|method)-call|arguments/.test(e)):n.scopes.some(e=>/(function|method)-call\.arguments/.test(e))},isOnFunctionCallBrackets:(e,t)=>e.scopeDescriptorForBufferPosition(t).scopes.some(e=>/arguments(.*)\.bracket/.test(e)),isInsideFunctionCallBrackets(e,t){const n=e.getTextInBufferRange([[t.row,t.column-1],[t.row,t.column]]),i=e.getTextInBufferRange([[t.row,t.column],[t.row,t.column+1]]);return this.isOnFunctionCallBrackets(e,t)&&(/\(/.test(n)||/\)/.test(i))},loadSignature({editor:e,position:t}){return i.getSignaturesAtPosition(e,t||e.getCursorBufferPosition()).then(e=>{if(e){const t=this.getSuggestionsListElement();t.maxVisibleSuggestions=atom.config.get("kite.maxVisibleSuggestionsAlongSignature");const n=null==this.signaturePanel;this.signaturePanel=this.signaturePanel||new o,this.signaturePanel.setListElement(t),this.signaturePanel.setData(e,!1);const i=t.element?t.element:t;(n||this.sigPanelNeedsReinsertion(i))&&(i.style.width=null,i.appendChild(this.signaturePanel))}else this.clearSignature();return null!=e}).catch(e=>(this.clearSignature(),!1))},sigPanelNeedsReinsertion:e=>!e.querySelector("kite-signature"),clearSignature(){this.isSignaturePanelVisible()&&this.signaturePanel.parentNode.removeChild(this.signaturePanel)},isSignaturePanelVisible(){const e=this.getSuggestionsListElement(),t=e.element||e;return t&&t.querySelector("kite-signature")},getSuggestionsListElement(){if(!atom.packages.getAvailablePackageNames().includes("autocomplete-plus"))return null;if(this.suggestionListElement)return this.suggestionListElement;const e=atom.packages.getActivePackage("autocomplete-plus").mainModule;if(!e||!e.autocompleteManager||!e.autocompleteManager.suggestionList)return null;const t=e.autocompleteManager.suggestionList;return this.suggestionListElement=t.suggestionListElement?t.suggestionListElement:atom.views.getView(e.autocompleteManager.suggestionList),this.suggestionListElement.ol||this.suggestionListElement.renderList(),this.suggestionListElement}};e.exports=r},function(e,t,n){"use strict";const{CompositeDisposable:i}=n(0),{head:o,DisposableEvent:a,detailLang:s,detailGet:r,getFunctionDetails:c,idToDottedPath:l}=n(1),{valueLabel:p,valueName:u,callSignature:d,returnTypes:m}=n(32),{highlightCode:h,wrapAfterParenthesis:f,debugData:g,renderParameter:v}=n(72);e.exports=class extends HTMLElement{static initClass(){return customElements.define("kite-signature",this),this}setListElement(e){this.listElement=e}disconnectedCallback(){this.subscriptions&&this.subscriptions.dispose(),this.listElement.maxVisibleSuggestions=atom.config.get("autocomplete-plus.maxVisibleSuggestions"),this.resizeObserver.disconnect(),this.style.maxWidth="",this.parentNode&&this.parentNode.removeChild(this)}connectedCallback(){this.listElement.maxVisibleSuggestions=this.compact?atom.config.get("autocomplete-plus.maxVisibleSuggestions"):atom.config.get("kite.maxVisibleSuggestionsAlongSignature");const e=this.parentNode;let t;this.resizeObserver=new ResizeObserver(([{contentRect:n}])=>{t||(t=!0,requestAnimationFrame(()=>{const n=e.querySelector("ol:not(:empty)");if(n){const e=n.getBoundingClientRect();e.width>=this.offsetWidth?this.style.maxWidth=e.width+"px":this.style.maxWidth=""}t=!1}))}),e instanceof Element&&this.resizeObserver.observe(e),requestAnimationFrame(()=>this.checkWidth())}setData(e,t=!1){const n=o(e.calls),x=n.func_name||u(n.callee),b=c(n.callee);let y="";this.removeAttribute("compact");let w="";"python"===s(b)&&r(b,"kwarg_parameters")&&(w=`<section class="kwargs ${atom.config.get("kite.signatureKwargsVisible")?"visible":""}">\n      <h4><span class="title">**${r(b,"kwarg").name}<span class="kwargs-toggle">&#8613;</span></span></h4>\n      <kite-links metric="Signature">\n      <dl>\n      ${r(b,"kwarg_parameters").map((e,t)=>v(e,"",r(n,"in_kwargs")&&n.arg_index===t)).join("")}\n      </dl></kite-links>\n      </section>`);{let e="";const t=atom.config.get("kite.signaturePopularPatternsVisible");n.signatures&&n.signatures.length&&(e=`\n          <section class="patterns ${t?"visible":""}">\n          <h4><span class="title">How others used this<span class="popular-patterns-toggle">&#8613;</span></span></h4>\n          ${h(f(n.signatures.map(e=>d(e)).map(e=>`${x}(${e})`).join("\n")))}\n          </section>`);const i=[`<a class="kite-link docs" href="kite-atom-internal://open-search-docs/${l(n.callee.id)}">Docs<span class="kite-link-icon">&#8663;</span></a>`];t||i.unshift('<a class="kite-link patterns" href="#">Examples<span class="kite-link-icon">&#8615;</span></a>'),y=`\n      ${w}\n      ${e}\n      <kite-links class="one-line footer-links" metric="Signature">\n        ${i.join(" ")}\n        <div class="flex-separator"></div>\n        <kite-logo small title="Powered by Kite" class="badge"></kite-logo>\n      </kite-links>\n      `}const k=m(n.callee);this.innerHTML=`\n    <div class="kite-signature-wrapper">\n      <div class="name"><pre>${p(n.callee,r(n,"in_kwargs")?-1:n.arg_index)}${k?` &#8614; ${k}`:""}</pre></div>\n      ${y}\n    </div>\n    ${g(e)}\n    `,this.subscriptions&&this.subscriptions.dispose(),this.compact=!0,this.currentIndex=n.arg_index,this.subscriptions=new i;const E=this.querySelector("section.kwargs kite-links"),S=this.querySelector("kite-links.footer-links");let P=this.querySelector("kite-links.footer-links a.kite-link.patterns");P||((P=document.createElement("a")).className="kite-link patterns",P.setAttribute("href","#"),P.innerHTML='Examples<span class="kite-link-icon">&#8615;</span>');const _=this.querySelector("kite-links.footer-links a.kite-link.docs"),I=this.querySelector("a.kwargs"),T=this.querySelector("section.kwargs"),D=atom.workspace.getActiveTextEditor(),A=atom.views.getView(D),j=this.querySelector("section.kwargs h4 span.title"),O=this.querySelector("span.popular-patterns-toggle"),L=this.querySelector("section.patterns h4 span.title"),N=this.querySelector("section.patterns");this.subscriptions.add(new a(this,"click",e=>{A&&A.focus()})),N&&O&&L&&S&&this.subscriptions.add(new a(L,"click",e=>{S.insertBefore(P,_),N.classList.toggle("visible"),atom.config.set("kite.signaturePopularPatternsVisible",!atom.config.get("kite.signaturePopularPatternsVisible"))})),P&&N&&S&&this.subscriptions.add(new a(P,"click",e=>{S.removeChild(P),N.classList.toggle("visible"),atom.config.set("kite.signaturePopularPatternsVisible",!atom.config.get("kite.signaturePopularPatternsVisible"))})),T&&j&&this.subscriptions.add(new a(j,"click",e=>{T.classList.toggle("visible"),atom.config.set("kite.signatureKwargsVisible",!atom.config.get("kite.signatureKwargsVisible"))})),I&&T&&(this.subscriptions.add(new a(I,"click",e=>{T.classList.toggle("visible"),atom.config.set("kite.signatureKwargsVisible",!atom.config.get("kite.signatureKwargsVisible"))})),r(n,"in_kwargs")&&setTimeout(()=>{const e=T.querySelector("dl"),t=T.querySelector("dt.highlight");t&&(e.scrollTop=t.offsetTop-t.offsetHeight)},100)),E&&this.subscriptions.add(E.onDidClickMoreLink(()=>{this.listElement.model.hide()}))}checkWidth(){const e=this.querySelector(".name");if(e&&e.scrollWidth>e.offsetWidth){const i=e.scrollWidth-e.offsetWidth,o=e.querySelector(".signature"),a=[].slice.call(e.querySelectorAll(".parameter")),s=e.scrollWidth,r=a[this.currentIndex],c=r?r.offsetLeft-r.offsetWidth/2:s+1,l=[];let p=0;const u=this.currentIndex;if(!o)return;function t(){const e=document.createElement("span");e.className="parameter ellipsis",e.textContent="0 more, ",o.insertBefore(e,o.firstElementChild);for(let t=0;t<u;t++){const n=a[t];if(l.push(n),(p+=n.offsetWidth)-e.offsetWidth>=i)return p-=e.offsetWidth,l.forEach(e=>e.remove()),e.textContent=`${l.length} more, `,void(l.length=0)}l.length?(p-=e.offsetWidth,l.forEach(e=>e.remove()),e.textContent=`${l.length} more, `,l.length=0):e.remove()}function n(){const e=document.createElement("span");e.className="parameter ellipsis",e.textContent="0 more",o.appendChild(e);for(let t=a.length-1;t>u;t--){const n=a[t];if(l.push(n),(p+=n.offsetWidth)-e.offsetWidth>=i)return p-=e.offsetWidth,l.forEach(e=>e.remove()),e.textContent=`${l.length} more`,void(l.length=0)}l.length?(p-=e.offsetWidth,l.forEach(e=>e.remove()),e.textContent=`${l.length} more`,l.length=0):e.remove()}c>s?(t(),p<i&&n()):(n(),p<i&&t())}}}.initClass()}])
